<!DOCTYPE html>
<html lang="en">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1">
		
			<meta name="description" content="A graphics framework for specialists">
		
		<link rel="stylesheet" href="https://hugodaniel.com/css/base.css">
		<link rel="stylesheet" href="https://hugodaniel.com/css/html-system.css">
		<link rel="stylesheet" href="https://hugodaniel.com/css/dark-mode.css">
		<link rel="stylesheet" href="https://hugodaniel.com/css/desktop.css">
		<link rel="stylesheet" href="https://hugodaniel.com/css/submit-form.css">
		
			<link rel="alternate" type="application/atom+xml" title="Atom Feed" href="https://hugodaniel.com/atom.xml">
		
		
		
		<meta name="twitter:card" content="summary">
		<meta name="twitter:site" content="@mr_hugo">
		<meta name="twitter:creator" content="@mr_hugo">
		
			<title>Hugo Daniel</title>
			<meta name="twitter:title" content="Hugo Daniel">
			<meta property="og:type" content="website" >
		
		
			<meta name="twitter:description" content="Hugo Daniel's site about ideas and software experimentations">
			<meta property="og:description" content="Hugo Daniel's site about ideas and software experimentations">
		
		
		<meta property="og:url" content="https:&#x2F;&#x2F;hugodaniel.com&#x2F;projects&#x2F;shader-canvas&#x2F;">
		
		
		
		<!-- Matomo -->
		<script type="text/javascript">
			var _paq = window._paq = window._paq || [];
			/* tracker methods like "setCustomDimension" should be called before "trackPageView" */
			_paq.push(['trackPageView']);
			_paq.push(['enableLinkTracking']);
			(function() {
				var u="//vistas.hugodaniel.pt/";
				_paq.push(['setTrackerUrl', u+'matomo.php']);
				_paq.push(['setSiteId', '2']);
				var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
				g.type='text/javascript'; g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
			})();
		</script>
		<noscript><p><img src="//vistas.hugodaniel.pt/matomo.php?idsite=2&amp;rec=1" style="border:0;" alt="" /></p></noscript>
		<!-- End Matomo Code -->
	</head>
	<body>
		

<main role="main" class="project">

	<article class="

introduction center-images with-lists

    ">

		<header>
      <h1>
        
          Shader Canvas
        
      </h1>
			<p>
        
          A graphics framework for specialists
        
      </p>
			<nav>
        <a class="introduction" href="
        
          &#x2F;projects&#x2F;shader-canvas
        
        ">Introduction</a>
        <a class="documentation" href="
        
        &#x2F;projects&#x2F;shader-canvas&#x2F;documentation
        
        ">Documentation</a>
          <a href="
        
          https:&#x2F;&#x2F;github.com&#x2F;HugoDaniel&#x2F;shader_canvas
        ">GitHub</a>
			</nav>
		</header>

<nav class="project-menu">
        <a class="introduction" href="
        
          &#x2F;projects&#x2F;shader-canvas
        
        ">Intro</a>
        <a class="documentation" href="
        
        &#x2F;projects&#x2F;shader-canvas&#x2F;documentation
        
        ">Docs</a>
          <a href="
        
          https:&#x2F;&#x2F;github.com&#x2F;HugoDaniel&#x2F;shader_canvas
        ">GitHub</a>
        
</nav>

    

    
      <p>Low-level tags for your high-level graphics projects.</p>
<pre data-lang="html" style="background-color:#151515;color:#e8e8d3;" class="language-html "><code class="language-html" data-lang="html"><span>&lt;</span><span style="color:#ffb964;">shader-canvas</span><span>&gt;
</span><span style="color:#888888;">&lt;!--
</span><span style="color:#888888;">  Shader Canvas starts with this tag
</span><span style="color:#888888;">  Its children tags define what will
</span><span style="color:#888888;">  be rendered.
</span><span style="color:#888888;">
</span><span style="color:#888888;">  These tags match the low-level WebGL
</span><span style="color:#888888;">  operations.
</span><span style="color:#888888;">
</span><span style="color:#888888;">  It can support multiple graphical API
</span><span style="color:#888888;">  backends in the future.
</span><span style="color:#888888;">--&gt;
</span><span>  &lt;</span><span style="color:#ffb964;">webgl-canvas</span><span>&gt;
</span><span style="color:#888888;">&lt;!--
</span><span style="color:#888888;">  Start the WebGl backend
</span><span style="color:#888888;">  (the only one supported for now)
</span><span style="color:#888888;">
</span><span style="color:#888888;">  Inside this element, each tag
</span><span style="color:#888888;">  corresponds to its low level
</span><span style="color:#888888;">  WebGL function.
</span><span style="color:#888888;">--&gt;
</span><span>
</span><span>    &lt;</span><span style="color:#ffb964;">draw-calls</span><span>&gt;
</span><span style="color:#888888;">&lt;!--
</span><span style="color:#888888;">  List the actions to perform when
</span><span style="color:#888888;">  drawing. Each tag matches the
</span><span style="color:#888888;">  corresponding WebGL function.
</span><span style="color:#888888;">--&gt;
</span><span>      &lt;</span><span style="color:#ffb964;">clear-color red</span><span>=</span><span style="color:#556633;">&quot;</span><span style="color:#99ad6a;">0</span><span style="color:#556633;">&quot; </span><span style="color:#ffb964;">green</span><span>=</span><span style="color:#556633;">&quot;</span><span style="color:#99ad6a;">0</span><span style="color:#556633;">&quot; </span><span style="color:#ffb964;">blue</span><span>=</span><span style="color:#556633;">&quot;</span><span style="color:#99ad6a;">0</span><span style="color:#556633;">&quot; </span><span style="color:#ffb964;">alpha</span><span>=</span><span style="color:#556633;">&quot;</span><span style="color:#99ad6a;">1</span><span style="color:#556633;">&quot;</span><span>&gt;&lt;/</span><span style="color:#ffb964;">clear-color</span><span>&gt;
</span><span style="color:#888888;">&lt;!--
</span><span style="color:#888888;">  The &lt;clear-color&gt; matches the
</span><span style="color:#888888;">  WebGL &quot;clearColor()&quot; function
</span><span style="color:#888888;">
</span><span style="color:#888888;">  There is one of these for each
</span><span style="color:#888888;">  WebGL function.
</span><span style="color:#888888;">--&gt;
</span><span>      &lt;</span><span style="color:#ffb964;">clear-flags mask</span><span>=</span><span style="color:#556633;">&quot;</span><span style="color:#99ad6a;">COLOR_BUFFER_BIT</span><span style="color:#556633;">&quot;</span><span>&gt;&lt;/</span><span style="color:#ffb964;">clear-flags</span><span>&gt;
</span><span style="color:#888888;">&lt;!--
</span><span style="color:#888888;">  The &lt;clear-flags&gt; matches the
</span><span style="color:#888888;">  WebGL &quot;clearFlags()&quot; function
</span><span style="color:#888888;">
</span><span style="color:#888888;">  Each tag has attributes according
</span><span style="color:#888888;">  to the names given to the function
</span><span style="color:#888888;">  arguments in the WebGL spec.
</span><span style="color:#888888;">--&gt;
</span><span>
</span><span>      &lt;</span><span style="color:#ffb964;">use-program src</span><span>=</span><span style="color:#556633;">&quot;</span><span style="color:#99ad6a;">simple-triangle</span><span style="color:#556633;">&quot;</span><span>&gt;
</span><span style="color:#888888;">&lt;!-- 
</span><span style="color:#888888;">  Likewise &lt;use-program&gt; matches the
</span><span style="color:#888888;">  &quot;useProgram()&quot; function.
</span><span style="color:#888888;">  The &quot;src&quot; attribute can reference
</span><span style="color:#888888;">  the tag name that defines the
</span><span style="color:#888888;">  WebGL program to use.
</span><span style="color:#888888;">
</span><span style="color:#888888;">  In this case &lt;use-program&gt; will
</span><span style="color:#888888;">  look for the &lt;simple-triangle&gt;
</span><span style="color:#888888;">  program, defined below.
</span><span style="color:#888888;">--&gt;
</span><span>        &lt;</span><span style="color:#ffb964;">draw-vao src</span><span>=</span><span style="color:#556633;">&quot;</span><span style="color:#99ad6a;">triangle-vao</span><span style="color:#556633;">&quot;</span><span>&gt;&lt;/</span><span style="color:#ffb964;">draw-vao</span><span>&gt;
</span><span style="color:#888888;">&lt;!--
</span><span style="color:#888888;">  Any tag inside &lt;use-program&gt;
</span><span style="color:#888888;">  has the program bound to it.
</span><span style="color:#888888;">
</span><span style="color:#888888;">  Here, &lt;draw-vao&gt; is calling the
</span><span style="color:#888888;">  WebGL draw function for the
</span><span style="color:#888888;">  Vertex Array Object defined
</span><span style="color:#888888;">  below at the tag &lt;triangle-vao&gt;.
</span><span style="color:#888888;">  (VAO stands for Vertex Array Object).
</span><span style="color:#888888;">--&gt;
</span><span>      &lt;/</span><span style="color:#ffb964;">use-program</span><span>&gt;
</span><span>    &lt;/</span><span style="color:#ffb964;">draw-calls</span><span>&gt;
</span><span>
</span><span>
</span><span style="color:#888888;">&lt;!--
</span><span style="color:#888888;">  Besides the &lt;draw-calls&gt; the 
</span><span style="color:#888888;">  &lt;webgl-canvas&gt; can have 4 containers:
</span><span style="color:#888888;">   - &lt;webgl-programs&gt;
</span><span style="color:#888888;">      * every child will be a program
</span><span style="color:#888888;">   - &lt;webgl-buffers&gt;
</span><span style="color:#888888;">      * every child will be a buffer
</span><span style="color:#888888;">   - &lt;webgl-textures&gt;
</span><span style="color:#888888;">      * every child will be a texture
</span><span style="color:#888888;">   - &lt;webgl-vertex-array-objects&gt;
</span><span style="color:#888888;">      * every child will be a
</span><span style="color:#888888;">        vertex-array-object
</span><span style="color:#888888;">
</span><span style="color:#888888;">  Their direct children tag names can
</span><span style="color:#888888;">  be used as a reference in the &quot;src&quot;
</span><span style="color:#888888;">  attribute of other tags.
</span><span style="color:#888888;">--&gt;
</span><span>    &lt;</span><span style="color:#ffb964;">webgl-programs</span><span>&gt;
</span><span style="color:#888888;">&lt;!--
</span><span style="color:#888888;">  Inside the &lt;webgl-programs&gt; container
</span><span style="color:#888888;">  you can define the WebGL programs
</span><span style="color:#888888;">  by specifying a unique tag name to
</span><span style="color:#888888;">  each program.
</span><span style="color:#888888;">--&gt;
</span><span>      &lt;</span><span style="color:#ffb964;">simple-triangle</span><span>&gt;
</span><span style="color:#888888;">&lt;!--
</span><span style="color:#888888;">  Here starts the program
</span><span style="color:#888888;">  &quot;simple-triangle&quot;. Any name could
</span><span style="color:#888888;">  be set.
</span><span style="color:#888888;">--&gt;
</span><span>        &lt;</span><span style="color:#ffb964;">vertex-shader</span><span>&gt;
</span><span style="color:#888888;">&lt;!--
</span><span style="color:#888888;">  A WebGL program has a vertex-shader
</span><span style="color:#888888;">  and a fragment-shader.
</span><span style="color:#888888;">--&gt;
</span><span>          &lt;</span><span style="color:#ffb964;">code</span><span>&gt;
</span><span>            #version 300 es
</span><span>            in vec4 a_position;
</span><span>            void main() {
</span><span>                gl_Position = a_position;
</span><span>            }
</span><span>          &lt;/</span><span style="color:#ffb964;">code</span><span>&gt;
</span><span>        &lt;/</span><span style="color:#ffb964;">vertex-shader</span><span>&gt;
</span><span>        &lt;</span><span style="color:#ffb964;">fragment-shader</span><span>&gt;
</span><span>          &lt;</span><span style="color:#ffb964;">code</span><span>&gt;
</span><span>            #version 300 es
</span><span>            precision highp float;
</span><span>            out vec4 outColor;
</span><span>    
</span><span>            void main() {
</span><span>              outColor = vec4(1, 0, 1, 1);
</span><span>            }
</span><span>          &lt;/</span><span style="color:#ffb964;">code</span><span>&gt;
</span><span>        &lt;/</span><span style="color:#ffb964;">fragment-shader</span><span>&gt;
</span><span>      &lt;/</span><span style="color:#ffb964;">simple-triangle</span><span>&gt;
</span><span>    &lt;/</span><span style="color:#ffb964;">webgl-programs</span><span>&gt;
</span><span>
</span><span>    &lt;</span><span style="color:#ffb964;">webgl-vertex-array-objects</span><span>&gt;
</span><span style="color:#888888;">&lt;!-- 
</span><span style="color:#888888;">  &lt;webgl-vertex-array-objects&gt; works
</span><span style="color:#888888;">  like &lt;webgl-programs&gt;: you can put
</span><span style="color:#888888;">  any name here as a child tag,
</span><span style="color:#888888;">  provided it is unique.
</span><span style="color:#888888;">
</span><span style="color:#888888;">  Other tags can then reference this
</span><span style="color:#888888;">  name in their &quot;src&quot; attributes.
</span><span style="color:#888888;">--&gt;
</span><span>      &lt;</span><span style="color:#ffb964;">triangle-vao</span><span>&gt;
</span><span style="color:#888888;">&lt;!-- 
</span><span style="color:#888888;">  Here a Vertex Array Object
</span><span style="color:#888888;">  called &quot;triangle-vao&quot; is being
</span><span style="color:#888888;">  defined.
</span><span style="color:#888888;">--&gt;
</span><span>        &lt;</span><span style="color:#ffb964;">bind-buffer src</span><span>=</span><span style="color:#556633;">&quot;</span><span style="color:#99ad6a;">triangle-vertices</span><span style="color:#556633;">&quot;</span><span>&gt;
</span><span style="color:#888888;">&lt;!--
</span><span style="color:#888888;">  &lt;bind-buffer&gt; corresponds to the
</span><span style="color:#888888;">  WebGL function &quot;bindBuffer()&quot;
</span><span style="color:#888888;">
</span><span style="color:#888888;">  It is referencing the tag 
</span><span style="color:#888888;">  &quot;triangle-vertices&quot; which is
</span><span style="color:#888888;">  a buffer defined below
</span><span style="color:#888888;">  in &lt;webgl-buffers&gt;
</span><span style="color:#888888;">--&gt;
</span><span>          &lt;</span><span style="color:#ffb964;">vertex-attrib-pointer variable</span><span>=</span><span style="color:#556633;">&quot;</span><span style="color:#99ad6a;">a_position</span><span style="color:#556633;">&quot; </span><span style="color:#ffb964;">size</span><span>=</span><span style="color:#556633;">&quot;</span><span style="color:#99ad6a;">2</span><span style="color:#556633;">&quot;</span><span>&gt;
</span><span>          &lt;/</span><span style="color:#ffb964;">vertex-attrib-pointer</span><span>&gt;
</span><span style="color:#888888;">&lt;!--
</span><span style="color:#888888;">  Any child of &lt;bind-buffer&gt; will
</span><span style="color:#888888;">  have the referenced buffer bound.
</span><span style="color:#888888;">
</span><span style="color:#888888;">  Here the &lt;vertex-attrib-pointer&gt;
</span><span style="color:#888888;">  will use the &quot;vertexAttribPointer()&quot;
</span><span style="color:#888888;">  function for the buffer set at the
</span><span style="color:#888888;">  &lt;triangle-vertices&gt; tag.
</span><span style="color:#888888;">--&gt;
</span><span>        &lt;/</span><span style="color:#ffb964;">bind-buffer</span><span>&gt;
</span><span>      &lt;/</span><span style="color:#ffb964;">triangle-vao</span><span>&gt;
</span><span>    &lt;/</span><span style="color:#ffb964;">webgl-vertex-array-objects</span><span>&gt;
</span><span>
</span><span style="color:#888888;">&lt;!--
</span><span style="color:#888888;">  &lt;webgl-buffers&gt; is a container like
</span><span style="color:#888888;">  &lt;webgl-vertex-array-objects&gt; and 
</span><span style="color:#888888;">  &lt;webl-programs&gt;.
</span><span style="color:#888888;">
</span><span style="color:#888888;">  It is used to set buffers and their
</span><span style="color:#888888;">  data. In WebGL the buffers data is
</span><span style="color:#888888;">  separated from their meaning and usage.
</span><span style="color:#888888;">
</span><span style="color:#888888;">  &lt;webgl-vertex-array-objects&gt;,
</span><span style="color:#888888;">  &lt;webgl-programs&gt; and &lt;webgl-textures&gt;
</span><span style="color:#888888;">  can provide meaning and use the
</span><span style="color:#888888;">  buffers declared here.
</span><span style="color:#888888;">--&gt;
</span><span>    &lt;</span><span style="color:#ffb964;">webgl-buffers</span><span>&gt;
</span><span>      &lt;</span><span style="color:#ffb964;">triangle-vertices</span><span>&gt;
</span><span>        &lt;</span><span style="color:#ffb964;">buffer-data src</span><span>=</span><span style="color:#556633;">&quot;</span><span style="color:#99ad6a;">#trianglePoints</span><span style="color:#556633;">&quot;</span><span>&gt;&lt;/</span><span style="color:#ffb964;">buffer-data</span><span>&gt;
</span><span style="color:#888888;">&lt;!--
</span><span style="color:#888888;">  The tag &lt;buffer-data&gt; is equivalent
</span><span style="color:#888888;">  to the &quot;bufferData&quot; WebGL function.
</span><span style="color:#888888;">
</span><span style="color:#888888;">  The &quot;src&quot; attribute can also be an
</span><span style="color:#888888;">  element query string (used in the
</span><span style="color:#888888;">  &quot;querySelector&quot; function), as well as
</span><span style="color:#888888;">  a url that can point to the data to load.
</span><span style="color:#888888;">--&gt; 
</span><span>      &lt;/</span><span style="color:#ffb964;">triangle-vertices</span><span>&gt;
</span><span>    &lt;/</span><span style="color:#ffb964;">webgl-buffers</span><span>&gt;
</span><span>
</span><span>  &lt;/</span><span style="color:#ffb964;">webgl-canvas</span><span>&gt;
</span><span>&lt;/</span><span style="color:#ffb964;">shader-canvas</span><span>&gt;
</span><span>
</span><span style="color:#888888;">&lt;!-- The data for the buffer --&gt;
</span><span>&lt;</span><span style="color:#ffb964;">div id</span><span>=</span><span style="color:#556633;">&quot;</span><span style="color:#99ad6a;">trianglePoints</span><span style="color:#556633;">&quot;</span><span>&gt;[-0.7, 0, 0, 0.5, 0.7, 0]&lt;/</span><span style="color:#ffb964;">div</span><span>&gt;
</span></code></pre>
<h2 id="one-tag-per-low-level-function">One tag per low-level function</h2>
<p>A declarative syntax for graphics API's has several benefits and disadvantages.</p>
<h3 id="benefits">Benefits</h3>
<ul>
<li>Easy to debug
<ul>
<li>The state and its setup are always available in the DOM</li>
</ul>
</li>
<li>Emphasis on the initialization phase
<ul>
<li>Graphics APIs are typically inclined towards Command-like
and Factory-like usage patterns. <br>
<code>&lt;shader-canvas&gt;</code> makes these stand-out even more.</li>
</ul>
</li>
<li>Frame drawing is tuned to what is declared.
<ul>
<li>A specialized drawing function is created at initialization
by reading the low-level declaration in the DOM.</li>
</ul>
</li>
</ul>
<h3 id="disadvantages">Disadvantages</h3>
<ul>
<li>Hard for beginners
<ul>
<li>Requires good knowledge of the graphics API structure to get
started.</li>
</ul>
</li>
<li>Can become verbose.
<ul>
<li>Lots of tags are hard to manage without good collapsing and
grouping features. <br>
<code>&lt;shader-canvas&gt;</code> tries to tackle this by providing containers
and a way to reference their contents.</li>
</ul>
</li>
<li>New tags to learn
<ul>
<li><code>&lt;shader-canvas&gt;</code> introduces one tag per WebGL function, on
top of these, it adds &lt; 10 new tags that try to remove a lot
of the imperative nature of the WebGL API.</li>
</ul>
</li>
</ul>
<h2 id="composable-modules">Composable modules</h2>
<p>With <code>&lt;shader-canvas&gt;</code>, you can also create custom abstractions and compositions through modules.</p>
<p>With the module system, you can:</p>
<ul>
<li>Create new tags that bundle new functionality.</li>
<li>Extend shader code with new functions and variables.</li>
<li>Hook custom functions to specific entry points (on enter frame, on use program, etc.)</li>
<li>Split the graphics API into composable parts.</li>
</ul>
<p><code>&lt;shader-canvas&gt;</code> uses no dependencies and has ~80KB of JavaScript (~15KB minified and gzipped).</p>
<h2 id="customizable-high-level-abstractions">Customizable high-level abstractions</h2>
<p>Shader Canvas allows you to work as high-level as you need.</p>
<p>You might want to redo the low-level triangle approach from the code above
with an abstraction like this:</p>
<pre data-lang="html" style="background-color:#151515;color:#e8e8d3;" class="language-html "><code class="language-html" data-lang="html"><span>&lt;</span><span style="color:#ffb964;">shader-canvas</span><span>&gt;
</span><span>  &lt;</span><span style="color:#ffb964;">buffer-2d variable</span><span>=</span><span style="color:#556633;">&quot;</span><span style="color:#99ad6a;">vertex2d</span><span style="color:#556633;">&quot;</span><span>&gt;
</span><span>    [-0.7,   0,
</span><span>        0, 0.5,
</span><span>      0.7,   0]
</span><span>  &lt;/</span><span style="color:#ffb964;">buffer-2d</span><span>&gt;
</span><span>  &lt;</span><span style="color:#ffb964;">vertex-code</span><span>&gt;
</span><span>    #version 300 es
</span><span>    void main() {
</span><span>      gl_Position = vertex2d;
</span><span>    }
</span><span>  &lt;/</span><span style="color:#ffb964;">vertex-code</span><span>&gt;
</span><span>  &lt;</span><span style="color:#ffb964;">fragment-code</span><span>&gt;
</span><span>    #version 300 es
</span><span>    precision highp float;
</span><span>    out vec4 outColor;
</span><span>
</span><span>    void main() {
</span><span>      outColor = vec4(1, 0, 1, 1);
</span><span>    }
</span><span>  &lt;/</span><span style="color:#ffb964;">fragment-code</span><span>&gt;
</span><span>&lt;/</span><span style="color:#ffb964;">shader-canvas</span><span>&gt;
</span></code></pre>
<p>With the Shader Canvas module system you can declaratively, through HTML tags, create these kind of abstractions and new tags.</p>
<p>Read more about Shader Canvas in the <a href="/projects/shader-canvas/documentation/">documentation page</a>.</p>

    
	</article>
	<footer>
    <em>Created by <a href="/">Hugo Daniel</a> under license <a href="https://eupl.eu">EUPL 1.2</a>.</em>
	</footer>
</main>
<script>
  function closeToc(e) {
    document.body.removeEventListener("click", closeToc);
    document.body.classList.remove("show-toc");
  }
  document.querySelector(".toc")?.addEventListener("click", (e) => {
    e.stopPropagation();
  });

  for(let elem of document.querySelectorAll(".toc a")) {
    elem.addEventListener("click", closeToc)
  }

  document.querySelector(".hamburger").addEventListener("click", (e) => {
    e.preventDefault();
    if (!document.body.classList.contains("show-toc")) {
      document.body.addEventListener("click", closeToc);
    }
    document.body.classList.add("show-toc");
    e.stopPropagation();
  })
</script>

	</body>
</html>
