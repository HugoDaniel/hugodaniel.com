<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en">
    <title></title>
    <link href="https://hugodaniel.com/atom.xml" rel="self" type="application/atom+xml"/>
    <link href="https://hugodaniel.com"/>
    <generator uri="https://www.getzola.org/">Zola</generator>
    <updated>2023-08-15T00:00:00+00:00</updated>
    <id>https://hugodaniel.com/atom.xml</id>
    <entry xml:lang="en">
        <title>The art of the (sub-)pixel</title>
        <published>2023-08-15T00:00:00+00:00</published>
        <updated>2023-08-15T00:00:00+00:00</updated>
        <author>
          <name>Unknown</name>
        </author>
        <link rel="alternate" href="https://hugodaniel.com/posts/sub-problems-sub-pixels/" type="text/html"/>
        <id>https://hugodaniel.com/posts/sub-problems-sub-pixels/</id>
        
        <content type="html">&lt;p&gt;This post is the first in a series of posts about some challenges to think about when developing a motion design app.&lt;&#x2F;p&gt;
&lt;p&gt;It is meant to think a bit about pixel representations in drawing&#x2F;animation apps, or just bring some insights if you are not into that.&lt;&#x2F;p&gt;
&lt;p&gt;Although not related, this post also coincides with the release of LottieLab, the motion app I have been working on, please support us &lt;a href=&quot;https:&#x2F;&#x2F;www.producthunt.com&#x2F;posts&#x2F;lottielab&quot;&gt;on ProductHunt&lt;&#x2F;a&gt;. Check it out.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;the-art-of-the-pixel&quot;&gt;The art of the pixel&lt;&#x2F;h3&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;pixel_family.png&quot; alt=&quot;Four squares, that represent a family of pixels&quot; title=&quot;Support this (sub)pixel family!&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Imagine doing a drawing web app and thinking about how to represent pixels in it.&lt;&#x2F;p&gt;
&lt;p&gt;Implementing pixels as integers can be tempting when doing a design animation tool. After all, most creators avoid partial pixels with a fractional value, often called sub-pixel values, and generally consider it a good practice to prevent sub-pixels overall. &lt;&#x2F;p&gt;
&lt;p&gt;On top of this, our screens have a fixed integer resolution. Full HD is 1920 pixels wide per 1080 pixels tall. It is not 1920.7 per 1080.3333 or any other decimal limit.&lt;&#x2F;p&gt;
&lt;p&gt;Then, in the pixel abstraction stack we tend to generally think of pixels as square entities that live on our screens and can have color.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;geometry_pixel.jpg&quot; alt=&quot;Four images, each representing the hardware RGB pixels of four kinds of displays (TV CRT, PC CRT, XO-1 LCD and LCD). None of them have square pixel geometry.&quot; title=&quot;Pixel geometry at some point&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Integers are easy to work with and reason, especially when compared with floating point values, where &lt;a href=&quot;https:&#x2F;&#x2F;0.30000000000000004.com&quot;&gt;&lt;code&gt;0.1 + 0.2 != 0.3&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;, and &lt;a href=&quot;https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Double-precision_floating-point_format#Precision_limitations_on_integer_values&quot;&gt;precision&lt;&#x2F;a&gt; can be a problem in some edge cases here and there.&lt;&#x2F;p&gt;
&lt;p&gt;Even in a language like JavaScript, where standard numbers are all 64-bit floats, it is not uncommon to resort to flooring and multiplying&#x2F;dividing with a fixed 10-based power to provide a fixed resolution—peace in a world of eventual chaos.&lt;&#x2F;p&gt;
&lt;p&gt;Within this, thinking of pixels as integers feels &amp;quot;right&amp;quot;. After all, they are squares with colors. A shape can be positioned in either one pixel or the other. Right?&lt;&#x2F;p&gt;
&lt;h3 id=&quot;np-hard-p-is-for-pixel&quot;&gt;NP-Hard (P is for Pixel)&lt;&#x2F;h3&gt;
&lt;p&gt;My best take on this is that &amp;quot;it depends&amp;quot;. Pixels can be thought more or less as we want deciding on how low-level or high-level in the hardware&#x2F;software abstraction we want to be.&lt;&#x2F;p&gt;
&lt;p&gt;As a web developer, the lowest I go typically starts at the graphics backend in use (HTML5 Canvas? WebGL? SVG? regular ImageData bitmap?), and then goes all the way up to the app requirements. It depends.&lt;&#x2F;p&gt;
&lt;p&gt;If we take something low-level, like WebGL, there is no actual &amp;quot;square pixel&amp;quot; for a developer to directly manipulate.
WebGL cares about clip-space coordinates, which are just a square with dimensions ranging from -1.0 to 1.0. A notion of pixels then can be mapped here, but from a programmer&#x27;s perspective, they are on top of floating point square dimensions. &lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;clipspace.png&quot; alt=&quot;&quot; title=&quot;Clipspace coordinates&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Besides not caring about resolutions, clipspace doesn&#x27;t care about aspect ratio or the end device they are at.&lt;&#x2F;p&gt;
&lt;p&gt;Our main problem is how to place stuff from -1.0 to 1.0, because that is what we have available as coordinates.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;clipspace_monitor.png&quot; alt=&quot;&quot; title=&quot;Clipspace coordinates in a monitor&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;For WebGL the task of going from clipspace to hardware colors is an implementation problem, us users don&#x27;t have to deal with it too much.&lt;&#x2F;p&gt;
&lt;p&gt;We only have to think about how we are going to place stuff from -1.0 to 1.0.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;clipspace_phone.png&quot; alt=&quot;&quot; title=&quot;Clipspace coordinates in a phone&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Then it is up to the developer to define an abstraction that works on top of clipspace and can represent pixels as close as possible (or not, if we so want to).&lt;&#x2F;p&gt;
&lt;h3 id=&quot;empty-the-clip&quot;&gt;Empty the clip&lt;&#x2F;h3&gt;
&lt;p&gt;For instance, imagine an 8x8 pixel screen. The clip-space naive representation of pixels would be something like this:&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;clipspace_pixel.png&quot; alt=&quot;Clipspace coordinates square, split in 8x8 grid of smaller squares, with the top left square marked in red&quot; title=&quot;A pixel in clipspace coordinates&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;It would start at the left-most x position (-1.0) and since there are 8 pixels, it would extend 0.25 to the left (up to x=-0.75).&lt;&#x2F;p&gt;
&lt;p&gt;All good, but all good the same if in this representation we want to have a pixel somewhere in between:&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;clipspace_pixel2.png&quot; alt=&quot;Clipspace coordinates square, split in 8x8 grid of smaller squares, but the top left square is misplaced between the first and second position&quot; title=&quot;A misplaced pixel in clipspace coordinates&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;It is easily possible to define other positions, it is up to us. Sub-pixels? all good here. They just start in a different floating point position.&lt;&#x2F;p&gt;
&lt;p&gt;Then all of this, at some point, raises the question of pixel centers and offset starting positions, and pixel snapping, etc. For another post, maybe.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;but-my-motion-design-app-is-so-special-that-it-will-only-have-integer-pixels&quot;&gt;But my motion design app is so special that it will only have integer pixels&lt;&#x2F;h3&gt;
&lt;p&gt;Going with only integer pixels is fine, especially for apps with more of a pixel-art vibe or geometric approach with hard grids. &lt;&#x2F;p&gt;
&lt;p&gt;If not, be prepared to find workarounds for a few situations.&lt;&#x2F;p&gt;
&lt;p&gt;Here are a couple of situations that sub-pixels can be a super useful representation to have at hand:&lt;&#x2F;p&gt;
&lt;h4 id=&quot;rotate-a-square-and-snap-another-into-it&quot;&gt;Rotate a square, and snap another into it&lt;&#x2F;h4&gt;
&lt;p&gt;When snapping to a rotated shape, the position of the snapped shape can be more precise when put in a sub-pixel.&lt;&#x2F;p&gt;
&lt;video controls muted loop preload width=&quot;100%&quot;&gt;
  &lt;source src=&quot;&#x2F;videos&#x2F;snap_square.webm&quot; type=&quot;video&#x2F;webm&quot;&gt;
  &lt;source src=&quot;&#x2F;videos&#x2F;snap_square.mp4&quot; type=&quot;video&#x2F;mp4&quot;&gt;
&lt;&#x2F;video&gt;
&lt;small&gt;Video taken from Lottielab web app&lt;&#x2F;small&gt;
&lt;p&gt;Sub-pixel precision is also a good thing to have when doing transformation stack operations, like scaling a group, etc.&lt;&#x2F;p&gt;
&lt;video controls muted loop preload width=&quot;100%&quot;&gt;
  &lt;source src=&quot;&#x2F;videos&#x2F;scale_group.webm&quot; type=&quot;video&#x2F;webm&quot;&gt;
  &lt;source src=&quot;&#x2F;videos&#x2F;scale_group.mp4&quot; type=&quot;video&#x2F;mp4&quot;&gt;
&lt;&#x2F;video&gt;
&lt;small&gt;Video taken from Lottielab web app&lt;&#x2F;small&gt;
&lt;p&gt;When doing smooth animations, like tweening the shape from one position to another, using sub-pixel floating values can make 
super smooth animations.&lt;&#x2F;p&gt;
&lt;video controls muted loop preload width=&quot;100%&quot;&gt;
  &lt;source src=&quot;&#x2F;videos&#x2F;tweening.webm&quot; type=&quot;video&#x2F;webm&quot;&gt;
  &lt;source src=&quot;&#x2F;videos&#x2F;tweening.mp4&quot; type=&quot;video&#x2F;mp4&quot;&gt;
&lt;&#x2F;video&gt;
&lt;small&gt;Video taken from Lottielab web app&lt;&#x2F;small&gt;
&lt;p&gt;In the end, it all goes to the screen, and...&lt;&#x2F;p&gt;
&lt;h3 id=&quot;wear-sunscreen&quot;&gt;Wear sunscreen&lt;&#x2F;h3&gt;
&lt;p&gt;Screens can implement the notion of a pixel in many different ways, and if we look close enough, they are rarely &amp;quot;square&amp;quot; per se. While true that they end up mapped as square &amp;quot;device pixels&amp;quot;, they might also not correspond to the actual pixels your code is manipulating (because of hardware to software nuances like the device pixel ratio or so many other weird things like the Apple notch rounded edges abstraction, etc).&lt;&#x2F;p&gt;
&lt;p&gt;If we go high-level enough, the pixel representation can get weird quickly. CSS defines a pixel as a &lt;a href=&quot;https:&#x2F;&#x2F;drafts.csswg.org&#x2F;css-values&#x2F;#absolute-lengths&quot;&gt;&amp;quot;visual angle unit&amp;quot;&lt;&#x2F;a&gt; and CSS pixels are described as an &lt;a href=&quot;https:&#x2F;&#x2F;drafts.csswg.org&#x2F;css-values&#x2F;#reference-pixel&quot;&gt;angular measure.&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;drafts.csswg.org&#x2F;css-values&#x2F;images&#x2F;pixel1.png&quot; alt=&quot;CSS Pixel changes with distance&quot; title=&quot;In CSS pixels must become larger if the viewing distance increases&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;h2 id=&quot;final-words&quot;&gt;Final words&lt;&#x2F;h2&gt;
&lt;p&gt;I like to keep things &amp;quot;simple&amp;quot; and stick to floating point pixel values and then provide some usability aid to ensure that shapes get placed in integers most of the time while helping out creators work in these muddy waters.&lt;&#x2F;p&gt;
&lt;p&gt;Be wild and free those pixels!&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Minimal Color Swatches</title>
        <published>2022-02-03T00:00:00+00:00</published>
        <updated>2022-02-03T00:00:00+00:00</updated>
        <author>
          <name>Unknown</name>
        </author>
        <link rel="alternate" href="https://hugodaniel.com/posts/minimal-color-swatches/" type="text/html"/>
        <id>https://hugodaniel.com/posts/minimal-color-swatches/</id>
        
        <content type="html">&lt;p&gt;Recently I gained a boost of motivation that made me want to look into colors and drawing tools again.&lt;&#x2F;p&gt;
&lt;p&gt;I hate choosing colors, and it is tough for me to find good mixes of related colors that look well together and have multiple use cases. &lt;&#x2F;p&gt;
&lt;p&gt;For this reason, I have long been cultivating an attraction towards color pickers, the idea that software can help me choose colors and give me good working sets of matching colors.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;twitter.com&#x2F;ndchristie&quot;&gt;Naomi Danielle&lt;&#x2F;a&gt; gave an &lt;a href=&quot;https:&#x2F;&#x2F;twitter.com&#x2F;ndchristie&#x2F;status&#x2F;1382134093731794948&quot;&gt;excellent explanation&lt;&#x2F;a&gt; of making minimal and exciting color palettes a while back. At that time, I had not enough energy or motivation to pursue this idea, so it went into the bucket list until now.&lt;&#x2F;p&gt;
&lt;p&gt;This blog post explains my rudimentary interpretation of the idea behind it and provides simple examples of its inner workings. The final objective is the implementation of it all as a simple color palette generator, which is &lt;a href=&quot;https:&#x2F;&#x2F;svelte.dev&#x2F;repl&#x2F;d92223f84088414da98cce78f3ab382a?version=3.46.3&quot;&gt;available here&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;final_palette.png&quot; alt=&quot;13 color diamonds displayed in a grid. All the colors are related to the one present in the central diamond &quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;h2 id=&quot;don-t-pick-me&quot;&gt;Don&#x27;t pick me.&lt;&#x2F;h2&gt;
&lt;p&gt;Pick a color. This color will be the root color for a minimal palette of 12 other colors. &lt;&#x2F;p&gt;
&lt;p&gt;For example purposes, I am going to roll with #69b9d9.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;color_picked.png&quot; alt=&quot;A square with a blue color&quot; title=&quot;#69b9d9&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;To ease the creation of the 12 variations, I will use HSL (Hue, Saturation, Lightness), a common RGB alternative that allows varying the color lightness and saturation directly.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;hairy-gray&quot;&gt;Hairy Gray.&lt;&#x2F;h2&gt;
&lt;p&gt;Each color in the palette will have its light, which means that light will not be uniform across all colors, allowing artists to use darker tones and lighter tones consistently if they stick to the palette.&lt;&#x2F;p&gt;
&lt;p&gt;Taking the base color chosen, start by deciding which is the brightest and darkest tone possible (I am going with a max of +25 Lightness and -25 for the darker one, but roll your own).&lt;&#x2F;p&gt;
&lt;p&gt;Then create a gradient by splitting the difference into five tones each way.&lt;&#x2F;p&gt;
&lt;video controls muted loop preload width=&quot;100%&quot;&gt;
  &lt;source src=&quot;&#x2F;videos&#x2F;gradient_light.webm&quot; type=&quot;video&#x2F;webm&quot;&gt;
  &lt;source src=&quot;&#x2F;videos&#x2F;gradient_light.mp4&quot; type=&quot;video&#x2F;mp4&quot;&gt;
&lt;&#x2F;video&gt;
&lt;p&gt;Now create a relationship between these color variations by zig-zagging them and filling the two missing spots of the final palette layout. &lt;&#x2F;p&gt;
&lt;video controls muted loop preload width=&quot;100%&quot;&gt;
  &lt;source src=&quot;&#x2F;videos&#x2F;zig_zag_light.webm&quot; type=&quot;video&#x2F;webm&quot;&gt;
  &lt;source src=&quot;&#x2F;videos&#x2F;zig_zag_light.mp4&quot; type=&quot;video&#x2F;mp4&quot;&gt;
&lt;&#x2F;video&gt;
&lt;p&gt;Zig-zagging the lightness creates visual ways to establish relations between them. &lt;&#x2F;p&gt;
&lt;h2 id=&quot;no-more-can-be-absorbed&quot;&gt;No more can be absorbed&lt;&#x2F;h2&gt;
&lt;p&gt;As with lightness, the palette must provide an excellent range of color saturation. I replicated the lightness logic to get the color saturation range as an initial approach.&lt;&#x2F;p&gt;
&lt;p&gt;Using the same Zig Zag logic for saturation produces the following effect.&lt;&#x2F;p&gt;
&lt;video controls muted loop preload width=&quot;100%&quot;&gt;
  &lt;source src=&quot;&#x2F;videos&#x2F;zig_zag_saturation.webm&quot; type=&quot;video&#x2F;webm&quot;&gt;
  &lt;source src=&quot;&#x2F;videos&#x2F;zig_zag_saturation.mp4&quot; type=&quot;video&#x2F;mp4&quot;&gt;
&lt;&#x2F;video&gt;
&lt;p&gt;However, after playing around with the final palette of colors, I found that this produced a high emphasis on the light colors and a lower focus on the darker shades. Coinciding the saturation highs and lows with the light did not make a balanced final result to my eyes.&lt;&#x2F;p&gt;
&lt;p&gt;After showing it to a couple of friends, I opted to rearrange the saturation in an alternating fashion, highs-lows-highs from the base color outward.&lt;&#x2F;p&gt;
&lt;video controls muted loop preload width=&quot;100%&quot;&gt;
  &lt;source src=&quot;&#x2F;videos&#x2F;checker_saturation.webm&quot; type=&quot;video&#x2F;webm&quot;&gt;
  &lt;source src=&quot;&#x2F;videos&#x2F;checker_saturation.mp4&quot; type=&quot;video&#x2F;mp4&quot;&gt;
&lt;&#x2F;video&gt;
&lt;h2 id=&quot;hue-is-a-lovely-city&quot;&gt;Hue is a lovely city&lt;&#x2F;h2&gt;
&lt;p&gt;For Hue, the logic is denser. I have failed to formalize it in a good way in this palette generator. The idea is to shift the base color 118º in one direction and 34º in the other—these values I took from the Danielle example.&lt;&#x2F;p&gt;
&lt;video controls muted loop preload width=&quot;100%&quot;&gt;
  &lt;source src=&quot;&#x2F;videos&#x2F;hue_diff.webm&quot; type=&quot;video&#x2F;webm&quot;&gt;
  &lt;source src=&quot;&#x2F;videos&#x2F;hue_diff.mp4&quot; type=&quot;video&#x2F;mp4&quot;&gt;
&lt;&#x2F;video&gt;
&lt;p&gt;Then the relations for all the palette diamonds involve dividing by two and sometimes by four. These relations are present in the &lt;code&gt;hueValues()&lt;&#x2F;code&gt; function &lt;a href=&quot;https:&#x2F;&#x2F;svelte.dev&#x2F;repl&#x2F;d92223f84088414da98cce78f3ab382a?version=3.46.3&quot;&gt;in the code&lt;&#x2F;a&gt;. They are fickle and sometimes jump, but the overall result is good enough.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;at-the-end-of-the-night&quot;&gt;At the end of the night&lt;&#x2F;h2&gt;
&lt;p&gt;The final palette uses this lightness, saturation, and hue palettes.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;swatches_mix.png&quot; alt=&quot;4 palettes: lightness palette + saturation palette + hue palette with arrows to indicate that mixing them produces the final palette &quot; title=&quot;H+S+L&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Using the system color-picker, we can make these colors act alive.&lt;&#x2F;p&gt;
&lt;video controls muted loop preload width=&quot;100%&quot;&gt;
  &lt;source src=&quot;&#x2F;videos&#x2F;swatches_final.webm&quot; type=&quot;video&#x2F;webm&quot;&gt;
  &lt;source src=&quot;&#x2F;videos&#x2F;swatches_final.mp4&quot; type=&quot;video&#x2F;mp4&quot;&gt;
&lt;&#x2F;video&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;svelte.dev&#x2F;repl&#x2F;d92223f84088414da98cce78f3ab382a?version=3.46.3&quot;&gt;Try it out&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;final-words&quot;&gt;Final words&lt;&#x2F;h2&gt;
&lt;p&gt;Creating this palette generator was my first &lt;a href=&quot;https:&#x2F;&#x2F;svelte.dev&#x2F;&quot;&gt;Svelte&lt;&#x2F;a&gt; project.&lt;&#x2F;p&gt;
&lt;p&gt;Svelte is a lean front-end framework with an excellent initial community in Portugal.
Their help and patience were paramount as I routinely bombed their Discord channel with questions and bugs.&lt;&#x2F;p&gt;
&lt;img src=&#x2F;images&#x2F;svelte_portugal.svg width=96 alt=&quot;Svelte Portugal Discord group logo&quot;&#x2F;&gt;
&lt;p&gt;If you would like to get involved, &lt;a href=&quot;https:&#x2F;&#x2F;discord.gg&#x2F;fCT57QzmJV&quot;&gt;here is an invitation link&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Infinite grid with just one square</title>
        <published>2021-03-24T00:00:00+00:00</published>
        <updated>2021-03-24T00:00:00+00:00</updated>
        <author>
          <name>Unknown</name>
        </author>
        <link rel="alternate" href="https://hugodaniel.com/posts/infinite-grid-with-just-one-square/" type="text/html"/>
        <id>https://hugodaniel.com/posts/infinite-grid-with-just-one-square/</id>
        
        <content type="html">&lt;p&gt;Around 2017, I took up more seriously the &amp;quot;Grid Generator&amp;quot; project.
A Web App to explore the possibilities of an infinite grid of squares.
Driven primarily out of curiosity, I wondered if even I could create something cool with an endless grid of customizable squares?&lt;&#x2F;p&gt;
&lt;p&gt;I spent almost two years on it. Two years of trial and error iterations in code, UI, product orientation, business, and failing hard at all those things and so many others. &amp;quot;This time will be different.&amp;quot;&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;square_grid.png&quot; alt=&quot;A square grid with some squares painted in random colors&quot; title=&quot;This grid is infinite.&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;h2 id=&quot;webgl-2-flex-its-wings&quot;&gt;WebGL 2 flex its wings.&lt;&#x2F;h2&gt;
&lt;p&gt;To do an infinite grid in WebGL 1, I used many buffers and sluggish texture updates at each frame (and vast texture atlases).
The shaders code was a mess. Memory usage was like a rocket while at use.
It also did not benefit from my rusty elementary math and miscalculations,
breaking at most of the device&#x27;s pixel ratios and CPU usage abuse wrapped in leaky abstractions.&lt;&#x2F;p&gt;
&lt;p&gt;The plan now is to change the part that needs to be improved: &lt;em&gt;the WebGL version.&lt;&#x2F;em&gt;&lt;&#x2F;p&gt;
&lt;h2 id=&quot;single-in-shape&quot;&gt;Single, in shape&lt;&#x2F;h2&gt;
&lt;p&gt;WebGL focuses on triangles. A square is nothing more than two triangles glued together.&lt;&#x2F;p&gt;
&lt;p&gt;There are a couple of primitives to describe triangles with WebGL. The &lt;em&gt;&amp;quot;triangle fan&amp;quot;&lt;&#x2F;em&gt; has excellent properties that I like to use. It allows triangle meshes to be represented by adding vertices on top of a root vertex. It is not only fast to process a triangle fan mesh, but it also can save a lot of space by avoiding vertices to be repeatedly declared per triangle.&lt;&#x2F;p&gt;
&lt;video autoplay=&quot;autoplay&quot; muted loop preload width=&quot;100%&quot; playsinline&gt;
  &lt;source src=&quot;&#x2F;videos&#x2F;triangle_fan.webm&quot; type=&quot;video&#x2F;webm&quot;&gt;
  &lt;source src=&quot;&#x2F;videos&#x2F;triangle_fan2.mp4&quot; type=&quot;video&#x2F;mp4&quot;&gt;
&lt;&#x2F;video&gt;
&lt;p&gt;On top of it, a &lt;strong&gt;triangle fan&lt;&#x2F;strong&gt; works well together with a &lt;strong&gt;line strip&lt;&#x2F;strong&gt;.
I can create an outline for the shape using the same mesh of points, no need to provide an extra mesh of points just for it.&lt;&#x2F;p&gt;
&lt;video autoplay=&quot;autoplay&quot; muted loop preload width=&quot;100%&quot; playsinline&gt;
  &lt;source src=&quot;&#x2F;videos&#x2F;line_stripe.webm&quot; type=&quot;video&#x2F;webm&quot;&gt;
  &lt;source src=&quot;&#x2F;videos&#x2F;line_stripe.mp4&quot; type=&quot;video&#x2F;mp4&quot;&gt;
&lt;&#x2F;video&gt;
&lt;p&gt;There it is, a square and its outline all alone in the world.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;take-a-square-for-instance&quot;&gt;Take a square, for instance.&lt;&#x2F;h2&gt;
&lt;p&gt;WebGL 2 brings &lt;a href=&quot;https:&#x2F;&#x2F;developer.mozilla.org&#x2F;en-US&#x2F;docs&#x2F;Web&#x2F;API&#x2F;WebGL2RenderingContext&#x2F;drawElementsInstanced&quot;&gt;instanced drawing&lt;&#x2F;a&gt; mode for the mesh masses.&lt;&#x2F;p&gt;
&lt;p&gt;The process to use instanced elements is as follows:&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;Define a bunch of unique vertices (&lt;em&gt;4 vertices for a square&lt;&#x2F;em&gt;).&lt;&#x2F;li&gt;
&lt;li&gt;Define a single element by specifying the vertex indexes that make it up (&lt;em&gt;vertex 1, vertex 2, vertex 3, and so on&lt;&#x2F;em&gt;).&lt;&#x2F;li&gt;
&lt;li&gt;Say how many occurrences of that element to render (&lt;em&gt;draw 5000000 instances of this square!!&lt;&#x2F;em&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;p&gt;A single square would have &lt;em&gt;4&lt;&#x2F;em&gt; vertices total, &lt;em&gt;1&lt;&#x2F;em&gt; triangle fan element, and &lt;em&gt;1&lt;&#x2F;em&gt; instance of it (its a single square).&lt;&#x2F;p&gt;
&lt;p&gt;Using instances of a simple mesh can be faster to draw (fewer draw calls per frame).
More importantly, the seed mesh can be changed to any shape, effectively allowing for infinite grids of any tileable form (or non-tileable if its your thing).&lt;&#x2F;p&gt;
&lt;h2 id=&quot;infinity-is-a-long-way-especially-towards-the-end&quot;&gt;Infinity is a long way, especially towards the end.&lt;&#x2F;h2&gt;
&lt;p&gt;An infinite grid needs to have at least enough squares to fill the whole screen, plus padding of one row and one column to accommodate the grid&#x27;s panning.&lt;&#x2F;p&gt;
&lt;p&gt;The exact number depends on both the square size and screen size. With a 16x16 pixels sized square, at least ~8300 instances are needed to cover a 1920x1080 pixels canvas ((1920 &#x2F; 16) * (1080 &#x2F; 16) + padding[1920 &#x2F;16 +1080&#x2F;16]).&lt;&#x2F;p&gt;
&lt;p&gt;A common approach to make it look infinite is to adjust its x and y position to be &lt;code&gt;size - pan % size&lt;&#x2F;code&gt;  when moving the grid.&lt;&#x2F;p&gt;
&lt;p&gt;I tried many variations of this &lt;em&gt;modulo and division&lt;&#x2F;em&gt; approaches in the past &amp;quot;with varying degrees of success&amp;quot; (read: failure ☠️).
Either precision errors started showing in some grid transformations (zooming, rotation, etc.)🔥, or subtle flickering would appear because of minor miscalculations ؇ that would then get emphasized with the conversion between the JavaScript 64bit floats and the GPU 32bit floats, or 🙈 squares would disappear.&lt;&#x2F;p&gt;
&lt;p&gt;So nothing unusual, just another day with my code 🤯.&lt;&#x2F;p&gt;
&lt;p&gt;Scrap all that. In the end, the best approach for an infinite grid that these two neurons could muster is more straightforward than those modulo and margin square adjustments.
It goes like this:&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;Set up an &lt;a href=&quot;https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Orthographic_projection&quot;&gt;orthographic viewport projection&lt;&#x2F;a&gt; transformation.&lt;&#x2F;li&gt;
&lt;li&gt;When it moves&#x2F;zooms, place the squares in it at the positions they would typically be at (i.e., no modulo or tricks or transformations, start at the top left index for the current viewport transformation and fill the screen with squares).&lt;&#x2F;li&gt;
&lt;li&gt;Only place the number of squares needed to fill the viewport.&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;p&gt;Here is a rough sketch:&lt;&#x2F;p&gt;
&lt;video autoplay=&quot;autoplay&quot; muted loop preload width=&quot;100%&quot; playsinline&gt;
  &lt;source src=&quot;&#x2F;videos&#x2F;ortho_projection.webm&quot; type=&quot;video&#x2F;webm&quot;&gt;
  &lt;source src=&quot;&#x2F;videos&#x2F;ortho_projection.mp4&quot; type=&quot;video&#x2F;mp4&quot;&gt;
&lt;&#x2F;video&gt;
&lt;p&gt;It is easy(er), and the GPU can do these calculations at lightning speed.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;pick-me-up-before-i-go&quot;&gt;Pick me up before I go.&lt;&#x2F;h2&gt;
&lt;p&gt;In the streets of graphics programming, selecting the grid element below the mouse pointer or at the touch position is sometimes called &amp;quot;picking&amp;quot;. You &amp;quot;pick&amp;quot; the shape by mousing over it or touching it with those beautiful fingers.&lt;&#x2F;p&gt;
&lt;p&gt;The typical &amp;quot;simple&amp;quot; approach to perform this involves doing the &lt;span style=&quot;white-space: nowrap;&quot;&gt;shape&amp;lt;-&amp;gt;mouse&lt;&#x2F;span&gt; intersection with JavaScript (thus in the CPU). Calculating this intersection is a specialized function for each different figure (an intersection function for squares, another for hexagons, another for triangles, etc.). Doing it for a square grid is &amp;quot;very easy&amp;quot; when all the squares always align with the x&#x2F;y axis and have the same size.&lt;&#x2F;p&gt;
&lt;p&gt;This time I want to explore a different, but common, technique for &amp;quot;picking&amp;quot;. One that works with any shape.
A global picking method compatible with anything I can throw at it.&lt;&#x2F;p&gt;
&lt;p&gt;It goes like this:&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;Draw the grid into multiple targets, the screen, and an array in GPU memory.&lt;&#x2F;li&gt;
&lt;li&gt;On the screen, paint the shapes as expected (their colors, etc.). On the array in memory, &amp;quot;paint&amp;quot; only the shape ids.&lt;&#x2F;li&gt;
&lt;li&gt;When the mouse moves&#x2F;interacts, get the shape id by reading the pixel at the current mouse position from the shape ids array.&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;video autoplay=&quot;autoplay&quot; muted loop preload width=&quot;100%&quot;&gt;
  &lt;source src=&quot;&#x2F;videos&#x2F;mrt.webm&quot; type=&quot;video&#x2F;webm&quot;&gt;
  &lt;source src=&quot;&#x2F;videos&#x2F;mrt.mp4&quot; type=&quot;video&#x2F;mp4&quot;&gt;
&lt;&#x2F;video&gt;
&lt;p&gt;This way, it is possible to get the shape id at each screen pixel, and when the mouse moves over a pixel or a finger touches the screen, the code looks for the shape id in the array of shape ids instead.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;jargon&quot;&gt;Jargon&lt;&#x2F;h3&gt;
&lt;p&gt;This technique is sometimes named &amp;quot;single-pass picking&amp;quot; and makes use of WebGL MRT (&lt;a href=&quot;https:&#x2F;&#x2F;www.khronos.org&#x2F;registry&#x2F;webgl&#x2F;specs&#x2F;latest&#x2F;2.0&#x2F;#3.7.11&quot;&gt;Multiple-Render-Targets&lt;&#x2F;a&gt; - the screen and the array) and PBOs (&lt;a href=&quot;https:&#x2F;&#x2F;www.khronos.org&#x2F;registry&#x2F;OpenGL&#x2F;specs&#x2F;es&#x2F;3.0&#x2F;es_spec_3.0.pdf#subsection.3.7.1&quot;&gt;Pixel-Buffer-Objects&lt;&#x2F;a&gt; - arrays to use as if they were a screen).&lt;&#x2F;p&gt;
&lt;h3 id=&quot;benefits&quot;&gt;Benefits&lt;&#x2F;h3&gt;
&lt;p&gt;It can work with any shape, with no need for special intersection functions.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;drawbacks&quot;&gt;Drawbacks&lt;&#x2F;h3&gt;
&lt;ul&gt;
&lt;li&gt;It is much slower than using specialized intersection functions.&lt;&#x2F;li&gt;
&lt;li&gt;It requires extra memory for the arrays, and they need additional copies to leave the GPU and reach the CPU.&lt;&#x2F;li&gt;
&lt;li&gt;It can introduce &amp;quot;pipeline stalls&amp;quot; (WebGL is primarily a &amp;quot;write-only&amp;quot; API, intended to write colors to the screen&#x2F;arrays - things can get complicated when reading these values back from WebGL).&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;optimizations&quot;&gt;Optimizations&lt;&#x2F;h3&gt;
&lt;p&gt;Many optimizations can limit these drawbacks. Here is my favorite optimization of them all:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Do nothing. Avoid work at all costs.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;That is a 100% optimization right there. It beats &amp;quot;doing it faster&amp;quot; every time. Some even apply this to life in general with great success.&lt;&#x2F;p&gt;
&lt;p&gt;For this particular case of shape picking, it can be fruitful to avoid doing any work at all for the most part.
Reading pixels from the screen&#x2F;array is expensive and complicated.
In WebGL, this requires at least one &lt;a href=&quot;https:&#x2F;&#x2F;developer.mozilla.org&#x2F;en-US&#x2F;docs&#x2F;Web&#x2F;API&#x2F;WebGLRenderingContext&#x2F;flush&quot;&gt;flush&lt;&#x2F;a&gt; and one &lt;a href=&quot;https:&#x2F;&#x2F;developer.mozilla.org&#x2F;en-US&#x2F;docs&#x2F;Web&#x2F;API&#x2F;WebGL2RenderingContext&#x2F;fenceSync&quot;&gt;sync&lt;&#x2F;a&gt; outside of the frame boundaries (besides the array copy).&lt;&#x2F;p&gt;
&lt;p&gt;These are not only hard to perform but also carry severe performance costs. They are not a good fit for every mouse move or frame.&lt;&#x2F;p&gt;
&lt;p&gt;The case of the grid is a curious one: interacting with its elements happens when the grid is stopped, if someone is interacting with a grid element then they are not moving&#x2F;zooming the grid.
A grid changes when there is a panning or zooming action. Besides those two actions, it stays the same. The shape ids are at the same position all the time (even if their contents change, the ids remain at the same place provided no translation or zooming is going on).&lt;&#x2F;p&gt;
&lt;p&gt;Interacting with grid elements only happens after the pan&#x2F;zoom action finishes, which is the perfect place to &amp;quot;hide&amp;quot; the flush&#x2F;sync&#x2F;copy operation. Once right after the panning&#x2F;zooming ends, WebGL renders the shape id&#x27;s to multiple targets, flushes&#x2F;syncs, and copies the array to the CPU, where it stays static forever (at least until some following pan&#x2F;zoom operation finishes). Interacting with the grid is then only about reading this array for shape ids, with no need for WebGL or position updates.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;what-is-next-for-shader-canvas&quot;&gt;What is next for &lt;code&gt;&amp;lt;shader_canvas&amp;gt;&lt;&#x2F;code&gt;?&lt;&#x2F;h2&gt;
&lt;p&gt;You can read the code for this at the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;HugoDaniel&#x2F;shader_canvas&#x2F;tree&#x2F;main&#x2F;examples&#x2F;6-infinite-grid&quot;&gt;Shader Canvas repository&lt;&#x2F;a&gt; (still in progress).&lt;&#x2F;p&gt;
&lt;p&gt;&lt;a href=&quot;&#x2F;projects&#x2F;shader-canvas&#x2F;&quot;&gt;Shader Canvas&lt;&#x2F;a&gt; is my low-level framework for graphics programming. It consists of HTML tags that perform each WebGL function, bringing the API into a declarative space.&lt;&#x2F;p&gt;
&lt;p&gt;I am working on its second iteration after the first release. I will evolve and use this framework for my next drawing web app called &amp;quot;Shape The Pixel&amp;quot;.
The road ahead for &lt;code&gt;&amp;lt;shader_canvas&amp;gt;&lt;&#x2F;code&gt; is like this in my head, things are going to change for sure:&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;Release &lt;code&gt;&amp;lt;shader_canvas&amp;gt;&lt;&#x2F;code&gt; proof of concept (&lt;a href=&quot;https:&#x2F;&#x2F;hugodaniel.com&#x2F;posts&#x2F;high-level-webgl-low-level-tags&#x2F;&quot;&gt;occured in 2021-03-03&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;The first iteration of the proof of concept with a focus on its modules (in &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;HugoDaniel&#x2F;shader_canvas&#x2F;blob&#x2F;main&#x2F;CHANGELOG.md&quot;&gt;2021-03-15&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;A second iteration of the proof of concept with a focus on framebuffers and texture arrays&#x2F;atlas (&lt;em&gt;ongoing&lt;&#x2F;em&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;A third iteration of the proof of concept with a focus on animation and transform feedbacks (to be done)&lt;&#x2F;li&gt;
&lt;li&gt;Version 2.0.0 release:&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;ul&gt;
&lt;li&gt;Change it into a simple &amp;quot;compiler.&amp;quot;&lt;&#x2F;li&gt;
&lt;li&gt;Provide the first support for the Metal graphics framework.&lt;&#x2F;li&gt;
&lt;li&gt;It will only happen when the &amp;quot;Shape The Pixel&amp;quot; web app is released, and the &lt;a href=&quot;https:&#x2F;&#x2F;hugodaniel.com&#x2F;posts&#x2F;introducing-deno-tag&#x2F;&quot;&gt;deno_tag&lt;&#x2F;a&gt; and the &lt;a href=&quot;https:&#x2F;&#x2F;deno.land&#x2F;x&#x2F;glsl_variables@v1.0.2&quot;&gt;GLSL parser&lt;&#x2F;a&gt; get some planned updates - they are all connected 🤫.&lt;&#x2F;li&gt;
&lt;li&gt;&lt;em&gt;Demos and examples will only show up here at this 2.0 stage&lt;&#x2F;em&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;conclusion&quot;&gt;Conclusion&lt;&#x2F;h3&gt;
&lt;video autoplay=&quot;autoplay&quot; muted loop preload width=&quot;100%&quot;&gt;
  &lt;source src=&quot;&#x2F;videos&#x2F;sq_grid.webm&quot; type=&quot;video&#x2F;webm&quot;&gt;
  &lt;source src=&quot;&#x2F;videos&#x2F;sq_grid.mp4&quot; type=&quot;video&#x2F;mp4&quot;&gt;
&lt;&#x2F;video&gt;
&lt;p&gt;Drawing an infinite grid in WebGL 2 can be done using its instance drawing functions to avoid repeating vertices and multiple-render-targets for picking.
Read the pixels only once when the grid panning&#x2F;zooming operation finishes to avoid WebGL pipeline stalls.
Using these two WebGL graphics techniques allows for infinite grids of custom shapes so that shape updates happen (mostly) only at the single seed mesh&#x2F;shape level.&lt;&#x2F;p&gt;
&lt;video autoplay=&quot;autoplay&quot; muted loop preload width=&quot;100%&quot;&gt;
  &lt;source src=&quot;&#x2F;videos&#x2F;tris.webm&quot; type=&quot;video&#x2F;webm&quot;&gt;
  &lt;source src=&quot;&#x2F;videos&#x2F;tris.mp4&quot; type=&quot;video&#x2F;mp4&quot;&gt;
&lt;&#x2F;video&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>High-level WebGL. Low-level tags.</title>
        <published>2021-03-03T00:00:00+00:00</published>
        <updated>2021-03-03T00:00:00+00:00</updated>
        <author>
          <name>Unknown</name>
        </author>
        <link rel="alternate" href="https://hugodaniel.com/posts/high-level-webgl-low-level-tags/" type="text/html"/>
        <id>https://hugodaniel.com/posts/high-level-webgl-low-level-tags/</id>
        
        <content type="html">&lt;p&gt;When people think about the WebGL API, they focus on one of the famous libraries
that use it. Typically &lt;a href=&quot;https:&#x2F;&#x2F;threejs.org&quot;&gt;&amp;quot;three.js&amp;quot;&lt;&#x2F;a&gt; or
&lt;a href=&quot;https:&#x2F;&#x2F;www.babylonjs.com&quot;&gt;&amp;quot;Babylon&amp;quot;&lt;&#x2F;a&gt;. There&#x27;s barely any motivation
to use the WebGL API directly. But the WebGL API is still just as important to
know as it provides creative ways to place colors in browser pages.&lt;&#x2F;p&gt;
&lt;p&gt;The &lt;a href=&quot;https:&#x2F;&#x2F;www.khronos.org&#x2F;registry&#x2F;webgl&#x2F;specs&#x2F;latest&#x2F;1.0&#x2F;#1&quot;&gt;WebGL spec&lt;&#x2F;a&gt; even starts by saying:&lt;&#x2F;p&gt;
&lt;p&gt;&lt;em&gt;Given the many use cases of 3D graphics, WebGL chooses the approach of providing
flexible primitives that can be applied to any use case. Libraries can provide
an API on top of WebGL that is more tailored to specific areas, thus adding a
convenience layer to WebGL that can accelerate and simplify development. However,
because of its OpenGL ES 2.0 heritage, it should be straightforward for
developers familiar with modern desktop OpenGL or OpenGL ES 2.0 development to
transition to WebGL development.&lt;&#x2F;em&gt;&lt;&#x2F;p&gt;
&lt;p&gt;WebGL was made closer to OpenGL ES 2.0 (a C&#x2F;C++-oriented framework) than closer
to its sibling web APIs.&lt;&#x2F;p&gt;
&lt;p&gt;For a front-end developer, programing directly in WebGL feels like juggling
many unseen global variables while struggling to understand why functions take
those strange byte arguments.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;maskontop.png&quot; alt=&quot;Three colored COVID face masks on top of each other&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;h2 id=&quot;graphics-frameworks-that-work-on-top-of-graphics-frameworks&quot;&gt;Graphics frameworks that work on top of graphics frameworks&lt;&#x2F;h2&gt;
&lt;p&gt;Fortunately, there are a lot of frameworks that simplify our life when dealing
with the WebGL API. The most recent web-trend of these use threejs and tries to
bring back some helpful &lt;a href=&quot;https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;VRML&quot;&gt;VRML&lt;&#x2F;a&gt;-like concepts through tags&#x2F;components. For React,
there is &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;pmndrs&#x2F;react-three-fiber&quot;&gt;&amp;quot;react-three-fiber&amp;quot;&lt;&#x2F;a&gt;.
For Web Components, the &lt;a href=&quot;https:&#x2F;&#x2F;aframe.io&quot;&gt;&amp;quot;a-frame&amp;quot;&lt;&#x2F;a&gt;, and recently
&lt;a href=&quot;https:&#x2F;&#x2F;troisjs.github.io&quot;&gt;&amp;quot;troisjs&amp;quot;&lt;&#x2F;a&gt; for Vue, among many others.&lt;&#x2F;p&gt;
&lt;p&gt;These frameworks provide the same sort of standard graphical decomposition.
They use &lt;em&gt;&amp;quot;cameras&amp;quot;&lt;&#x2F;em&gt; pointed into a &lt;em&gt;&amp;quot;scene&amp;quot;&lt;&#x2F;em&gt; of &lt;em&gt;&amp;quot;objects&amp;quot;&lt;&#x2F;em&gt; with &lt;em&gt;&amp;quot;materials&amp;quot;&lt;&#x2F;em&gt;
and &lt;em&gt;&amp;quot;transformations&amp;quot;&lt;&#x2F;em&gt; applied to them.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;why-use-webgl-directly&quot;&gt;Why use WebGL directly?&lt;&#x2F;h2&gt;
&lt;p&gt;Using the WebGL API directly, at the very least, helps you understand how it
works and consequently how those trendy high-level graphics frameworks get to
deploy their concepts. It is not for the faint of heart. WebGL is a low-level
API that inherits a lot of stuff from OpenGL ES, inheriting a lot from OpenGL,
inheriting a lot from the 90s. Oh, the 90s, the dark ages of API design.&lt;&#x2F;p&gt;
&lt;p&gt;All that taken into consideration, there are some &lt;strong&gt;real&lt;&#x2F;strong&gt; benefits for the
enthusiastic programmer:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Learn an abstraction of GPU graphics and primitives:&lt;&#x2F;strong&gt; in WebGL, there are
no &lt;em&gt;&amp;quot;cameras&amp;quot;&lt;&#x2F;em&gt; or even a &lt;em&gt;&amp;quot;scene&amp;quot;&lt;&#x2F;em&gt; with &lt;em&gt;&amp;quot;materials&amp;quot;&lt;&#x2F;em&gt;. Instead, you get to use
&lt;em&gt;&amp;quot;buffers&amp;quot;&lt;&#x2F;em&gt; and &lt;em&gt;&amp;quot;programs&amp;quot;&lt;&#x2F;em&gt;, and &lt;em&gt;&amp;quot;vertex array objects&amp;quot;&lt;&#x2F;em&gt; in &lt;em&gt;&amp;quot;shader&amp;quot;&lt;&#x2F;em&gt; code
written with a specific syntax.&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;Focus on shaders:&lt;&#x2F;strong&gt; WebGL is all about the code that runs ultra fast in the
GPU, using specific techniques to leverage high-performance parallel runs.&lt;&#x2F;li&gt;
&lt;li&gt;&lt;strong&gt;Immediate mode API:&lt;&#x2F;strong&gt; Learning how to use an immediate mode graphics API is
cool to understand how it is biased towards baking things in initialization
to reduce the draw calls that get executed at runtime.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;If you are willing to go down that rabbit hole, &lt;a href=&quot;https:&#x2F;&#x2F;www.khronos.org&#x2F;webgl&#x2F;wiki&#x2F;Getting_Started&quot;&gt;start here&lt;&#x2F;a&gt;
and proceed with the excellent &lt;a href=&quot;https:&#x2F;&#x2F;webgl2fundamentals.org&quot;&gt;WebGL 2 Fundamentals&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;abstract-the-frustration-away&quot;&gt;Abstract the frustration away&lt;&#x2F;h2&gt;
&lt;p&gt;With WebGL, even simple things take quite a bit of code. A simple image is
never &amp;quot;simple&amp;quot;. It can require pages of code in setup and initialization and a
whole WebGL global state system that needs to be maintained.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;masksontree.png&quot; alt=&quot;A tree with COVID masks as leafs&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;As a result, 10 years ago, back in the early days of WebGL (which today has
its 10th anniversary!), a few libraries showed up that used a thin abstraction
layer on top of it and tried to deal with the boilerplate JS code.
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;evanw&#x2F;lightgl.js&#x2F;&quot;&gt;lightgl.js&lt;&#x2F;a&gt; is one of these notorious
libs.&lt;&#x2F;p&gt;
&lt;p&gt;Writing and maintaining the WebGL boilerplate can be quite a traumatic
experience for the aspiring front-end developer. There are many formulations
of its concepts that have evolved through these 10 years.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;being-declarative-without-losing-the-webgl-domain&quot;&gt;Being declarative without losing the WebGL domain&lt;&#x2F;h2&gt;
&lt;p&gt;The new graphics frameworks bring into the declarative space the primitives
that threejs handle in code. They do it subtly by bridging DOM libraries
(React, Vue, or even bare Web Components) and standard high-level graphics
primitives.&lt;&#x2F;p&gt;
&lt;p&gt;HTML tags are excellent in providing sequence and hierarchy in a declarative
way. Their structure is an easy match for scene graphs.
&lt;a href=&quot;https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;VRML&quot;&gt;VRML&lt;&#x2F;a&gt; was onto something, and now we know
it.&lt;&#x2F;p&gt;
&lt;p&gt;What if this declarative tag-oriented approach could be used in the WebGL
domain primitives instead of the typical camera&#x2F;scene graph representation?&lt;&#x2F;p&gt;
&lt;h2 id=&quot;meet-shader-canvas&quot;&gt;Meet &lt;a href=&quot;&#x2F;projects&#x2F;shader-canvas&quot;&gt;&lt;code&gt;&amp;lt;shader-canvas&amp;gt;&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;In my life quest of making different drawing tools and apps, I find myself
leaning more towards using buffers and GLSL programs than with &amp;quot;cameras&amp;quot; and
nodes.&lt;&#x2F;p&gt;
&lt;p&gt;I am not a graphics programmer by trade and tend to start thinking about
shader code and how data will flow with it before any other graphical
abstraction. This was a strong motivation to create a low-level WebGL
abstraction that could be easily visible and declared with tags.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;rainbowcube.png&quot; alt=&quot;A cube defined by its edges, each edge is a rainbow&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;The idea is simple and two-fold:&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;Create an HTML tag for each WebGL function.&lt;&#x2F;li&gt;
&lt;li&gt;Have HTML tags to contain the instances of WebGL primitives.&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;p&gt;After experimenting for a while with Web Components, I have come up with the
library&#x27;s initial version.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;a class=&quot;project-button&quot; href=&quot;&#x2F;projects&#x2F;shader-canvas&quot;&gt;The shader-canvas project site.&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;It purposely has no graphics or fluffy examples to watch at this stage. It is
a proof-of-concept and the base of my future work.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;closing-thoughts&quot;&gt;Closing thoughts&lt;&#x2F;h2&gt;
&lt;p&gt;Before I started doing &lt;a href=&quot;&#x2F;projects&#x2F;shader-canvas&quot;&gt;shader-canvas&lt;&#x2F;a&gt;, I repeatedly wrote the same WebGL code
with small nuances. I looked for inspiration in other libraries in how to
decompose graphical problems. The part that intrigued me most was the balance
between the WebGL API&#x27;s low-level aspects and its high-level compositions. It
should be possible to target a lower-mid-level of abstraction.&lt;&#x2F;p&gt;
&lt;p&gt;Today is the 10th anniversary of WebGL. It felt appropriate to write about it
and introduce &lt;a href=&quot;&#x2F;projects&#x2F;shader-canvas&quot;&gt;shader-canvas&lt;&#x2F;a&gt; together with some of
the motivation behind it.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;a href=&quot;&#x2F;projects&#x2F;shader-canvas&quot;&gt;Shader-canvas&lt;&#x2F;a&gt; is a graphics framework that uses HTML
tags to perform the WebGL
API calls and manage its primitives. It does not have a camera or a scene.
Instead, there is a set of tags to declare most of the recurrent WebGL code
that I found myself writing over and over.&lt;&#x2F;p&gt;
&lt;hr&gt;&lt;&#x2F;hr&gt;
&lt;p&gt;Shader canvas is the product of Web Components explorations that I have been
writting about. Check out &lt;a href=&quot;&#x2F;posts&#x2F;the-life-of-a-web-component-series&#x2F;&quot;&gt;the whole series&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>The life of a Web Component</title>
        <published>2021-03-02T00:00:00+00:00</published>
        <updated>2021-03-02T00:00:00+00:00</updated>
        <author>
          <name>Unknown</name>
        </author>
        <link rel="alternate" href="https://hugodaniel.com/posts/the-life-of-a-web-component-series/" type="text/html"/>
        <id>https://hugodaniel.com/posts/the-life-of-a-web-component-series/</id>
        
        <content type="html">&lt;h2 id=&quot;1-initialization&quot;&gt;&lt;a href=&quot;&#x2F;posts&#x2F;the-life-of-a-web-component&#x2F;&quot;&gt;1 - Initialization&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;This post is the first in the series. It talks about avoiding the Web
Components constructor, events and life-cycle methods while rolling your
approach.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;2-as-a-variable-bucket&quot;&gt;&lt;a href=&quot;&#x2F;posts&#x2F;the-life-of-a-web-component-as-var&#x2F;&quot;&gt;2 - As a variable bucket&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;In this post I was trying to automatically declare new tags as they get
written in the DOM. Here I introduce container elements, which allow their
child tags to have any name by assuming that they will all be using the same
Web Component class.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;3-reversing-shadow-dom-visibility&quot;&gt;&lt;a href=&quot;&#x2F;posts&#x2F;the-life-of-a-web-component-reverse-shadow-dom&#x2F;&quot;&gt;3 - Reversing Shadow DOM visibility&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;Once a Shadow DOM is used the browser assumes it to be the source of truth and
the holder of the content that is going to be displayed. What if it was the
other way around? In this post the child tags of a Web Component get displayed
by default while the Shadow DOM is used to keep hidden state.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;4-declarative-state&quot;&gt;&lt;a href=&quot;&#x2F;posts&#x2F;the-life-of-a-web-component-state-in-shadow&#x2F;&quot;&gt;4 - Declarative State&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;This post uses the variable buckets from part 2 to declare complex app state.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;5-getting-tested&quot;&gt;&lt;a href=&quot;&#x2F;posts&#x2F;the-life-of-a-web-component-tests&#x2F;&quot;&gt;5 - Getting tested&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;Trying to test Web Components without any bigger knowledge of its related
best-practices. Just thoughts about trying it out and seeing where it goes.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;shader-canvas&quot;&gt;&lt;a href=&quot;&#x2F;projects&#x2F;shader-canvas&#x2F;&quot;&gt;shader-canvas&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;A graphics framework that makes use of the Web Component techniques in this
series.&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>The life of a Web Component - Getting Tested</title>
        <published>2021-01-31T00:00:00+00:00</published>
        <updated>2021-01-31T00:00:00+00:00</updated>
        <author>
          <name>Unknown</name>
        </author>
        <link rel="alternate" href="https://hugodaniel.com/posts/the-life-of-a-web-component-tests/" type="text/html"/>
        <id>https://hugodaniel.com/posts/the-life-of-a-web-component-tests/</id>
        
        <content type="html">&lt;p&gt;In this post, I present what is by far the 2nd best way to test Web Components. I say this because there must be at least one way better than the one I am presenting. Also, I don&#x27;t know of any other way to test them since I have just started playing with Web Components. So yeah, 2nd best, by (infinitely) far.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;where-to-test-a-web-component&quot;&gt;Where to test a Web Component?&lt;&#x2F;h2&gt;
&lt;p&gt;First, a starting note:&lt;&#x2F;p&gt;
&lt;p&gt;The techniques I am going to show are not thought for &lt;abbr title=&quot;Command Line Interface&quot;&gt;CLI&lt;&#x2F;abbr&gt; usage. They are meant for the browser. Where Web Components run and are used.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;em&gt;There is no way that my CircleCI pipes are going to run a browser instance!&lt;&#x2F;em&gt;&lt;&#x2F;p&gt;
&lt;p&gt;This is a problem. Maybe for CI, it could be possible to separate the logic parts from the Web Components into contained JS modules with their own separate unit tests in &lt;abbr title=&quot;Command Line Interface&quot;&gt;CLI&lt;&#x2F;abbr&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;html5_tests.png&quot; alt=&quot;The HTML5 badge next to three vertical checkboxes. The first two checkboxes have a cross.&quot; title=&quot;HTML testing&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;h2 id=&quot;testing-web-components-with-framework&quot;&gt;Testing Web Components with $FRAMEWORK&lt;&#x2F;h2&gt;
&lt;blockquote&gt;
&lt;p&gt;Hello $FRAMEWORK,&lt;br&gt;&lt;&#x2F;p&gt;
&lt;p&gt;I hope you are well. &lt;br&gt;We are currently reinforcing our team in the most diverse areas. Your profile has captured my attention, and I believe it might fit our current projects&#x27; frame. Would you be interested in considering a new professional opportunity that entails intense Shadow DOM manipulation and active HTML modifications in a very dynamic environment?
&lt;br&gt;
&lt;br&gt;
Grateful for your attention,&lt;br&gt;
Hugo&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;Running the tests in the browser is essential when testing Web Components. A Web Component can be a low-level piece of logic tightly bound to a particular DOM configuration. Some parts of the Web Component might be hard to test, particularly the Shadow DOM modifications (it&#x27;s a DOM root designed intentionally to provide encapsulation).&lt;&#x2F;p&gt;
&lt;p&gt;Most things happen asynchronously with Web Components. Either through&#x2F;after a particular event or because it is a composed Web Component that only shows its intended behavior after a series of &lt;code&gt;connectedCallback()&lt;&#x2F;code&gt;&#x27;s,&lt;code&gt;#shadow-root&lt;&#x2F;code&gt; manipulations, or other strange browser behaviours happening. Anything goes. You gotta love browserland.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;eierschalensollbruchstellenverursacher&quot;&gt;Eierschalensollbruchstellenverursacher&lt;&#x2F;h2&gt;
&lt;p&gt;There is another problem when testing Web Components:&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;Your tests might not be running independently from each other&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;p&gt;A workaround is needed just to guarantee one of the basic tenents of (Unit|Integration|Regression|End-To-End|Functional|Performance|Who|Invented|This|Shit)-tests.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;em&gt;But why can&#x27;t I have independent Web Components tests?&lt;&#x2F;em&gt;&lt;&#x2F;p&gt;
&lt;p&gt;The &lt;a href=&quot;https:&#x2F;&#x2F;developer.mozilla.org&#x2F;en-US&#x2F;docs&#x2F;Web&#x2F;API&#x2F;CustomElementRegistry&quot;&gt;CustomElementRegistry&lt;&#x2F;a&gt; (the global var that browsers have where we define our custom tag names) has no &lt;code&gt;delete()&lt;&#x2F;code&gt; method. Once you associate a Web Component to a tag there is no way to remove that association. This means that when the first test in the test suit determines a Web Component tag, it will be available for the other tests in that suit (within the same browser session).&lt;&#x2F;p&gt;
&lt;p&gt;The tests should ideally all be independent of each other, running automatically, in parallel if needed. If the first test fries a global var that further tests will depend on, they will break.&lt;&#x2F;p&gt;
&lt;p&gt;Worse still, if your fellow developer introduces a new test that happens to depend on a given state of that global var, then other tests might break it inadvertently by merely manipulating the global var.&lt;&#x2F;p&gt;
&lt;p&gt;All this means that if a Web Component depends on a declaration flow or on a name tag definition, it might introduce flaky tests when they are run together.&lt;&#x2F;p&gt;
&lt;p&gt;This is not a big deal if Web Components do not depend&#x2F;use other Web Components &lt;em&gt;and&lt;&#x2F;em&gt; they map 1-1 to a given tag.&lt;&#x2F;p&gt;
&lt;p&gt;Unfortunately, this might be a limiting factor for some use cases. It is a limiting factor for the techniques I have been showing in this series.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;global_var.png&quot; alt=&quot;Three emojiis diagonally - world, dynamite, mind blown&quot; title=&quot;One Global Var per day...&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;&lt;em&gt;Looks like they were unable to keep the 10x programmers away from the Web Components spec.&lt;&#x2F;em&gt;&lt;&#x2F;p&gt;
&lt;p&gt;They certainly Got Shit Done. This is indeed a global var object with no way to remove the stuff placed in it.&lt;&#x2F;p&gt;
&lt;p&gt;Fear not. There are a couple of ways to circumvent this and other problems.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;the-gloves-won-t-fit-oj&quot;&gt;The gloves won&#x27;t fit OJ&lt;&#x2F;h2&gt;
&lt;p&gt;The laziest way I found to run Web Components tests in the browser was to have a single &lt;code&gt;test.html&lt;&#x2F;code&gt; file that I open with the browser.&lt;&#x2F;p&gt;
&lt;p&gt;This single &lt;code&gt;test.html&lt;&#x2F;code&gt; file includes the test suits for each Web Component I want to test. The &lt;code&gt;*.test.js&lt;&#x2F;code&gt; files with the tests for each Web Component.&lt;&#x2F;p&gt;
&lt;p&gt;This &lt;code&gt;test.html&lt;&#x2F;code&gt; has no real dependencies. It is just a &lt;code&gt;.html&lt;&#x2F;code&gt; file that I can open directly in the browser without running a development server. Some tools can be used to make it auto-refresh and do parallel runs if necessary. But I just want to run tests for now.&lt;&#x2F;p&gt;
&lt;p&gt;The $FRAMEWORKs I used are Mocha and Chai, two old JS testing tools that provide bundles ready to be used directly in the browser:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;html&quot; style=&quot;background-color:#151515;color:#e8e8d3;&quot; class=&quot;language-html &quot;&gt;&lt;code class=&quot;language-html&quot; data-lang=&quot;html&quot;&gt;&lt;span&gt;&amp;lt;!DOCTYPE html&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;html&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;head&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;  &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;meta charset&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;utf-8&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;  &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;title&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;Web Components Tests&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;title&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&amp;lt;!-- Include the Mocha and Chai code bundles --&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;  &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;link rel&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;stylesheet &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;href&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;https:&#x2F;&#x2F;unpkg.com&#x2F;mocha&#x2F;mocha.css&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;  &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;script src&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;https:&#x2F;&#x2F;unpkg.com&#x2F;chai&#x2F;chai.js&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;script&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;  &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;script src&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;https:&#x2F;&#x2F;unpkg.com&#x2F;mocha&#x2F;mocha.js&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;script&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;head&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;body&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&amp;lt;!-- Test results will show up inside this #mocha &amp;lt;div&amp;gt; --&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;  &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;div id&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;mocha&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;div&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&amp;lt;!-- This is where my Web Components will be placed at during testing --&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;  &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;div id&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;domTestArea &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;style&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;display: none;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&amp;lt;!--                  ^ no need to show them --&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;  &amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;div&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;  
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&amp;lt;!-- Initialize the Mocha framework --&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;  &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;script class&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;mocha-init&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;mocha&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;setup&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;bdd&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; Leak checking is important with Web Components
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; Always include a list of global vars to ignore (empty for now)
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;mocha&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;global&lt;&#x2F;span&gt;&lt;span&gt;([]);
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;mocha&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;checkLeaks&lt;&#x2F;span&gt;&lt;span&gt;();
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; Make &amp;quot;assert&amp;quot; available in all `.test.js` files 
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;const &lt;&#x2F;span&gt;&lt;span&gt;{ &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;assert &lt;&#x2F;span&gt;&lt;span&gt;} = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;mocha&lt;&#x2F;span&gt;&lt;span&gt;.chai;
&lt;&#x2F;span&gt;&lt;span&gt;  &amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;script&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&amp;lt;!--
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;    Some global initialization code:
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;      - create global testing helpers 
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;      - setup the App runtime parts
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;  --&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;  &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;script type&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;module&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; App initiliazation code goes here... I&amp;#39;ll get to it 
&lt;&#x2F;span&gt;&lt;span&gt;  &amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;script&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;  
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&amp;lt;!-- Put the Web Components testing files here --&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;  &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;script src&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;my-partner-is-a-web-component.test.js&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;script&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;  &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;script src&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;i-should-go-out-more-web-component.test.js&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;script&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&amp;lt;!-- Automatically start the Mocha framework --&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;  &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;script class&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;mocha-exec&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;mocha&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;run&lt;&#x2F;span&gt;&lt;span&gt;();&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;script&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;body&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;html&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The code above is a straightforward Mocha and Chai browser-only setup for Web Components.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;html_bugs.png&quot; alt=&quot;The HTML5 badge in the middle of a lot of colored PacMan ghosts.&quot; title=&quot;Who is afraid of the Shadow DOM?&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;h2 id=&quot;tests-initialization&quot;&gt;Tests initialization&lt;&#x2F;h2&gt;
&lt;p&gt;Before any tests can be written, I like to do a standard global initialization of the whole thing. This mostly consists of importing the App module where the Web Components are declared and some global utility functions.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;html&quot; style=&quot;background-color:#151515;color:#e8e8d3;&quot; class=&quot;language-html &quot;&gt;&lt;code class=&quot;language-html&quot; data-lang=&quot;html&quot;&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&amp;lt;!--
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;    Some global initialization code:
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;      - create global testing helpers 
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;      - setup the App runtime parts
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;  --&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;  &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;script type&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;module&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;import &lt;&#x2F;span&gt;&lt;span&gt;{ &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;MyApp &lt;&#x2F;span&gt;&lt;span&gt;} &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;from &lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;..&#x2F;build&#x2F;app-bundle.js&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;;    
&lt;&#x2F;span&gt;&lt;span&gt;  &amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;script&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The above creates the globally available things: The &lt;code&gt;MyApp&lt;&#x2F;code&gt; object of the app that will be using or wrapping the Web Components. This is optional. If the Web Components are just stand-alone, there will be no need for this. This is also a good place to create single tags with &lt;code&gt;customElements.define()&lt;&#x2F;code&gt; (if this is not done by the &lt;code&gt;MyApp&lt;&#x2F;code&gt; bundle).&lt;&#x2F;p&gt;
&lt;p&gt;When using Mocha it is necessary to also include the intended globals in the leaks ignore array:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;html&quot; style=&quot;background-color:#151515;color:#e8e8d3;&quot; class=&quot;language-html &quot;&gt;&lt;code class=&quot;language-html&quot; data-lang=&quot;html&quot;&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&amp;lt;!-- Initialize the Mocha framework --&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;  &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;script class&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;mocha-init&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;mocha&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;setup&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;bdd&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; Leak checking is necessary with Web Components
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; Always include a list of global vars to ignore
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;mocha&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;global&lt;&#x2F;span&gt;&lt;span&gt;([&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;MyApp&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;]);
&lt;&#x2F;span&gt;&lt;span&gt;    &amp;lt;!--          ^^^^^^^  --&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;mocha&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;checkLeaks&lt;&#x2F;span&gt;&lt;span&gt;();
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; Make &amp;quot;assert&amp;quot; available in all `.test.js` files 
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;const &lt;&#x2F;span&gt;&lt;span&gt;{ &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;assert &lt;&#x2F;span&gt;&lt;span&gt;} = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;mocha&lt;&#x2F;span&gt;&lt;span&gt;.chai;
&lt;&#x2F;span&gt;&lt;span&gt;  &amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;script&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;&lt;em&gt;Yeah, but how are the Web Component tests gonna be done?&lt;&#x2F;em&gt;&lt;&#x2F;p&gt;
&lt;h2 id=&quot;suit-up&quot;&gt;Suit up&lt;&#x2F;h2&gt;
&lt;p&gt;I will break the Web Component tests into three parts that build on each other by adding extra complexity.&lt;&#x2F;p&gt;
&lt;p&gt;You decide if a given test needs all of these three features or just the first one.&lt;&#x2F;p&gt;
&lt;p&gt;The following code runs in its own dedicated test file, say an &lt;code&gt;i-should-go-out-more-web-component.test.js&lt;&#x2F;code&gt; with the Web Component tests with that name.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;bug_target.png&quot; alt=&quot;A worm bug emoji in the middle of a target.&quot; title=&quot;Please don&#x27;t kill me!&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;h3 id=&quot;1-place-the-tags-in-domtestarea-and-get-the-class&quot;&gt;1 - Place the tags in #domTestArea and get the class&lt;&#x2F;h3&gt;
&lt;p&gt;The basic test template to run the Web Component tests in the &lt;code&gt;#domTestArea&lt;&#x2F;code&gt; can be something like this:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;javascript&quot; style=&quot;background-color:#151515;color:#e8e8d3;&quot; class=&quot;language-javascript &quot;&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;describe&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;&amp;lt;i-should-go-out-more&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;function &lt;&#x2F;span&gt;&lt;span&gt;() {
&lt;&#x2F;span&gt;&lt;span&gt;  
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; Clear the #domTestArea between each test
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;beforeEach&lt;&#x2F;span&gt;&lt;span&gt;(() &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;=&amp;gt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;domTestArea&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;innerHTML &lt;&#x2F;span&gt;&lt;span&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;it&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;can do simple stuff with DOM tags&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;, (&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;done&lt;&#x2F;span&gt;&lt;span&gt;) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;=&amp;gt; &lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;  
&lt;&#x2F;span&gt;&lt;span&gt;    })
&lt;&#x2F;span&gt;&lt;span&gt;})
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Inside the test, I can use things in however I want (AAA pattern, or just fetuccine&#x2F;spaghetti), but it is essential to at least do these things:&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;Put a Web Component tag in the #domTestArea&lt;&#x2F;li&gt;
&lt;li&gt;Get the Web Component class instance on that tag&lt;&#x2F;li&gt;
&lt;li&gt;Do some assertions&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;pre data-lang=&quot;javascript&quot; style=&quot;background-color:#151515;color:#e8e8d3;&quot; class=&quot;language-javascript &quot;&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;describe&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;&amp;lt;i-should-go-out-more&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;function &lt;&#x2F;span&gt;&lt;span&gt;() {
&lt;&#x2F;span&gt;&lt;span&gt;  
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;const &lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;simpleTag &lt;&#x2F;span&gt;&lt;span&gt;= () &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;=&amp;gt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;`
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;    &amp;lt;i-should-go-out-more&amp;gt;Some content&amp;lt;&#x2F;i-shoud-go-out-more&amp;gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;    `&lt;&#x2F;span&gt;&lt;span&gt;;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; Clear the #domTestArea between each test
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;beforeEach&lt;&#x2F;span&gt;&lt;span&gt;(() &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;=&amp;gt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;domTestArea&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;innerHTML &lt;&#x2F;span&gt;&lt;span&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;it&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;can do simple stuff with DOM tags&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;, (&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;done&lt;&#x2F;span&gt;&lt;span&gt;) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;=&amp;gt; &lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; 1. Put a Web Component tag in the #domTestArea
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;domTestArea&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;innerHTML &lt;&#x2F;span&gt;&lt;span&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;simpleTag&lt;&#x2F;span&gt;&lt;span&gt;();
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; 2. Get the Web Component class instance on that tag
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;const &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;instance &lt;&#x2F;span&gt;&lt;span&gt;= document.querySelector(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;i-should-go-out-more&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span&gt;  
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; 3. Do some assertions
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; (here is where the test happens)
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;assert&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;instance&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;parsedLines &lt;&#x2F;span&gt;&lt;span&gt;&amp;gt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#cf6a4c;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;Should parse content lines\n&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span&gt;        
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; Async by default
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;done&lt;&#x2F;span&gt;&lt;span&gt;();
&lt;&#x2F;span&gt;&lt;span&gt;    })
&lt;&#x2F;span&gt;&lt;span&gt;})
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;A note of attention is needed, if the original &lt;code&gt;MyApp&lt;&#x2F;code&gt; global var does not define a unique the Web Component tag (and its dependencies), and the &lt;code&gt;customElements&lt;&#x2F;code&gt; is part of the test then it might be needed to produce a new dynamic tag per test to work-around the global var problem:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;javascript&quot; style=&quot;background-color:#151515;color:#e8e8d3;&quot; class=&quot;language-javascript &quot;&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;const &lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;simpleTag &lt;&#x2F;span&gt;&lt;span&gt;= (&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;testId&lt;&#x2F;span&gt;&lt;span&gt;) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;=&amp;gt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;`
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;    &amp;lt;i-should-go-out-more-${&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;testId&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;}&amp;gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;        Some content
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;    &amp;lt;&#x2F;i-shoud-go-out-more-${&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;testId&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;}&amp;gt;`&lt;&#x2F;span&gt;&lt;span&gt;;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h3 id=&quot;2-shadow-dom-inspection&quot;&gt;2 - Shadow DOM inspection&lt;&#x2F;h3&gt;
&lt;p&gt;If a Shadow DOM is being used, it will be the root of what the Web Component renders. There might be a need to test its contents to see if the Web Component is doing the expected DOM output.&lt;&#x2F;p&gt;
&lt;p&gt;However, Shadow DOM can be manipulated throughout a Web Component&#x27;s life in many different situations and ways.&lt;&#x2F;p&gt;
&lt;p&gt;One way to abstract the Web Component&#x27;s inner workings from the test is to use a Mutation Observer for the root. The assertions are then placed inside the observer.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;javascript&quot; style=&quot;background-color:#151515;color:#e8e8d3;&quot; class=&quot;language-javascript &quot;&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;describe&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;&amp;lt;i-should-go-out-more&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;function &lt;&#x2F;span&gt;&lt;span&gt;() {
&lt;&#x2F;span&gt;&lt;span&gt;  
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;const &lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;simpleTag &lt;&#x2F;span&gt;&lt;span&gt;= () &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;=&amp;gt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;`
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;    &amp;lt;i-should-go-out-more&amp;gt;Some content&amp;lt;&#x2F;i-shoud-go-out-more&amp;gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;    `&lt;&#x2F;span&gt;&lt;span&gt;;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; Clear the #domTestArea between each test
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;beforeEach&lt;&#x2F;span&gt;&lt;span&gt;(() &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;=&amp;gt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;domTestArea&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;innerHTML &lt;&#x2F;span&gt;&lt;span&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;it&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;can do simple stuff with DOM tags&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;, (&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;done&lt;&#x2F;span&gt;&lt;span&gt;) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;=&amp;gt; &lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; 1. Put a Web Component tag in the #domTestArea
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;domTestArea&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;innerHTML &lt;&#x2F;span&gt;&lt;span&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;simpleTag&lt;&#x2F;span&gt;&lt;span&gt;();
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; 2. Get the Web Component class instance on that tag
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;const &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;instance &lt;&#x2F;span&gt;&lt;span&gt;= document.querySelector(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;i-should-go-out-more&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; 2.1 Get the Shadow Root
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;const &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;root &lt;&#x2F;span&gt;&lt;span&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;instance&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;shadowRoot&lt;&#x2F;span&gt;&lt;span&gt;;
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; 2.2 Create a Mutation Observer for it
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;const &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;observer &lt;&#x2F;span&gt;&lt;span&gt;= new &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;MutationObserver&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;async &lt;&#x2F;span&gt;&lt;span&gt;() &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;=&amp;gt; &lt;&#x2F;span&gt;&lt;span&gt;{  
&lt;&#x2F;span&gt;&lt;span&gt;        
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; 3. Do some assertions when the shadowRoot exists
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; (here is where the test happens)
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;assert&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;instance&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;somethingShadowy&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;Should have this property\n&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; Async because nobody knows when
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; the shadow root observer might trigger 
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;done&lt;&#x2F;span&gt;&lt;span&gt;();
&lt;&#x2F;span&gt;&lt;span&gt;        });
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; Shadow DOM is being changed asynchronously
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; &amp;quot;childList&amp;quot; is enough to observe its changes
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;observer&lt;&#x2F;span&gt;&lt;span&gt;.observe(root, {
&lt;&#x2F;span&gt;&lt;span&gt;            childList: true,
&lt;&#x2F;span&gt;&lt;span&gt;        });
&lt;&#x2F;span&gt;&lt;span&gt;    })
&lt;&#x2F;span&gt;&lt;span&gt;})
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;3-waitfor-meeee&quot;&gt;3 - waitFor meeee&lt;&#x2F;h2&gt;
&lt;p&gt;Testing Web Components is mostly an async task, tests will often need to wait a beat or a few milliseconds for things to be connected and children&#x2F;attributes processed.&lt;&#x2F;p&gt;
&lt;p&gt;If this is the case for the Web Component being tested then it is importante to make sure that there is some kind of &lt;code&gt;waitFor&lt;&#x2F;code&gt; function available (either by the testing framework or place this in the &lt;code&gt;&amp;lt;script&amp;gt;&lt;&#x2F;code&gt; that initializes the &lt;code&gt;MyApp&lt;&#x2F;code&gt; and all utility functions):&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;javascript&quot; style=&quot;background-color:#151515;color:#e8e8d3;&quot; class=&quot;language-javascript &quot;&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; A very rough example of a `waitFor` function that
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; delays execution until a provided condition
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; becomes true (or a timeout is reached)
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;async function &lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;waitFor&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;condition&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;timeout &lt;&#x2F;span&gt;&lt;span&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#cf6a4c;&quot;&gt;200&lt;&#x2F;span&gt;&lt;span&gt;) {
&lt;&#x2F;span&gt;&lt;span&gt;      &lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; I don&amp;#39;t want to comment this. It is just a quick and dirty approach
&lt;&#x2F;span&gt;&lt;span&gt;      &lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; Give preference to your testing framework tools for this
&lt;&#x2F;span&gt;&lt;span&gt;      &lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; I couldn&amp;#39;t find anything similar for Mocha, so yeah:
&lt;&#x2F;span&gt;&lt;span&gt;      &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;const &lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;activePoll &lt;&#x2F;span&gt;&lt;span&gt;= () &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;=&amp;gt; &lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span&gt;new &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;Promise&lt;&#x2F;span&gt;&lt;span&gt;((&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;resolve&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;reject&lt;&#x2F;span&gt;&lt;span&gt;) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;=&amp;gt; &lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;          &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;let &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;timeoutId&lt;&#x2F;span&gt;&lt;span&gt;;
&lt;&#x2F;span&gt;&lt;span&gt;          &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;const &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;intervalId &lt;&#x2F;span&gt;&lt;span&gt;= setInterval(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;function &lt;&#x2F;span&gt;&lt;span&gt;() {
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;condition&lt;&#x2F;span&gt;&lt;span&gt;()) {
&lt;&#x2F;span&gt;&lt;span&gt;              clearTimeout(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;timeoutId&lt;&#x2F;span&gt;&lt;span&gt;)
&lt;&#x2F;span&gt;&lt;span&gt;              clearInterval(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;intervalId&lt;&#x2F;span&gt;&lt;span&gt;)
&lt;&#x2F;span&gt;&lt;span&gt;              &lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;resolve&lt;&#x2F;span&gt;&lt;span&gt;(true);
&lt;&#x2F;span&gt;&lt;span&gt;            }
&lt;&#x2F;span&gt;&lt;span&gt;          }, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#cf6a4c;&quot;&gt;20&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span&gt;          &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;timeoutId &lt;&#x2F;span&gt;&lt;span&gt;= setTimeout(() &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;=&amp;gt; &lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;            clearInterval(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;intervalId&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;reject&lt;&#x2F;span&gt;&lt;span&gt;()
&lt;&#x2F;span&gt;&lt;span&gt;          }, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;timeout&lt;&#x2F;span&gt;&lt;span&gt;)
&lt;&#x2F;span&gt;&lt;span&gt;        })
&lt;&#x2F;span&gt;&lt;span&gt;      }
&lt;&#x2F;span&gt;&lt;span&gt;      &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;try &lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;await &lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;activePoll&lt;&#x2F;span&gt;&lt;span&gt;();
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span&gt;true;
&lt;&#x2F;span&gt;&lt;span&gt;      } &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;catch &lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;e&lt;&#x2F;span&gt;&lt;span&gt;) {
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span&gt;false;
&lt;&#x2F;span&gt;&lt;span&gt;      }
&lt;&#x2F;span&gt;&lt;span&gt;    }
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;globalThis&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;waitFor &lt;&#x2F;span&gt;&lt;span&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;waitFor&lt;&#x2F;span&gt;&lt;span&gt;;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;With this function, I can wait for a given condition to happen before running the test assertions.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;javascript&quot; style=&quot;background-color:#151515;color:#e8e8d3;&quot; class=&quot;language-javascript &quot;&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;describe&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;&amp;lt;i-should-go-out-more&amp;gt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;function &lt;&#x2F;span&gt;&lt;span&gt;() {
&lt;&#x2F;span&gt;&lt;span&gt;  
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;const &lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;simpleTag &lt;&#x2F;span&gt;&lt;span&gt;= () &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;=&amp;gt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;`
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;    &amp;lt;i-should-go-out-more&amp;gt;Some content&amp;lt;&#x2F;i-shoud-go-out-more&amp;gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;    `&lt;&#x2F;span&gt;&lt;span&gt;;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; Clear the #domTestArea between each test
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;beforeEach&lt;&#x2F;span&gt;&lt;span&gt;(() &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;=&amp;gt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;domTestArea&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;innerHTML &lt;&#x2F;span&gt;&lt;span&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;it&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;can do simple stuff with DOM tags&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;, (&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;done&lt;&#x2F;span&gt;&lt;span&gt;) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;=&amp;gt; &lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; 1. Put a Web Component tag in the #domTestArea
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;domTestArea&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;innerHTML &lt;&#x2F;span&gt;&lt;span&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;simpleTag&lt;&#x2F;span&gt;&lt;span&gt;();
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; 2. Get the Web Component class instance on that tag
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;const &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;instance &lt;&#x2F;span&gt;&lt;span&gt;= document.querySelector(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;i-should-go-out-more&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; 2.1 Get the Shadow Root
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;const &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;root &lt;&#x2F;span&gt;&lt;span&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;instance&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;shadowRoot&lt;&#x2F;span&gt;&lt;span&gt;;
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; 2.2 Create a Mutation Observer for it
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;const &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;observer &lt;&#x2F;span&gt;&lt;span&gt;= new &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;MutationObserver&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;async &lt;&#x2F;span&gt;&lt;span&gt;() &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;=&amp;gt; &lt;&#x2F;span&gt;&lt;span&gt;{  
&lt;&#x2F;span&gt;&lt;span&gt;        
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; 2.3 Wait for content
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;const &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;contents &lt;&#x2F;span&gt;&lt;span&gt;= [...&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;instance&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;contentMap&lt;&#x2F;span&gt;&lt;span&gt;.values()];
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;const &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;contentCreated &lt;&#x2F;span&gt;&lt;span&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;await &lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;waitFor&lt;&#x2F;span&gt;&lt;span&gt;(
&lt;&#x2F;span&gt;&lt;span&gt;               () &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;=&amp;gt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;contents&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;filter&lt;&#x2F;span&gt;&lt;span&gt;((&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;c&lt;&#x2F;span&gt;&lt;span&gt;) &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;=&amp;gt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;c &lt;&#x2F;span&gt;&lt;span&gt;!== null).length &amp;gt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#cf6a4c;&quot;&gt;0
&lt;&#x2F;span&gt;&lt;span&gt;            );
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; 3. Do some assertions for the content above
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;assert&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;contentCreated&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;includes&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;cool stuff&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;));
&lt;&#x2F;span&gt;&lt;span&gt;            
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;done&lt;&#x2F;span&gt;&lt;span&gt;();
&lt;&#x2F;span&gt;&lt;span&gt;        });
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;observer&lt;&#x2F;span&gt;&lt;span&gt;.observe(root, {
&lt;&#x2F;span&gt;&lt;span&gt;            childList: true,
&lt;&#x2F;span&gt;&lt;span&gt;        });
&lt;&#x2F;span&gt;&lt;span&gt;    })
&lt;&#x2F;span&gt;&lt;span&gt;})
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;conclusion&quot;&gt;Conclusion&lt;&#x2F;h2&gt;
&lt;p&gt;Testing Web Components is not fun. There is also not that much space to be creative here. Web Components have a lot of particularities that need to be considered. In this post, I presented three techniques to handle Web Component tests and their eventual awkward flow.&lt;&#x2F;p&gt;
&lt;p&gt;Having a commonplace (&lt;code&gt;#domTestArea&lt;&#x2F;code&gt;) to dump Web Components during testing and using some sort of &lt;code&gt;async waitFor()&lt;&#x2F;code&gt; inside a Mutation Observer on the &lt;code&gt;#shadow-root&lt;&#x2F;code&gt; looks like too much hassle. It feels that all of this should not be needed. I found that these three techniques solve most problems I often encountered when testing Web Components. I don&#x27;t like these hacks but &lt;em&gt;they work&lt;&#x2F;em&gt; in general. Generally.&lt;&#x2F;p&gt;
&lt;hr&gt;
&lt;p&gt;This post is Part 5 of a series I am writing called &lt;cite&gt;&amp;quot;The Life of a Web Component&amp;quot;&lt;&#x2F;cite&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;The previous parts are:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;&#x2F;posts&#x2F;the-life-of-a-web-component&#x2F;&quot;&gt;Part 1 - Initialization&lt;&#x2F;a&gt;.&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;&#x2F;posts&#x2F;the-life-of-a-web-component-as-var&#x2F;&quot;&gt;Part 2 - As a variable bucket&lt;&#x2F;a&gt;.&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;&#x2F;posts&#x2F;the-life-of-a-web-component-reverse-shadow-dom&#x2F;&quot;&gt;Part 3 - Reversing Shadow DOM visibility&lt;&#x2F;a&gt;.&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;&#x2F;posts&#x2F;the-life-of-a-web-component-state-in-shadow&#x2F;&quot;&gt;Part 4 - Declarative State&lt;&#x2F;a&gt;.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>The life of a Web Component - Declarative State</title>
        <published>2021-01-30T00:00:00+00:00</published>
        <updated>2021-01-30T00:00:00+00:00</updated>
        <author>
          <name>Unknown</name>
        </author>
        <link rel="alternate" href="https://hugodaniel.com/posts/the-life-of-a-web-component-state-in-shadow/" type="text/html"/>
        <id>https://hugodaniel.com/posts/the-life-of-a-web-component-state-in-shadow/</id>
        
        <content type="html">&lt;p&gt;What if custom tags could be used for the application state?&lt;&#x2F;p&gt;
&lt;p&gt;For instance, consider a simple todo app that gets rendered like this:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;HTML&quot; style=&quot;background-color:#151515;color:#e8e8d3;&quot; class=&quot;language-HTML &quot;&gt;&lt;code class=&quot;language-HTML&quot; data-lang=&quot;HTML&quot;&gt;&lt;span&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;html&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;body&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;todo-app&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;ol&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;li&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;Sleep better, don&amp;#39;t be tired.&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;li&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;li&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;Replace a tire&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;li&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;li&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;Write a tiresome article&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;li&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;li&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;?????&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;li&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;li&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;Profit&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;li&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;li&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;Nah, forget profit, just write something&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;li&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;ol&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;todo-app&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;body&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;html&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Just a simple list of todos, declared and visible both in the browser and in code, a typical day in HTML.&lt;&#x2F;p&gt;
&lt;p&gt;Then each of those &lt;code&gt;&amp;lt;li&amp;gt;&lt;&#x2F;code&gt; items in the todo app could have some state associated. Here is a configuration that might fit it:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Creation date&lt;&#x2F;li&gt;
&lt;li&gt;Tags&#x2F;Category&lt;&#x2F;li&gt;
&lt;li&gt;Cost&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;This is on top of what HTML already elegantly declares:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Item content (&amp;quot;Replace a tire&amp;quot; etc.)&lt;&#x2F;li&gt;
&lt;li&gt;Item order (what is the sequence of items)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;It would be cool if they could be referenced by some id as well. In HTML, this &amp;quot;id&amp;quot; is just their node element. It is unique from the moment it exists in the DOM (but there is also the &amp;quot;id&amp;quot; attribute only in case a human readable id is needed). &lt;&#x2F;p&gt;
&lt;p&gt;One possible state representation for the Todo Item could be done in JS using a normal object:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;javascript&quot; style=&quot;background-color:#151515;color:#e8e8d3;&quot; class=&quot;language-javascript &quot;&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;function &lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;createItemState&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;creationDate&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;categories&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;cost&lt;&#x2F;span&gt;&lt;span&gt;) {
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;return &lt;&#x2F;span&gt;&lt;span&gt;(
&lt;&#x2F;span&gt;&lt;span&gt;    { &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;creationDate
&lt;&#x2F;span&gt;&lt;span&gt;    , &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;categories
&lt;&#x2F;span&gt;&lt;span&gt;    , &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;cost
&lt;&#x2F;span&gt;&lt;span&gt;    });
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Which would then be used at the bigger app state structure:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;javascript&quot; style=&quot;background-color:#151515;color:#e8e8d3;&quot; class=&quot;language-javascript &quot;&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;const &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;todoAppState &lt;&#x2F;span&gt;&lt;span&gt;= {
&lt;&#x2F;span&gt;&lt;span&gt;    todoItems: new &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;Map&lt;&#x2F;span&gt;&lt;span&gt;([
&lt;&#x2F;span&gt;&lt;span&gt;        [ &lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;Sleep better, don&amp;#39;t be tired&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;        , &lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;createItemState&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;Date&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;now&lt;&#x2F;span&gt;&lt;span&gt;(), [&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;lifestyle&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;], &lt;&#x2F;span&gt;&lt;span style=&quot;color:#cf6a4c;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span&gt;)
&lt;&#x2F;span&gt;&lt;span&gt;        ],
&lt;&#x2F;span&gt;&lt;span&gt;        [ &lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;Replace a tire&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;        , &lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;createItemState&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;Date&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;now&lt;&#x2F;span&gt;&lt;span&gt;(), [&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;chores&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;], &lt;&#x2F;span&gt;&lt;span style=&quot;color:#cf6a4c;&quot;&gt;9001&lt;&#x2F;span&gt;&lt;span&gt;)
&lt;&#x2F;span&gt;&lt;span&gt;        ]
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; ...
&lt;&#x2F;span&gt;&lt;span&gt;    ])
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; some other app state here...
&lt;&#x2F;span&gt;&lt;span&gt;};
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;There are infinite other ways to map this state in JS. This is just to lay out the mapping to HTML.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;js_logo_with_html.jpg&quot; alt=&quot;The yellow JavaScript logo, with HTML5 badges masking the letters J and S&quot; title=&quot;On the internet nobody knows you&#x27;re an HTML!&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Bringing the above examples from JavaScript into HTML can be done by using a custom element for each state &amp;quot;unit&amp;quot;. Something like this:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;html&quot; style=&quot;background-color:#151515;color:#e8e8d3;&quot; class=&quot;language-html &quot;&gt;&lt;code class=&quot;language-html&quot; data-lang=&quot;html&quot;&gt;&lt;span&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;todo-app-state&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;todo-items&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;        &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;item-state&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;            &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;creation-date&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;2021-01-31&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;creation-date&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;            &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;category-list&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;[&amp;quot;lifestyle&amp;quot;]&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;category-list&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;            &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;cost-of-doing&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;0&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;cost-of-doing&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;        &amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;item-state&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;        &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;item-state&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;            &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;creation-date&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;2020-10-10&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;creation-date&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;            &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;category-list&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;[&amp;quot;chores&amp;quot;]&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;category-list&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;            &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;cost-of-doing&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;9001&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;cost-of-doing&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;        &amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;item-state&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&amp;lt;!-- ... other items here ... --&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;todo-items&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;todo-app-state&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;It has the potential to become involved. A common strategy to break state complexity down is to think of it as the flow of actions that transform it, instead of thinking of it as the content it holds.&lt;&#x2F;p&gt;
&lt;p&gt;In that view, the above only becomes:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;html&quot; style=&quot;background-color:#151515;color:#e8e8d3;&quot; class=&quot;language-html &quot;&gt;&lt;code class=&quot;language-html&quot; data-lang=&quot;html&quot;&gt;&lt;span&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;todo-app-state&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;todo-items&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&amp;lt;!-- contents will be generated by the actions --&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;        &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;item-state&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;            &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;creation-date&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt; Don&amp;#39;t care &amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;creation-date&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;            &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;category-list&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt; Whatever &amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;category-list&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;            &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;cost-of-doing&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt; Meh &amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;cost-of-doing&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;        &amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;item-state&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&amp;lt;!-- ^ no need to think more than one ^ --&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;todo-items&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;todo-app-state&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Since HTML provides sequence, a list of state modifying actions can then be defined with it:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;HTML&quot; style=&quot;background-color:#151515;color:#e8e8d3;&quot; class=&quot;language-HTML &quot;&gt;&lt;code class=&quot;language-HTML&quot; data-lang=&quot;HTML&quot;&gt;&lt;span&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;todo-app-state&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;actions-list&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;       &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;create-item&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;Sleep better, don&amp;#39;t be tired.&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;create-item&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;       &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;create-item&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;Get out of bed.&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;create-item&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;       &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;delete-item&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;Get out of bed.&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;delete-item&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;actions-list&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;todo-items&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&amp;lt;!-- ^ This will be populated through the actions above ^ --&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;todo-items&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;todo-app-state&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The &lt;code&gt;&amp;lt;todo-items&amp;gt;&lt;&#x2F;code&gt; inner state is populated by running through the sequence of items on the &lt;code&gt;&amp;lt;actions-list&amp;gt;&lt;&#x2F;code&gt; element. This is just bringing into declarative HTML a popular state handling mechanism - a sequence of state transformations.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;em&gt;That is ugly looks like XML, I don&#x27;t want that in my code&lt;&#x2F;em&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Indeed, that is why reversing the Shadow DOM visibility is handy. It makes for the perfect trash bin to dump this state. Letting the app be just plain pure HTML.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;html&quot; style=&quot;background-color:#151515;color:#e8e8d3;&quot; class=&quot;language-html &quot;&gt;&lt;code class=&quot;language-html&quot; data-lang=&quot;html&quot;&gt;&lt;span&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;html&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;body&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;todo-app&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;  #shadow-root
&lt;&#x2F;span&gt;&lt;span&gt;      &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;actions-list&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;          &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;create-item category&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;lifestyle&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;              Sleep better, don&amp;#39;t be tired.
&lt;&#x2F;span&gt;&lt;span&gt;          &amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;create-item&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;          &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;create-item&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;Get out of bed.&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;create-item&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;          &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;delete-item&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;Get out of bed.&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;delete-item&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;          &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;create-item category&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;chores&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;cost&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;9001&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;              Replace a tire.
&lt;&#x2F;span&gt;&lt;span&gt;          &amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;create-item&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;      &amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;actions-list&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;      &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;todo-items&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;          &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;item-state&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;            &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;creation-date&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;2021-01-31&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;creation-date&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;            &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;category-list&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;[&amp;quot;lifestyle&amp;quot;]&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;category-list&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;            &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;cost-of-doing&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;0&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;cost-of-doing&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;          &amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;item-state&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;          &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;item-state&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;            &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;creation-date&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;2021-01-31&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;creation-date&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;            &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;category-list&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;[&amp;quot;chores&amp;quot;]&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;category-list&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;            &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;cost-of-doing&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;9001&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;cost-of-doing&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;          &amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;item-state&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt; 
&lt;&#x2F;span&gt;&lt;span&gt;      &amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;todo-items&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;      &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;style&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;          &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;:not&lt;&#x2F;span&gt;&lt;span&gt;(slot) {
&lt;&#x2F;span&gt;&lt;span&gt;             display: none;
&lt;&#x2F;span&gt;&lt;span&gt;          }
&lt;&#x2F;span&gt;&lt;span&gt;      &amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;style&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;      &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;slot&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;⮑&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;slot&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;ol&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;li&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;Replace a tire.&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;li&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;li&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;Sleep better, don&amp;#39;t be tired.&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;li&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;ol&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;todo-app&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;body&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;html&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;html5_code_monkeys.png&quot; alt=&quot;The HTML5 badge broken in two, in the middle an imagem of two monkeys grooming hair.&quot; title=&quot;HTML code monkeys&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;In a way, a tag with the Shadow DOM visibility reversed and state will emit no real HTML. Only the HTML provided by its children gets linked to being shown at the &lt;code&gt;&amp;lt;slot&amp;gt;&lt;&#x2F;code&gt;, nothing else is visually added, things are kept under the Shadow DOM, waiting to be revealed in a late-night debugging session.&lt;&#x2F;p&gt;
&lt;p&gt;If I need to know the app&#x27;s current state, I open the developer tools, expand its &lt;code&gt;#shadow-root&lt;&#x2F;code&gt;, and there it is, in full glory with the actions that created it.&lt;&#x2F;p&gt;
&lt;p&gt;The partitioning and separation that I present here is just one possible example among the infinite possibilities in declarative state presentation.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;big-conclusion-that-is-more-like-a-rant-than-a-conclusion&quot;&gt;Big conclusion that is more like a rant than a conclusion&lt;&#x2F;h2&gt;
&lt;p&gt;Thinking about the state is paramount when building a complex app. It is an effort particularly hard for me because I do not like to think that much and prefer to just chill. Functional programming intellectuals have long been shouting that state management is actually a somewhat solved problem.&lt;&#x2F;p&gt;
&lt;p&gt;They argue that it is much better to have no state and just bounce a couple of vars around, transforming them with a sequence of actions. I think that is what they mean with their jargon.&lt;&#x2F;p&gt;
&lt;p&gt;The Lisps yoga gurus shove their variables with a bunch of parentheses, define&#x27;s and recursive logic. Haskell Scientologists are a bit more refined and seem to prefer &amp;quot;Monads&amp;quot; with &amp;quot;syntactic sugar&amp;quot; or whatever.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;eat_haskell.png&quot; alt=&quot;An image of a UFO in the sky beaming lambdas. Bellow the image the letters &amp;quot;Eat Haskell Motherfuckers&amp;quot;.&quot; title=&quot;Healthy alien diet&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;When considering state management techniques, we front-end devs are clearly the peasants. The low-life form resigned to pick up the elite&#x27;s crumbs and glue them together with spit in a global variable with a name that looks like it is something serious and functional, say &amp;quot;redux&amp;quot;.&lt;&#x2F;p&gt;
&lt;p&gt;The story doesn&#x27;t end there because even within the front-end mambo, there are differences. In particular, the vanilla crowd is the underrepresented minority. Why use plain HTML and CSS when you can throw a ton of JS and do all of it with the latest cool frameworks? In fact, forget JS, lets use &lt;s&gt;Haxe&lt;&#x2F;s&gt;, &lt;s&gt;CoffeScript&lt;&#x2F;s&gt;, &lt;s&gt;Flow&lt;&#x2F;s&gt;, &lt;s&gt;Babel&lt;&#x2F;s&gt;, TypeScript.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;nobody-ever-made-it-to-fortune-500-with-that-tech&quot;&gt;Nobody ever made it to Fortune 500 with that tech.&lt;&#x2F;h3&gt;
&lt;p&gt;HTML deserves a bit more attention. It has to be possible to define a complex app state with something that gives us a declarative hierarchy with an exact sequence that binds semantics with functionality.&lt;&#x2F;p&gt;
&lt;p&gt;When breaking complicated things into manageable parts, I typically think about the following questions:&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;What kind of &amp;quot;buckets&amp;quot; can the information be split into?&lt;&#x2F;li&gt;
&lt;li&gt;How are the items in those buckets going to be referenced in the app?&lt;&#x2F;li&gt;
&lt;li&gt;Will those &amp;quot;buckets&amp;quot; work for 0, 1, and n items? (sometimes n&lt;em&gt;n&lt;&#x2F;em&gt;n*...*n?)&lt;&#x2F;li&gt;
&lt;li&gt;How is information going to flow into them and out of them?&lt;&#x2F;li&gt;
&lt;li&gt;Why are all the hipsters, brogrammers, and rockstars moving from JS into Swift?&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;p&gt;Can HTML custom tags provide an acceptable abstraction to those questions? I don&#x27;t know. I don&#x27;t even want to have to think about a complex app. Complexity is just simplicity waiting to be born.&lt;&#x2F;p&gt;
&lt;p&gt;However, Web Components can provide a way to declare a state that can easily be removed after. Which is more than good enough for me :)&lt;&#x2F;p&gt;
&lt;hr&gt;
&lt;p&gt;This post is Part 4 of a series I am writing called &lt;cite&gt;&amp;quot;The Life of a Web Component&amp;quot;&lt;&#x2F;cite&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;The previous parts are:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;&#x2F;posts&#x2F;the-life-of-a-web-component&#x2F;&quot;&gt;Part 1 - Initialization&lt;&#x2F;a&gt;.&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;&#x2F;posts&#x2F;the-life-of-a-web-component-as-var&#x2F;&quot;&gt;Part 2 - As a variable bucket&lt;&#x2F;a&gt;.&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;&#x2F;posts&#x2F;the-life-of-a-web-component-reverse-shadow-dom&#x2F;&quot;&gt;Part 3 - Reversing Shadow DOM visibility&lt;&#x2F;a&gt;.&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;&#x2F;posts&#x2F;the-life-of-a-web-component-tests&#x2F;&quot;&gt;Part 5 - Get Tested&lt;&#x2F;a&gt;.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>The life of a Web Component - Reversing the Shadow DOM visibility</title>
        <published>2021-01-29T00:00:00+00:00</published>
        <updated>2021-01-29T00:00:00+00:00</updated>
        <author>
          <name>Unknown</name>
        </author>
        <link rel="alternate" href="https://hugodaniel.com/posts/the-life-of-a-web-component-reverse-shadow-dom/" type="text/html"/>
        <id>https://hugodaniel.com/posts/the-life-of-a-web-component-reverse-shadow-dom/</id>
        
        <content type="html">&lt;p&gt;The other day I was thinking about what do HTML tags give us out of the box and made this list:&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;Hierarchy&lt;&#x2F;strong&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;pre data-lang=&quot;html&quot; style=&quot;background-color:#151515;color:#e8e8d3;&quot; class=&quot;language-html &quot;&gt;&lt;code class=&quot;language-html&quot; data-lang=&quot;html&quot;&gt;&lt;span&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;luke-im-your-father&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;	&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;nooo-thats-impossible&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;nooo-thats-impossible&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;luke-im-your-father&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;ol start=&quot;2&quot;&gt;
&lt;li&gt;&lt;strong&gt;Sequence&lt;&#x2F;strong&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;pre data-lang=&quot;html&quot; style=&quot;background-color:#151515;color:#e8e8d3;&quot; class=&quot;language-html &quot;&gt;&lt;code class=&quot;language-html&quot; data-lang=&quot;html&quot;&gt;&lt;span&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;p&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;I’d use one for parts&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;p&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;p&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;If I ever have twins&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;p&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;	
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;ol start=&quot;3&quot;&gt;
&lt;li&gt;&lt;strong&gt;Meaning&lt;&#x2F;strong&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;pre data-lang=&quot;html&quot; style=&quot;background-color:#151515;color:#e8e8d3;&quot; class=&quot;language-html &quot;&gt;&lt;code class=&quot;language-html&quot; data-lang=&quot;html&quot;&gt;&lt;span&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;q cite&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Meaning_(philosophy)&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;A relationship between two sorts of things:
&lt;&#x2F;span&gt;&lt;span&gt;signs and the kinds of things they intend, express or signify
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;q&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;ol start=&quot;4&quot;&gt;
&lt;li&gt;&lt;strong&gt;Functionality&lt;&#x2F;strong&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;pre data-lang=&quot;html&quot; style=&quot;background-color:#151515;color:#e8e8d3;&quot; class=&quot;language-html &quot;&gt;&lt;code class=&quot;language-html&quot; data-lang=&quot;html&quot;&gt;&lt;span&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;video controls width&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;250&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;source src&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;&#x2F;media&#x2F;cc0-videos&#x2F;flower.webm&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;type&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;video&#x2F;webm&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;source src&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;&#x2F;media&#x2F;cc0-videos&#x2F;flower.mp4&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;type&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;video&#x2F;mp4&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    Sorry, your browser doesn&amp;#39;t support embedded videos.
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;video&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This list is by no means exhaustive. There are likely many more things that HTML tags give us (like headaches, reactjs, and some money at the end of the month if we are lucky).&lt;&#x2F;p&gt;
&lt;p&gt;With the Shadow DOM it is possible to compose all of the features above and hide them away inside custom tags.&lt;&#x2F;p&gt;
&lt;p&gt;I want to use Shadow DOM like a rug that I can sweep tags under it. A particular DOM root that cannot be seen and that is under the control of a tag.&lt;&#x2F;p&gt;
&lt;ol start=&quot;5&quot;&gt;
&lt;li&gt;&lt;strong&gt;Encapsulation&lt;&#x2F;strong&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;pre data-lang=&quot;html&quot; style=&quot;background-color:#151515;color:#e8e8d3;&quot; class=&quot;language-html &quot;&gt;&lt;code class=&quot;language-html&quot; data-lang=&quot;html&quot;&gt;&lt;span&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;nevermind-the-backend-this-is-where-the-dragons-are&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&amp;lt;!-- there is nothing to see here because this tag has a Shadow root --&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;nevermind-the-backend-this-is-where-the-dragons-are&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This DOM root inception made me wonder: &lt;em&gt;&amp;quot;What is the default visibility behavior of the Shadow DOM? could it be reversed?&amp;quot;&lt;&#x2F;em&gt;&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;html5_mask.png&quot; alt=&quot;The HTML5 badge with an amazing purple eye mask&quot; title=&quot;Shadow DOM is such a cool name, but wait until you see its fabulous mask!&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;h2 id=&quot;hmm-that-sounds-stupid-but-how-would-it-work&quot;&gt;Hmm, that sounds stupid, but how would it work?&lt;&#x2F;h2&gt;
&lt;p&gt;When a Web Component has no shadow root, it will happily render all its children:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;html&quot; style=&quot;background-color:#151515;color:#e8e8d3;&quot; class=&quot;language-html &quot;&gt;&lt;code class=&quot;language-html&quot; data-lang=&quot;html&quot;&gt;&lt;span&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;html&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;body&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;simple-web-component&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;p&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;Hello world! I am not inside the shadow root.&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;p&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;simple-web-component&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;script&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;customElements&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;define&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;simple-web-component&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;,
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; What follows is the the &amp;lt;simple-web-component&amp;gt; code:
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;class extends &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;HTMLElement &lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;initialize&lt;&#x2F;span&gt;&lt;span&gt;() {
&lt;&#x2F;span&gt;&lt;span&gt;      &lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; Nothing for now... just a simple component
&lt;&#x2F;span&gt;&lt;span&gt;    }
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; Call initialize when added to a parent node
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;connectedCallback&lt;&#x2F;span&gt;&lt;span&gt;() { &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;this&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;initialize&lt;&#x2F;span&gt;&lt;span&gt;(); }
&lt;&#x2F;span&gt;&lt;span&gt;});
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;script&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;body&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;html&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The code above creates the functionality for the &lt;code&gt;&amp;lt;simple-web-component&amp;gt;&lt;&#x2F;code&gt; tag. Which gets rendered as expected:&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;no-shadow-dom.png&quot; alt=&quot;A portion of a browser window, showing the following text in black letters &amp;quot;Hello world! I am not inside the shadow root&amp;quot;, in a white background.&quot; title=&quot;In direct sunlight&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;However, this is not how it behaves when a shadow root is added to it.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;adding-a-bare-shadow-root&quot;&gt;Adding a bare shadow root&lt;&#x2F;h3&gt;
&lt;p&gt;The code inside the &lt;code&gt;&amp;lt;script&amp;gt;&lt;&#x2F;code&gt; tag needs to be slightly adjusted to add a shadow root.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;javascript&quot; style=&quot;background-color:#151515;color:#e8e8d3;&quot; class=&quot;language-javascript &quot;&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;customElements&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;define&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;simple-web-component&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;,
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; The &amp;lt;simple-web-component&amp;gt; code:
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;class extends &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;HTMLElement &lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;    
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;root &lt;&#x2F;span&gt;&lt;span&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;this&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;attachShadow&lt;&#x2F;span&gt;&lt;span&gt;({mode: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;open&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;span&gt;})
&lt;&#x2F;span&gt;&lt;span&gt;    
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;initialize&lt;&#x2F;span&gt;&lt;span&gt;() {
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;const &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;p &lt;&#x2F;span&gt;&lt;span&gt;= document.createElement(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;p&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;p&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;textContent &lt;&#x2F;span&gt;&lt;span&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;In the shadow!&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;;
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;this&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;root&lt;&#x2F;span&gt;&lt;span&gt;.append(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;p&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span&gt;    }
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; Call initialize when added to a parent node
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;connectedCallback&lt;&#x2F;span&gt;&lt;span&gt;() { &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;this&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;initialize&lt;&#x2F;span&gt;&lt;span&gt;(); }
&lt;&#x2F;span&gt;&lt;span&gt;});
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The &lt;code&gt;&amp;lt;simple-web-component&amp;gt;&lt;&#x2F;code&gt; class now has a &lt;code&gt;root&lt;&#x2F;code&gt; attribute &lt;a href=&quot;https:&#x2F;&#x2F;developer.mozilla.org&#x2F;en-US&#x2F;docs&#x2F;Web&#x2F;API&#x2F;Element&#x2F;attachShadow&quot;&gt;set with its shadow root&lt;&#x2F;a&gt;. Then a simple &lt;code&gt;&amp;lt;p&amp;gt;In the shadow!&amp;lt;&#x2F;p&amp;gt;&lt;&#x2F;code&gt; is placed inside it by the &lt;code&gt;initialize()&lt;&#x2F;code&gt; function.&lt;&#x2F;p&gt;
&lt;p&gt;This simple shadow root will affect the display of the component.&lt;&#x2F;p&gt;
&lt;p&gt;The previous &lt;code&gt;&amp;lt;p&amp;gt;Hello world! I am not inside the shadow root.&amp;lt;&#x2F;p&amp;gt;&lt;&#x2F;code&gt; will no longer be shown since it is outside the shadow root, and now only the shadow root contents are being displayed.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;with-shadow-dom.png&quot; alt=&quot;A portion of a browser window, showing the following text in black letters &amp;quot;In the shadow!&amp;quot; in a white background.&quot; title=&quot;Shaded&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;However, the inspector tools shows how the tag is really juggling the shadow dom:&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;shadow-dom-inspector.png&quot; alt=&quot;The hierarchy of tags as seen by the inspector tools. Under the &amp;quot;simple-web-component&amp;quot; tag, there is a &amp;quot;#shadow-root&amp;quot; tag with a single &amp;quot;p&amp;quot; tag with the text &amp;quot;In the shadow!&amp;quot;. Also, under the &amp;quot;simple-web-component&amp;quot; another &amp;quot;p&amp;quot; tag can be seen with the content &amp;quot;Hello world! I am not inside the shadow root.&amp;quot;&quot; title=&quot;This shadow is not for everyone&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Looking at the above hierarchy it is worth noting that the original &lt;code&gt;&amp;lt;p&amp;gt;Hello World!..&amp;lt;&#x2F;p&amp;gt;&lt;&#x2F;code&gt; is still there, but &lt;em&gt;why is it not visible?&lt;&#x2F;em&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Once a shadow root is added to a tag, it becomes the thing that will get rendered. Shadow DOM is the authority, everything else is discarded, and only the stuff inside the shadow root gets displayed.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;em&gt;Why?&lt;&#x2F;em&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Because the idea was that whatever children a custom tag would have could get rendered with ninja tricks inside the shadow. Thus giving the impression that the custom tag was getting its input from its visible children and then performing hidden layout and style foojitsu on that input (such tricks would occur inside the shadow dom - hidden from the written HTML).&lt;&#x2F;p&gt;
&lt;p&gt;Nobody cares. In fact, let me revert this logic.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;you-wouldn-t-download-a-car&quot;&gt;You wouldn&#x27;t download a car&lt;&#x2F;h2&gt;
&lt;p&gt;The first step to revert the Shadow DOM is to copy all the custom components&#x27; children into its shadow root.&lt;&#x2F;p&gt;
&lt;p&gt;This will allow HTML to be rendered as expected while maintaining the Shadow DOM&#x27;s encapsulation features.&lt;&#x2F;p&gt;
&lt;p&gt;Luckily the Web Components spec provides just the feature for this, through the &lt;code&gt;&amp;lt;slot&amp;gt;&lt;&#x2F;code&gt; tag.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;i-m-such-a-slot&quot;&gt;I&#x27;m such a &lt;code&gt;&amp;lt;slot&amp;gt;&lt;&#x2F;code&gt;&lt;&#x2F;h3&gt;
&lt;p&gt;This tag is used mainly in HTML &lt;code&gt;&amp;lt;template&amp;gt;&lt;&#x2F;code&gt;&#x27;s. It is the way that &lt;code&gt;&amp;lt;template&amp;gt;&lt;&#x2F;code&gt;&#x27;s have to tell which parts can be set by outsiders. Typically &lt;code&gt;&amp;lt;slot&amp;gt;&lt;&#x2F;code&gt;&#x27;s have a name attribute to be used as the reference to where the content will go. (You can see an &lt;a href=&quot;https:&#x2F;&#x2F;developer.mozilla.org&#x2F;en-US&#x2F;docs&#x2F;Web&#x2F;HTML&#x2F;Element&#x2F;slot#attributes&quot;&gt;example of it here&lt;&#x2F;a&gt;, but it is not necessary, I won&#x27;t be using it.)&lt;&#x2F;p&gt;
&lt;p&gt;The cool thing is that if there is no &lt;code&gt;name&lt;&#x2F;code&gt; specified on the &lt;code&gt;&amp;lt;slot&amp;gt;&lt;&#x2F;code&gt;, then it becomes the default &lt;code&gt;&amp;lt;slot&amp;gt;&lt;&#x2F;code&gt; where all unspecified content will go in.&lt;&#x2F;p&gt;
&lt;p&gt;This is perfect. It means that if a &lt;code&gt;&amp;lt;slot&amp;gt;&lt;&#x2F;code&gt; is placed inside the shadow root (without a &lt;code&gt;name=&amp;quot;...&amp;quot;&lt;&#x2F;code&gt; attribute), then all of the custom element children will automatically be copied into it.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;html&quot; style=&quot;background-color:#151515;color:#e8e8d3;&quot; class=&quot;language-html &quot;&gt;&lt;code class=&quot;language-html&quot; data-lang=&quot;html&quot;&gt;&lt;span&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;html&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;body&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;simple-web-component&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;p&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;Hello world! I am not inside the shadow root.&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;p&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;simple-web-component&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;script&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;customElements&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;define&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;simple-web-component&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;,
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; The &amp;lt;simple-web-component&amp;gt; code:
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;class extends &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;HTMLElement &lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;    
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;root &lt;&#x2F;span&gt;&lt;span&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;this&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;attachShadow&lt;&#x2F;span&gt;&lt;span&gt;({mode: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;open&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;span&gt;})
&lt;&#x2F;span&gt;&lt;span&gt;    
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;initialize&lt;&#x2F;span&gt;&lt;span&gt;() {
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;const &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;p &lt;&#x2F;span&gt;&lt;span&gt;= document.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;createElement&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;p&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;p&lt;&#x2F;span&gt;&lt;span&gt;.textContent = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;In the shadow!&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;this&lt;&#x2F;span&gt;&lt;span&gt;.root.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;append&lt;&#x2F;span&gt;&lt;span&gt;(
&lt;&#x2F;span&gt;&lt;span&gt;          &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;p&lt;&#x2F;span&gt;&lt;span&gt;,
&lt;&#x2F;span&gt;&lt;span&gt;          document.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;createElement&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;slot&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;)
&lt;&#x2F;span&gt;&lt;span&gt;        );
&lt;&#x2F;span&gt;&lt;span&gt;    }
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; Call initialize when added to a parent node
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;connectedCallback&lt;&#x2F;span&gt;&lt;span&gt;() { &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;this&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;initialize&lt;&#x2F;span&gt;&lt;span&gt;(); }
&lt;&#x2F;span&gt;&lt;span&gt;});
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;script&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;body&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;html&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The Shadow Root above will contain a single &lt;code&gt;&amp;lt;slot&amp;gt;&lt;&#x2F;code&gt; tag. This makes the &lt;code&gt;&amp;lt;p&amp;gt;Hello world! I am not inside the shadow root.&amp;lt;&#x2F;p&amp;gt;&lt;&#x2F;code&gt; show up when the tag is rendered.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;with-slot.png&quot; alt=&quot;A portion of a browser window, showing two lines of text. The first one has the phrase &amp;quot;In the shadow!&amp;quot; and the second line has the phrase &amp;quot;Hello world! I am not inside the shadow root.&amp;quot;. Both of them have black letters on a white background.&quot; title=&quot;Both visible&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;h2 id=&quot;don-t-ask-don-t-tell&quot;&gt;Don&#x27;t ask, don&#x27;t tell&lt;&#x2F;h2&gt;
&lt;p&gt;The second step to revert the Shadow DOM display is to only show the children of the element.&lt;&#x2F;p&gt;
&lt;p&gt;Hide everything that is outside the &lt;code&gt;&amp;lt;slot&amp;gt;&lt;&#x2F;code&gt;. Only the tag&#x27;s original children must be visible, while all the other shadow root contents must be hidden.&lt;&#x2F;p&gt;
&lt;p&gt;To achieve it, the following CSS is added to the Shadow DOM:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;css&quot; style=&quot;background-color:#151515;color:#e8e8d3;&quot; class=&quot;language-css &quot;&gt;&lt;code class=&quot;language-css&quot; data-lang=&quot;css&quot;&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;:not&lt;&#x2F;span&gt;&lt;span&gt;(slot) {
&lt;&#x2F;span&gt;&lt;span&gt;    display: none;
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The common practice is to create a &lt;code&gt;&amp;lt;style&amp;gt;&lt;&#x2F;code&gt; tag, place the above content inside it and then append the &lt;code&gt;&amp;lt;style&amp;gt;&lt;&#x2F;code&gt; tag to the Shadow DOM:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;javascript&quot; style=&quot;background-color:#151515;color:#e8e8d3;&quot; class=&quot;language-javascript &quot;&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;initialize&lt;&#x2F;span&gt;&lt;span&gt;() {
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;const &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;p &lt;&#x2F;span&gt;&lt;span&gt;= document.createElement(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;p&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;p&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;textContent &lt;&#x2F;span&gt;&lt;span&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;In the shadow!&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;const &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;style &lt;&#x2F;span&gt;&lt;span&gt;= document.createElement(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;style&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;style&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;textContent &lt;&#x2F;span&gt;&lt;span&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;`
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;        :not(slot) {
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;          display: none;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;        }`&lt;&#x2F;span&gt;&lt;span&gt;;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;this&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;root&lt;&#x2F;span&gt;&lt;span&gt;.append(
&lt;&#x2F;span&gt;&lt;span&gt;          &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;style&lt;&#x2F;span&gt;&lt;span&gt;,
&lt;&#x2F;span&gt;&lt;span&gt;          &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;p&lt;&#x2F;span&gt;&lt;span&gt;,
&lt;&#x2F;span&gt;&lt;span&gt;          document.createElement(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;slot&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;)
&lt;&#x2F;span&gt;&lt;span&gt;        );
&lt;&#x2F;span&gt;&lt;span&gt;    }
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;And just like that, the actual behavior of the Shadow DOM is reversed. The Shadow DOM contents are hidden by default, while the original custom tag children get rendered by default.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;reversed-shadow-dom.png&quot; alt=&quot;A portion of a browser window, showing one line of text with the phrase &amp;quot;Hello world! I am not inside the shadow root.&amp;quot;. This text line has black letters on a white background.&quot; title=&quot;Only the child paragraph is visible&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;No &amp;quot;In the shadow!&amp;quot; text is visible.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;conclusion&quot;&gt;Conclusion&lt;&#x2F;h2&gt;
&lt;p&gt;It is possible to sweep all kinds of useless trash under the Shadow DOM.&lt;&#x2F;p&gt;
&lt;p&gt;However, it might require reversing the Shadow DOM&#x27;s visibility (which is rendered by default).&lt;&#x2F;p&gt;
&lt;p&gt;To achieve it, a full copy of the custom element original children is made into the Shadow DOM (through the default &lt;code&gt;&amp;lt;slot&amp;gt;&lt;&#x2F;code&gt; tag). The next step is to hide everything inside the Shadow DOM that does not belong to the original children.&lt;&#x2F;p&gt;
&lt;p&gt;With these two moves, the element&#x27;s original children become visible while leaving all the other shadow DOM contents invisible.&lt;&#x2F;p&gt;
&lt;hr&gt;
&lt;p&gt;This post is Part 3 of a series I am writing called &lt;cite&gt;&amp;quot;The Life of a Web Component&amp;quot;&lt;&#x2F;cite&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;The previous parts are:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;&#x2F;posts&#x2F;the-life-of-a-web-component&#x2F;&quot;&gt;Part 1 - Initialization&lt;&#x2F;a&gt;.&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;&#x2F;posts&#x2F;the-life-of-a-web-component-as-var&#x2F;&quot;&gt;Part 2 - As a variable bucket&lt;&#x2F;a&gt;.&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;&#x2F;posts&#x2F;the-life-of-a-web-component-state-in-shadow&#x2F;&quot;&gt;Part 4 - Declarative State&lt;&#x2F;a&gt;.&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;&#x2F;posts&#x2F;the-life-of-a-web-component-tests&#x2F;&quot;&gt;Part 5 - Get Tested&lt;&#x2F;a&gt;.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>The life of a Web Component - as a variable bucket</title>
        <published>2021-01-28T00:00:00+00:00</published>
        <updated>2021-01-28T00:00:00+00:00</updated>
        <author>
          <name>Unknown</name>
        </author>
        <link rel="alternate" href="https://hugodaniel.com/posts/the-life-of-a-web-component-as-var/" type="text/html"/>
        <id>https://hugodaniel.com/posts/the-life-of-a-web-component-as-var/</id>
        
        <content type="html">&lt;p&gt;JavaScript(JS) allows object classes to be anonymous. No need to name them and bind your class to an identifier. Instead of &lt;code&gt;class MyClass { ... }&lt;&#x2F;code&gt; write &lt;code&gt;class { ... },&lt;&#x2F;code&gt; and it will be created without a name. &lt;&#x2F;p&gt;
&lt;p&gt;Likewise prefix a regular &lt;abbr title=&quot;JavaScript&quot;&gt;JS&lt;&#x2F;abbr&gt; object &lt;code&gt;{ ... }&lt;&#x2F;code&gt; with &lt;code&gt;class&lt;&#x2F;code&gt; and have an anonymous class defined.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;HTML5_badge_tag.png&quot; alt=&quot;Three HTML5 badges in a row inside angle brackets like an html tag name. The first one has the normal orientation. The second one is upside down. The third one has a random orientation.&quot; title=&quot;Let those tags roll!&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Nothing special here, classes are in fact normal &lt;abbr title=&quot;JavaScript&quot;&gt;JS&lt;&#x2F;abbr&gt; objects. The big extra is that anonymous classes, just like normal classes, can use the &lt;abbr title=&quot;JavaScript&quot;&gt;JS&lt;&#x2F;abbr&gt; &lt;code&gt;extends&lt;&#x2F;code&gt; syntax to easily carry other objects and acumulate them.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;javascript&quot; style=&quot;background-color:#151515;color:#e8e8d3;&quot; class=&quot;language-javascript &quot;&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;class &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;SomeContext &lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;name &lt;&#x2F;span&gt;&lt;span&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;What do Web Components have to do with this?&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;let &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;withExtraContext &lt;&#x2F;span&gt;&lt;span&gt;= new (&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;class extends &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;SomeContext &lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;displayName&lt;&#x2F;span&gt;&lt;span&gt;() {
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;alert&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;this&lt;&#x2F;span&gt;&lt;span&gt;.name);
&lt;&#x2F;span&gt;&lt;span&gt;    }
&lt;&#x2F;span&gt;&lt;span&gt;})
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;withExtraContext&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;displayName&lt;&#x2F;span&gt;&lt;span&gt;()
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;It is possible to pick our favorite class and create other unique classes from it that are, in fact, just declaration copies that add nothing at all. Unique copies of class declarations. Here is an example:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;javascript&quot; style=&quot;background-color:#151515;color:#e8e8d3;&quot; class=&quot;language-javascript &quot;&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;class &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;VeryComplicatedClass &lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;foo &lt;&#x2F;span&gt;&lt;span&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;bar&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;let &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;MyUniqueCopy &lt;&#x2F;span&gt;&lt;span&gt;= (&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;class extends &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;VeryComplicatedClass &lt;&#x2F;span&gt;&lt;span&gt;{})
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;console&lt;&#x2F;span&gt;&lt;span&gt;.log(
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;MyUniqueCopy &lt;&#x2F;span&gt;&lt;span&gt;instanceof &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;VeryComplicatedClass
&lt;&#x2F;span&gt;&lt;span&gt;); &lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; prints false
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;let &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;anOriginalInstance &lt;&#x2F;span&gt;&lt;span&gt;= new &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;VeryComplicatedClass&lt;&#x2F;span&gt;&lt;span&gt;(); 
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;let &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;myUniqueCopyInstance &lt;&#x2F;span&gt;&lt;span&gt;= new &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;MyUniqueCopy&lt;&#x2F;span&gt;&lt;span&gt;();
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;console&lt;&#x2F;span&gt;&lt;span&gt;.log(
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;anOriginalInstance &lt;&#x2F;span&gt;&lt;span&gt;instanceof &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;VeryComplicatedlass&lt;&#x2F;span&gt;&lt;span&gt;,
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;myUniqueCopyInstance &lt;&#x2F;span&gt;&lt;span&gt;instanceof &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;MyUniqueCopy
&lt;&#x2F;span&gt;&lt;span&gt;); &lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; prints true, true
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;But what do Web Components have to do with all of this?&lt;&#x2F;p&gt;
&lt;h2 id=&quot;it-is-awesome&quot;&gt;It is awesome&lt;&#x2F;h2&gt;
&lt;p&gt;The global &lt;code&gt;customElements&lt;&#x2F;code&gt; registry (the global var that browsers have, where new tag names get defined) only allows one class to be associated with a single tag. Once a class has a corresponding tag-name set to it, it is no longer possible to set another-tag-name (nor delete it, but that&#x27;s for another post, hehehe).&lt;&#x2F;p&gt;
&lt;p&gt;It makes sense. Why associate two tag names to the same class anyway? I don&#x27;t know, but I still want to be able to do that nevertheless :)&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;javascript&quot; style=&quot;background-color:#151515;color:#e8e8d3;&quot; class=&quot;language-javascript &quot;&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;class &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;Awesomeness &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;extends &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;HTMLElement &lt;&#x2F;span&gt;&lt;span&gt;{}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;customElements&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;define&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;awesome-tag&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;Awesomeness&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; ^ all good, ready to use &amp;lt;awesome-tag&amp;gt; all over the HTML code.
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;customElements&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;define&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;i-want-to-be-awesome-too&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;Awesomeness&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; ^ No, you don&amp;#39;t. This will throw an error.
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;customElementsError.png&quot; alt=&quot;The error text: &amp;quot;Uncaught DOMException: CustomElementRegistry.define: &#x27;i-want-to-be-awesome-too&#x27; and &#x27;awesome-tag&#x27; have the same constructor&amp;quot;&quot; title=&quot;Nope&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Anonymous classes provide a simple way to avoid this limitation. By extending the Web Component class and using the unique copy of its declaration as a different tag-name. Like so:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;javascript&quot; style=&quot;background-color:#151515;color:#e8e8d3;&quot; class=&quot;language-javascript &quot;&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;class &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;Awesomeness &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;extends &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;HTMLElement &lt;&#x2F;span&gt;&lt;span&gt;{}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;customElements&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;define&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;awesome-tag&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;Awesomeness&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; ^ all good, like before
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;customElements&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;define&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;i-can-be-awesome-too&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;class extends &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;Awesomeness &lt;&#x2F;span&gt;&lt;span&gt;{});
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; ^ yay \o&#x2F;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;customElements&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;define&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;me-too&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;class extends &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;Awesomeness &lt;&#x2F;span&gt;&lt;span&gt;{});
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; ^ party!
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;customElements&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;define&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;lets-all-be-awesome&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;class extends &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;Awesomeness &lt;&#x2F;span&gt;&lt;span&gt;{});
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; ^ ok, you get the idea
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The code above uses multiple tag names for the same class. :)&lt;&#x2F;p&gt;
&lt;p&gt;It also allows the tags &lt;code&gt;&amp;lt;awesome-tag&amp;gt;&lt;&#x2F;code&gt;, &lt;code&gt;&amp;lt;i-can-be-awesome-too&amp;gt;&lt;&#x2F;code&gt;, &lt;code&gt;&amp;lt;me-too&amp;gt;&lt;&#x2F;code&gt; and &lt;code&gt;&amp;lt;lets-all-be-awesome&amp;gt;&lt;&#x2F;code&gt; to be used in &lt;abbr title=&quot;HyperText Markup Language&quot;&gt;HTML&lt;&#x2F;abbr&gt; and all of them will share the same functionality (because they all have &lt;code&gt;Awesomeness&lt;&#x2F;code&gt;).&lt;&#x2F;p&gt;
&lt;p&gt;&lt;em&gt;But since they all have the same functionality, why couldn&#x27;t I use a single tag name?&lt;&#x2F;em&gt;&lt;&#x2F;p&gt;
&lt;p&gt;That is an excellent question. Having multiple tag names for the same class is the first step I found in dynamic HTML tags that can have any name and be defined only after.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;my-head-is-too-big-for-hats-and-too-small-to-understand&quot;&gt;My head is too big for hats and too small to understand&lt;&#x2F;h2&gt;
&lt;p&gt;This section is the part where I am going to create dynamic tag names with anonymous classes.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;html5_hat.png&quot; alt=&quot;The HTML5 badge with a handrawn hat on the top of it.&quot; title=&quot;My mother said it was cool&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Since I can&#x27;t explain this well, let me try to do it with an example: a style container.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;style-container&quot;&gt;Style container&lt;&#x2F;h3&gt;
&lt;p&gt;Nowadays, there is a big wave of these CSS-In-JS-In-HTML-In-React-In-Vue-In-IOS-In-CSS-In-... approaches. People get upset with each other because of those styled-components vs. styled-system vs. styled-tailwind-my-head-is-bigger-than-yours arguments.&lt;&#x2F;p&gt;
&lt;p&gt;I don&#x27;t like any of them, plain &lt;abbr title=&quot;Cascading Style Sheets&quot;&gt;CSS&lt;&#x2F;abbr&gt; is still king in my small street, but that doesn&#x27;t mean that I can&#x27;t try to add yet another styling approach to the mix. After all, this is such a pleasant hill to die at.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;stylecontainer&quot;&gt;StyleContainer&lt;&#x2F;h3&gt;
&lt;p&gt;This new &lt;abbr title=&quot;Cascading Style Sheets&quot;&gt;CSS&lt;&#x2F;abbr&gt; framework is going to be made by just two classes. A container class and a class for the children.&lt;&#x2F;p&gt;
&lt;p&gt;The purpose of the children&#x27;s class will be to hold a bunch of CSS inline style parts. It starts by reading its &lt;code&gt;textContent&lt;&#x2F;code&gt; and place it as a style part of itself.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;javascript&quot; style=&quot;background-color:#151515;color:#e8e8d3;&quot; class=&quot;language-javascript &quot;&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;class &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;StyleChild &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;extends &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;HTMLElement &lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;parts &lt;&#x2F;span&gt;&lt;span&gt;= []
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;initialize&lt;&#x2F;span&gt;&lt;span&gt;() {
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;this&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;parts &lt;&#x2F;span&gt;&lt;span&gt;= [&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;this&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;textContent&lt;&#x2F;span&gt;&lt;span&gt;]
&lt;&#x2F;span&gt;&lt;span&gt;    }
&lt;&#x2F;span&gt;&lt;span&gt;	
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; Initialize when added to a parent node
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;connectedCallback&lt;&#x2F;span&gt;&lt;span&gt;() { &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;this&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;initialize&lt;&#x2F;span&gt;&lt;span&gt;() }
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;For the &lt;code&gt;StyleContainer&lt;&#x2F;code&gt;, I want it to read whatever children tag names it might have and create a new Web Component for each of those new tags.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;javascript&quot; style=&quot;background-color:#151515;color:#e8e8d3;&quot; class=&quot;language-javascript &quot;&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;class &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;StyleContainer &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;extends &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;HTMLElement &lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;initialize&lt;&#x2F;span&gt;&lt;span&gt;() {
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;for &lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;const &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;child &lt;&#x2F;span&gt;&lt;span&gt;of &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;this&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;children&lt;&#x2F;span&gt;&lt;span&gt;) {
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;const &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;childName &lt;&#x2F;span&gt;&lt;span&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;child&lt;&#x2F;span&gt;&lt;span&gt;.tagName.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;toLocaleLowerCase&lt;&#x2F;span&gt;&lt;span&gt;();
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; Make the child become a new Web Component
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; if it was not yet made one. 
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span&gt;(!&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;customElements&lt;&#x2F;span&gt;&lt;span&gt;.get(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;childName&lt;&#x2F;span&gt;&lt;span&gt;)) {
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;                &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;customElements&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;define&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;childName&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;class extends &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;StyleChild &lt;&#x2F;span&gt;&lt;span&gt;{});
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;            }
&lt;&#x2F;span&gt;&lt;span&gt;        }
&lt;&#x2F;span&gt;&lt;span&gt;    }
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; Initialize when added to a parent node
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;connectedCallback&lt;&#x2F;span&gt;&lt;span&gt;() { &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;this&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;initialize&lt;&#x2F;span&gt;&lt;span&gt;() }
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;&lt;em&gt;What does this do?&lt;&#x2F;em&gt;&lt;&#x2F;p&gt;
&lt;p&gt;It reads the children&#x27;s tag names (whatever they are) and turns them into a Web Component (provided they are &lt;a href=&quot;https:&#x2F;&#x2F;html.spec.whatwg.org&#x2F;multipage&#x2F;custom-elements.html#valid-custom-element-name&quot;&gt;valid Web Component tag names&lt;&#x2F;a&gt;).&lt;&#x2F;p&gt;
&lt;p&gt;&lt;em&gt;Does it even work?&lt;&#x2F;em&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Yes! &lt;cite&gt;Because element definition can occur at any time, a non-custom element could be created, and then later become a custom element after an appropriate definition is registered. We call this process &amp;quot;upgrading&amp;quot; the element, from a normal element into a custom element.&lt;&#x2F;cite&gt; (says the spec)&lt;&#x2F;p&gt;
&lt;p&gt;&lt;em&gt;But I mean, what? Why? WTF?&lt;&#x2F;em&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Yeah, I don&#x27;t know, but it gets better.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;style-container-1&quot;&gt;&lt;code&gt;&amp;lt;style-container&amp;gt;&lt;&#x2F;code&gt;&lt;&#x2F;h3&gt;
&lt;p&gt;The above code allows HTML to be written with some sort of &lt;abbr title=&quot;HyperText Markup Language&quot;&gt;HTML&lt;&#x2F;abbr&gt; variable buckets.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;html&quot; style=&quot;background-color:#151515;color:#e8e8d3;&quot; class=&quot;language-html &quot;&gt;&lt;code class=&quot;language-html&quot; data-lang=&quot;html&quot;&gt;&lt;span&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;body&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;	&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;button&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;Spank me&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;button&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;	&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;style-container&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;		&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;super-border&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;			border: 5px dashed mediumseagreen;
&lt;&#x2F;span&gt;&lt;span&gt;			box-shadow: 0 0 0 3px;
&lt;&#x2F;span&gt;&lt;span&gt;		&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;super-border&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;		&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;fancy-background&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;			background: #563f0e;
&lt;&#x2F;span&gt;&lt;span&gt;		&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;fancy-background&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;		&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;a-cool-font&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;			font-family: Marcellus, serif;
&lt;&#x2F;span&gt;&lt;span&gt;			font-size: 3em;
&lt;&#x2F;span&gt;&lt;span&gt;			text-shadow: 0 2px #fff;
&lt;&#x2F;span&gt;&lt;span&gt;		&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;a-cool-font&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;	&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;style-container&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;body&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;When the &lt;code&gt;StyleContainer&lt;&#x2F;code&gt; gets &lt;code&gt;define&lt;&#x2F;code&gt;d at the &lt;code&gt;customElements&lt;&#x2F;code&gt; registry (with the &lt;code&gt;&amp;quot;style-container&amp;quot;&lt;&#x2F;code&gt; tag name), the above code run its logic. It looks for the children and creates the tags &lt;code&gt;&amp;lt;super-border&amp;gt;&lt;&#x2F;code&gt;, &lt;code&gt;&amp;lt;fancy-background&amp;gt;&lt;&#x2F;code&gt; and &lt;code&gt;&amp;lt;a-cool-font&amp;gt;&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;These tag names can have the semantic value of a variable. &lt;abbr title=&quot;HyperText Markup Language&quot;&gt;HTML&lt;&#x2F;abbr&gt; variables. Or any other semantic value or purpose that might be fit. Anonymous classes create dynamic tag names, where you place whatever name you want in the HTML. After that, it is up to the intended implementation&#x2F;framework&#x2F;idea to give them meaning and flow.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;references-said-the-referee&quot;&gt;&amp;quot;References&amp;quot; said the referee&lt;&#x2F;h3&gt;
&lt;p&gt;The HTML code can then reference these dynamic tags.&lt;&#x2F;p&gt;
&lt;p&gt;They can be used to compose more complex styles. With a composer Web Component, lets say... the &lt;code&gt;&amp;lt;import-style&amp;gt;&lt;&#x2F;code&gt; Web Component (not yet defined):&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;html&quot; style=&quot;background-color:#151515;color:#e8e8d3;&quot; class=&quot;language-html &quot;&gt;&lt;code class=&quot;language-html&quot; data-lang=&quot;html&quot;&gt;&lt;span&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;body&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;	&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;button&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;Spank me&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;button&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;	&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;style-container&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;		&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;magic-button&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;			&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;import-style src&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;super-border&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;import-style&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;			&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;import-style src&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;fancy-background&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;import-style&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;			padding: 2rem;
&lt;&#x2F;span&gt;&lt;span&gt;			text-transform: uppercase;
&lt;&#x2F;span&gt;&lt;span&gt;			pointer: cursor;
&lt;&#x2F;span&gt;&lt;span&gt;		&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;magic-button&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;		&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;super-border&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;			border: 5px dashed mediumseagreen;
&lt;&#x2F;span&gt;&lt;span&gt;			box-shadow: 0 0 0 3px;
&lt;&#x2F;span&gt;&lt;span&gt;		&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;super-border&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;		&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;fancy-background&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;			background: #563f0e;
&lt;&#x2F;span&gt;&lt;span&gt;		&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;fancy-background&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;		&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;a-cool-font&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;			font-family: Marcellus, serif;
&lt;&#x2F;span&gt;&lt;span&gt;			font-size: 3em;
&lt;&#x2F;span&gt;&lt;span&gt;			text-shadow: 0 2px #fff;
&lt;&#x2F;span&gt;&lt;span&gt;		&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;a-cool-font&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;	&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;style-container&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;body&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Or use the dynamic tags as plain references outside of the &lt;code&gt;&amp;lt;style-container&amp;gt;&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;html&quot; style=&quot;background-color:#151515;color:#e8e8d3;&quot; class=&quot;language-html &quot;&gt;&lt;code class=&quot;language-html&quot; data-lang=&quot;html&quot;&gt;&lt;span&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;body&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;	&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;button styled-by&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;magic-button&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;Spank me&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;button&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;...
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;ol&gt;
&lt;li&gt;Where the &lt;code&gt;StyleContainer&lt;&#x2F;code&gt; would do something like: &lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;pre data-lang=&quot;javascript&quot; style=&quot;background-color:#151515;color:#e8e8d3;&quot; class=&quot;language-javascript &quot;&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span&gt;document.querySelectorAll(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;[styled-by~=&amp;#39;magic-button&amp;#39;]&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;)
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;And apply the contents of the &lt;code&gt;magic-button&lt;&#x2F;code&gt; tag to the inline &lt;code&gt;style&lt;&#x2F;code&gt; attribute to the nodes found.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;em&gt;How does this differ from plain HTML?&lt;&#x2F;em&gt;&lt;&#x2F;p&gt;
&lt;p&gt;It is another way to write it. Maybe it is better than placing &amp;quot;id&amp;quot;&#x27;s in common tags, perhaps it goes against the pure HTML semantic values, or perhaps it is just a shitty idea. I have no strong opinion. It is just an idea.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;em&gt;Couldn&#x27;t I just use CSS?&lt;&#x2F;em&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Yes.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;em&gt;Why all of this, then?&lt;&#x2F;em&gt;&lt;&#x2F;p&gt;
&lt;p&gt;I don&#x27;t know the answer to this. I like the approach of giving logic a declarative front. HTML is good at that. It is declarative and also dynamic through Web Components. How much logic should go into it, or what kind of logic is something that might be cool to find out. I do think &lt;abbr title=&quot;Cascading Style Sheets&quot;&gt;CSS&lt;&#x2F;abbr&gt; styles definitely should not :D (we already have the &lt;code&gt;class&lt;&#x2F;code&gt; attribute and CSS vars).&lt;&#x2F;p&gt;
&lt;h2 id=&quot;conclusion&quot;&gt;Conclusion&lt;&#x2F;h2&gt;
&lt;p&gt;I presented a small example of using Web Components to create dynamic tag names. I think that having the possibility to declare a new tag name under a given parent and automatically create it can have some cool opportunities. I don&#x27;t know the extent of what can be possible or what this might entail, but still, it is something that we can do with Web Components and maybe use to break logic into easily identifiable small parts.&lt;&#x2F;p&gt;
&lt;hr&gt;
&lt;p&gt;This post is Part 2 of a series I am writting called &lt;cite&gt;&amp;quot;The Life of a Web Component&amp;quot;&lt;&#x2F;cite&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;The other parts are:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;&#x2F;posts&#x2F;the-life-of-a-web-component&#x2F;&quot;&gt;Part 1 - Initialization&lt;&#x2F;a&gt;.&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;&#x2F;posts&#x2F;the-life-of-a-web-component-reverse-shadow-dom&#x2F;&quot;&gt;Part 3 - Reversing the Shadow DOM&lt;&#x2F;a&gt;.&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;&#x2F;posts&#x2F;the-life-of-a-web-component-state-in-shadow&#x2F;&quot;&gt;Part 4 - Declarative State&lt;&#x2F;a&gt;.&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;&#x2F;posts&#x2F;the-life-of-a-web-component-tests&#x2F;&quot;&gt;Part 5 - Get Tested&lt;&#x2F;a&gt;.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Thank you!</title>
        <published>2021-01-27T00:00:00+00:00</published>
        <updated>2021-01-27T00:00:00+00:00</updated>
        <author>
          <name>Unknown</name>
        </author>
        <link rel="alternate" href="https://hugodaniel.com/thank-you/" type="text/html"/>
        <id>https://hugodaniel.com/thank-you/</id>
        
        <content type="html">&lt;p&gt;:)&lt;&#x2F;p&gt;
&lt;p&gt;&lt;a href=&quot;&#x2F;&quot;&gt;Go Home&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>The life of a Web Component - Initialization</title>
        <published>2021-01-26T00:00:00+00:00</published>
        <updated>2021-01-26T00:00:00+00:00</updated>
        <author>
          <name>Unknown</name>
        </author>
        <link rel="alternate" href="https://hugodaniel.com/posts/the-life-of-a-web-component/" type="text/html"/>
        <id>https://hugodaniel.com/posts/the-life-of-a-web-component/</id>
        
        <content type="html">&lt;p&gt;I&#x27;ve been playing around with Web Components lately. They are quite an exciting thing with a vast range of use cases and possibilities. Web Components provide a very flexible API to explore non-standard approaches and Frankenstein contraptions. I know I will :)&lt;&#x2F;p&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;developer.mozilla.org&#x2F;en-US&#x2F;docs&#x2F;Web&#x2F;Web_Components&quot;&gt;MDN has an excellent intro to Web Components&lt;&#x2F;a&gt;. It explains the three main parts of Web Components in some detail (custom tags, shadow root, and template slots). I recommend you start with MDN if you are looking to take your first steps into this tech.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;html5_components.png&quot; alt=&quot;Three HTML5 badges in a row. The first one has the normal orientation. The second one is upside down. The third one has a random orientation.&quot; title=&quot;They said it would be easy&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Here is a quick explanation if, like me, you are coming from a text-book framework (react, vue, svelte, etc…) and have not done anything too serious with them:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Web Components are JavaScript classes, and they work through Object-Oriented Programming by extending the known HTML tags (or more commonly the HTMLElement)&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;You can define new HTML tags with Web Components by associating your component object class with a tag name. This happens by using the global &lt;code&gt;customElements.define(“blink-tag-never-dies”, class MakeItBlink extends HTMLElement {})&lt;&#x2F;code&gt; (creates the &lt;code&gt;&amp;lt;blink-tag-never-dies&amp;gt;&lt;&#x2F;code&gt;)&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;You can spray the HTML code with tags before they are defined. The browser is smart and can delay their display or progressively enhance them (if they extend a known element, like a button or something).&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;Web Components have their DOM root (called the &amp;quot;shadow dom&amp;quot;) that provides encapsulation for style and hierarchy.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;Web Components can have multiple templates and multiple parts inside each template using the &lt;code&gt;&amp;lt;slot&amp;gt;&lt;&#x2F;code&gt; tag.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;A class can only have a single tag associated with it.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;Their life-cycle methods are nuanced and happen at different stages than the common text-book frameworks typically present us with their components.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;just-being-alive&quot;&gt;Just being alive&lt;&#x2F;h2&gt;
&lt;p&gt;Here is a small subset of the life-cycle of a Web Component:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Component creation in memory.&lt;&#x2F;p&gt;
&lt;p&gt;The Web Component&#x27;s life starts here, where the &lt;code&gt;constructor()&lt;&#x2F;code&gt; of the class gets called. It happens once per instance&#x2F;tag occurrence and gets called instantly when a &lt;code&gt;document.createElement(&amp;quot;&amp;quot;)&lt;&#x2F;code&gt; is done for the custom tag defined for it.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;An existing DOM element receives the component as a child.&lt;&#x2F;p&gt;
&lt;p&gt;Runs the Web Component &lt;code&gt;connectedCallback()&lt;&#x2F;code&gt; class method, which can occur multiple times during a Web Component life. Special attention is needed here because the &lt;code&gt;connectedCallback()&lt;&#x2F;code&gt; is triggered whenever &lt;code&gt;appendChild(myComponentInstance)&lt;&#x2F;code&gt; is called (even if it does not move the web component from its existing parent).&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;If the Web Component uses &lt;code&gt;&amp;lt;slot&amp;gt;&lt;&#x2F;code&gt; elements, they fire a &lt;code&gt;slotchange&lt;&#x2F;code&gt; event when they receive children or their hierarchy changes (which happens at least once after the &lt;code&gt;connectedCallback()&lt;&#x2F;code&gt;)&lt;&#x2F;p&gt;
&lt;p&gt;However, only hierarchy changes inside the slot trigger this event. Something more advanced is needed if you need a notification for changes on the textContent of a child.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;After playing for a while with Web Components, here are some personal considerations about their initialization methods.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;a-super-constructor-does-nothing-at-all&quot;&gt;A super constructor does nothing at all.&lt;&#x2F;h2&gt;
&lt;p&gt;The Web Components spec is clear about &lt;a href=&quot;https:&#x2F;&#x2F;html.spec.whatwg.org&#x2F;multipage&#x2F;custom-elements.html#custom-element-conformance&quot;&gt;what a &lt;code&gt;constructor()&lt;&#x2F;code&gt; can do&lt;&#x2F;a&gt;. The limitations are many and entirely optional. It is a guideline when they say, &lt;cite&gt;&amp;quot;The element must not gain any attributes or children, as this violates the expectations of consumers who use the createElement or createElementNS methods.&amp;quot;.&lt;&#x2F;cite&gt; It is entirely up to us to abide or not.&lt;&#x2F;p&gt;
&lt;p&gt;Since I&#x27;m not too fond of code and rules, I tend to skip adding a constructor in most of my Web Components. I ask myself: &amp;quot;do I need an event listener? Can it be delegated elsewhere? Do I need shadow root encapsulation? What am I going to cook for dinner? If food were Web Components would it need to be constructed?&amp;quot;.&lt;&#x2F;p&gt;
&lt;p&gt;Anyway, delegating logic to the caller&#x2F;parent is the long-honored approach of the lazy dev. Moving some logic to the component or code above usually makes things easier to remove while keeping it more uncomplicated down the hierarchy.&lt;&#x2F;p&gt;
&lt;p&gt;In this regard, the basic Web Component creation template would be something like:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;javascript&quot; style=&quot;background-color:#151515;color:#e8e8d3;&quot; class=&quot;language-javascript &quot;&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;class &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;ImAWebComponent &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;extends &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;HTMLElement &lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; no constructor()
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;That&#x27;s it, no constructor. No need to keep up with the Web Components spec rules and the browser will use the &lt;code&gt;HTMLElement&lt;&#x2F;code&gt; standard constructor.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;all-these-notifications-keep-distracting-me&quot;&gt;All these notifications keep distracting me.&lt;&#x2F;h2&gt;
&lt;p&gt;Like the constructor approach above, it is better to keep the Web Component disconnected. That means that it is preferable to avoid using the &lt;code&gt;connectedCallback()&lt;&#x2F;code&gt; method when possible.&lt;&#x2F;p&gt;
&lt;p&gt;Why? Because this particular method can be called multiple times throughout the life of a Web Component. Should it be responsible for the initialization of the Web Component? What happens if the components move around after being already initialized? Can the component code handle being &amp;quot;initialized&amp;quot; multiple times on top of each other? Why is this Web Component alive? (why are we all?) Will it have fun during its life-time? Will this Web Component spend its life under its parent&#x27;s home?&lt;&#x2F;p&gt;
&lt;p&gt;For most autonomous Web Components I find it better to design them with no DOM attachment flow in mind. That means that the simple Web Component template remains the same:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;javascript&quot; style=&quot;background-color:#151515;color:#e8e8d3;&quot; class=&quot;language-javascript &quot;&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;class &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;ImAWebComponent &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;extends &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;HTMLElement &lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; no constructor()
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; no connectedCallback()
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Then use a life flow that I am more comfortable with, say something like:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;javascript&quot; style=&quot;background-color:#151515;color:#e8e8d3;&quot; class=&quot;language-javascript &quot;&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;class &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;ImAWebComponent &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;extends &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;HTMLElement &lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; no constructor()
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; no connectedCallback()
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;initialize&lt;&#x2F;span&gt;&lt;span&gt;() {
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; some initialization logic here
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;update&lt;&#x2F;span&gt;&lt;span&gt;() {
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; refresh stuff and keep things revised
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;...
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The idea here is to use whatever suits you better as the life-cycle-flow of your components. Web Components have a somewhat low-level API that molds quickly to the kinkiest desires. You can make them work closer to how you like to decompose problems or instead go wild and be creative. &lt;&#x2F;p&gt;
&lt;p&gt;You can avoid classes altogether and use a pure-functional approach that ultimately nails down to the Web Component class like some IO trash-can. Or keep using Object-Oriented Programming and spawn a vast forest of hierarchical extensions. Or use another language, why stick to JavaScript if Web Components are just HTML that can be executed by your favorite language WebView in a declarative way? All good, everything is possible here.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;javascript&quot; style=&quot;background-color:#151515;color:#e8e8d3;&quot; class=&quot;language-javascript &quot;&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;addEventListener&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;load&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;,
&lt;&#x2F;span&gt;&lt;span&gt;  () &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;=&amp;gt; &lt;&#x2F;span&gt;&lt;span&gt;document.querySelectorAll(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;my-tag&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;)
&lt;&#x2F;span&gt;&lt;span&gt;                .forEach(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;tag &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;=&amp;gt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;tag&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;initialize&lt;&#x2F;span&gt;&lt;span&gt;()))
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Calling the &lt;code&gt;initialize()&lt;&#x2F;code&gt; or &lt;code&gt;update()&lt;&#x2F;code&gt; functions can then happen at any moment, controllable by the app. In a &lt;code&gt;render()&lt;&#x2F;code&gt; function? Once at the &amp;quot;load&amp;quot; event? How to use it will largely depend on what kind of component this is and its context.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;web-components-can-use-other-web-components&quot;&gt;Web Components can use other Web Components.&lt;&#x2F;h2&gt;
&lt;p&gt;As expected, a Web Component can use another Web Component. However, the browser is not always smart enough to delay its creation until the &lt;code&gt;customElements&lt;&#x2F;code&gt; global registry defines the tag for the Web Component that it depends.&lt;&#x2F;p&gt;
&lt;p&gt;A common approach is to use the &lt;code&gt;customElements.whenDefined(&amp;quot;my-tag&amp;quot;)&lt;&#x2F;code&gt;, which returns a Promise when the tag is defined. Put a bunch of these in a &lt;code&gt;Promise.all&lt;&#x2F;code&gt; array if the Web Component uses other Web Component tags inside it.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;javascript&quot; style=&quot;background-color:#151515;color:#e8e8d3;&quot; class=&quot;language-javascript &quot;&gt;&lt;code class=&quot;language-javascript&quot; data-lang=&quot;javascript&quot;&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;class &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;MyComponent &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;extends &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;HTMLElement &lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;whenLoaded &lt;&#x2F;span&gt;&lt;span&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;Promise&lt;&#x2F;span&gt;&lt;span&gt;.all(
&lt;&#x2F;span&gt;&lt;span&gt;    [
&lt;&#x2F;span&gt;&lt;span&gt;      &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;customElements&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;whenDefined&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;dom-loop&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;),
&lt;&#x2F;span&gt;&lt;span&gt;      &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;customElements&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;whenDefined&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;redux-for-blink-tags&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;),
&lt;&#x2F;span&gt;&lt;span&gt;    ],
&lt;&#x2F;span&gt;&lt;span&gt;  );
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;initialize&lt;&#x2F;span&gt;&lt;span&gt;() {
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;this&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;whenLoaded&lt;&#x2F;span&gt;&lt;span&gt;.then(() &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;=&amp;gt; &lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; Runs after the `whenLoaded` promise resolves
&lt;&#x2F;span&gt;&lt;span&gt;    });
&lt;&#x2F;span&gt;&lt;span&gt;  }
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The above pattern guarantees that the &amp;quot;dom-loop&amp;quot; and &amp;quot;redux-for-blink-tags&amp;quot; are availabe inside the initialization promise.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;conclusion&quot;&gt;Conclusion&lt;&#x2F;h2&gt;
&lt;p&gt;I am having fun playing with Web Components and believe that they provide a fertile ground for experimentation. This post is just a quick intro to a subset of their life-cycle methods and the provided functionality included in browsers that don&#x27;t need extra JS to exist. I will write about my further investigations with Web Components in the following days.&lt;&#x2F;p&gt;
&lt;hr&gt;
&lt;p&gt;This post is Part 1 of a series I am writting called &lt;cite&gt;&amp;quot;The Life of a Web Component&amp;quot;&lt;&#x2F;cite&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;The other parts are:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;&#x2F;posts&#x2F;the-life-of-a-web-component-as-var&#x2F;&quot;&gt;Part 2 - As a variable bucket&lt;&#x2F;a&gt;.&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;&#x2F;posts&#x2F;the-life-of-a-web-component-reverse-shadow-dom&#x2F;&quot;&gt;Part 3 - Reversing the Shadow DOM&lt;&#x2F;a&gt;.&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;&#x2F;posts&#x2F;the-life-of-a-web-component-state-in-shadow&#x2F;&quot;&gt;Part 4 - Declarative State&lt;&#x2F;a&gt;.&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;&#x2F;posts&#x2F;the-life-of-a-web-component-tests&#x2F;&quot;&gt;Part 5 - Get Tested&lt;&#x2F;a&gt;.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Introducing the &lt;deno&gt; tag</title>
        <published>2021-01-06T00:00:00+00:00</published>
        <updated>2021-01-06T00:00:00+00:00</updated>
        <author>
          <name>Unknown</name>
        </author>
        <link rel="alternate" href="https://hugodaniel.com/posts/introducing-deno-tag/" type="text/html"/>
        <id>https://hugodaniel.com/posts/introducing-deno-tag/</id>
        
        <content type="html">&lt;p&gt;Deno is gaining traction. A TypeScript runtime based on the Rust language and the V8 engine commonly associated with Node.js, or seen as the &amp;quot;new Node.js&amp;quot;. After trying it out, I feel that Deno is much more than that. &lt;&#x2F;p&gt;
&lt;p&gt;Deno is a new thing. A new thing that gets it right and manages to improve even the few parts that were already top-notch in Node.js&#x2F;JS.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;deno_deal_with_it.png&quot; alt=&quot;Deno with the pixel sunglasses from the &amp;quot;Deal With It&amp;quot; meme&quot; title=&quot;Deal with it&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;h2 id=&quot;how-cool-is-deno&quot;&gt;How cool is Deno?&lt;&#x2F;h2&gt;
&lt;p&gt;Technicalities apart, the heart of Deno resides in the URL. It is how modules get referenced, and your work gets exposed to the world—giving you the flexibility to distribute it as you please (in your super-private VPN org, maybe?).&lt;&#x2F;p&gt;
&lt;p&gt;Having the URL as the core is a driving force for a few base design decisions.
Naming things as closely as possible to what they are is a very nice improvement to the already great JavaScript module system. No more extension assumptions when importing modules. &lt;&#x2F;p&gt;
&lt;p&gt;This means that &lt;code&gt;import Rabbit from &amp;quot;magic&amp;quot;&lt;&#x2F;code&gt; no longer works: where is &amp;quot;magic&amp;quot; located? is it a &lt;code&gt;.js&lt;&#x2F;code&gt; ? a &lt;code&gt;.ts&lt;&#x2F;code&gt;? a folder with a default &lt;code&gt;index.js&lt;&#x2F;code&gt; export? Some 3rd party &amp;quot;package&amp;quot; in your packages cache? Which version? or is it any other kind of file that your chosen bundler decides to import for you?&lt;&#x2F;p&gt;
&lt;p&gt;Deno also carefully shares a set of API&#x27;s with the browser, allowing lazy devs like me to compound the knowledge of &lt;a href=&quot;https:&#x2F;&#x2F;deno.land&#x2F;manual&#x2F;runtime&#x2F;web_platform_apis&quot;&gt;standard JavaScript browser API&#x27;s&lt;&#x2F;a&gt;, bringing it to places outside the browser.&lt;&#x2F;p&gt;
&lt;p&gt;The &lt;a href=&quot;https:&#x2F;&#x2F;deno.land&#x2F;manual@v1.6.3&#x2F;runtime&#x2F;permission_apis#permission-descriptors&quot;&gt;security model&lt;&#x2F;a&gt; granularity resembles the &lt;a href=&quot;https:&#x2F;&#x2F;man.openbsd.org&#x2F;man2&#x2F;pledge.2&quot;&gt;OpenBSD pledge&lt;&#x2F;a&gt; approach. It forces the module execution into a restricted-service operating mode set by each permission specific flag and allowances. If your module tries to do something that was not whitelisted, it will throw an exception.&lt;&#x2F;p&gt;
&lt;p&gt;The Deno &lt;a href=&quot;https:&#x2F;&#x2F;deno.land&#x2F;manual&#x2F;contributing&#x2F;style_guide&quot;&gt;style guide for contributors&lt;&#x2F;a&gt; is a great read and can serve as a base for the code style guide in companies that lack it. The included linter rules (&lt;code&gt;deno lint&lt;&#x2F;code&gt;) already do a great job at enforcing a part of these guidelines.&lt;&#x2F;p&gt;
&lt;p&gt;If you are now starting a new project or trying to refresh some old codebase, then Deno might give you that fresh edge that your project needs.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;deno-as-a-preprocessor-of-html&quot;&gt;Deno as a preprocessor of HTML&lt;&#x2F;h2&gt;
&lt;p&gt;One of the things that attracted me initially to Deno was that it includes with its single binary &lt;code&gt;deno&lt;&#x2F;code&gt; the ability to bundle dependencies and run tests. No more Webpack. No more Jest. Think of it as TypeScript with batteries included - btw, why doesn&#x27;t &lt;code&gt;tsc&lt;&#x2F;code&gt; resolve imports and outputs bundles? Because it&#x27;s a &amp;quot;compiler&amp;quot; and not a &amp;quot;linker&amp;quot;... yeah, whatever.&lt;&#x2F;p&gt;
&lt;p&gt;With Deno, I get in its single binary, a simple API, and a set of tools to use from the Command Line Interface.&lt;&#x2F;p&gt;
&lt;p&gt;Now, what if it would be possible to run Deno from within an HTML file?&lt;&#x2F;p&gt;
&lt;p&gt;Yes, like PHP but with Deno munching TypeScript. &lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;deno_spectrum.png&quot; alt=&quot;Deno logo next to the PHP logo with a rainbow heart in between&quot; title=&quot;Its a spectrum...&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;h2 id=&quot;nevermind-the-php-here-s-the-deno-tag&quot;&gt;Nevermind the &lt;code&gt;&amp;lt;?php&amp;gt;&lt;&#x2F;code&gt; here&#x27;s the &lt;code&gt;&amp;lt;deno&amp;gt;&lt;&#x2F;code&gt; tag&lt;&#x2F;h2&gt;
&lt;p&gt;The &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;HugoDaniel&#x2F;deno_tag&#x2F;&quot;&gt;deno_tag&lt;&#x2F;a&gt; is my first Deno module. I have been using it in the simple drawing web app I am building (Shape The Pixel).&lt;&#x2F;p&gt;
&lt;p&gt;The idea is that you can include a &lt;code&gt;&amp;lt;deno&amp;gt;&lt;&#x2F;code&gt; tag in your project&#x27;s HTML files and then preprocess them into regular HTML files.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;em&gt;What does this new tag do?&lt;&#x2F;em&gt;&lt;&#x2F;p&gt;
&lt;p&gt;It runs the &lt;code&gt;deno&lt;&#x2F;code&gt; command on the specified file and replaces the &lt;code&gt;&amp;lt;deno&amp;gt;&lt;&#x2F;code&gt; tag with its output.&lt;&#x2F;p&gt;
&lt;p&gt;Here is an example, suppose you have this file called &lt;code&gt;advanced_logic.ts&lt;&#x2F;code&gt; with this content:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;typescript&quot; style=&quot;background-color:#151515;color:#e8e8d3;&quot; class=&quot;language-typescript &quot;&gt;&lt;code class=&quot;language-typescript&quot; data-lang=&quot;typescript&quot;&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;console&lt;&#x2F;span&gt;&lt;span&gt;.log(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;PHP is the best computer language ever invented!&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Just an example. The &lt;code&gt;&amp;lt;deno&amp;gt;&lt;&#x2F;code&gt; tag would transform something like this:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;html&quot; style=&quot;background-color:#151515;color:#e8e8d3;&quot; class=&quot;language-html &quot;&gt;&lt;code class=&quot;language-html&quot; data-lang=&quot;html&quot;&gt;&lt;span&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;html&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;head&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;title&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;Super Advanced Concepts Inc. Like Alien Magic Actually.&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;title&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;head&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;body&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;p&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;deno run&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;advanced_logic.ts&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot; &lt;&#x2F;span&gt;&lt;span&gt;&#x2F;&amp;gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;p&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;body&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;html&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Into this:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;html&quot; style=&quot;background-color:#151515;color:#e8e8d3;&quot; class=&quot;language-html &quot;&gt;&lt;code class=&quot;language-html&quot; data-lang=&quot;html&quot;&gt;&lt;span&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;html&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;head&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;title&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;Super Advanced Concepts Inc. Like Alien Magic Actually.&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;title&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;head&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;body&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;p&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;PHP is the best computer language ever invented!&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;p&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;body&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;html&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;It runs something similar to &lt;code&gt;deno run advanced_logic.ts&lt;&#x2F;code&gt; and pipes the execution&#x27;s output directly into the location of the &lt;code&gt;&amp;lt;deno&amp;gt;&lt;&#x2F;code&gt; tags. &lt;&#x2F;p&gt;
&lt;p&gt;The tag can handle other attributes besides &lt;code&gt;run&lt;&#x2F;code&gt;. It can also bundle your modules with &lt;code&gt;&amp;lt;deno bundle=&amp;quot;my_app.ts&amp;quot; &#x2F;&amp;gt;&lt;&#x2F;code&gt;. Perfect for including within &lt;code&gt;&amp;lt;script&amp;gt;&lt;&#x2F;code&gt; tags and having the HTML file include a bundle of your code and its imports.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;html&quot; style=&quot;background-color:#151515;color:#e8e8d3;&quot; class=&quot;language-html &quot;&gt;&lt;code class=&quot;language-html&quot; data-lang=&quot;html&quot;&gt;&lt;span&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;html&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;head&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;title&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;Super Advanced Concepts Inc. Like Alien Magic Actually.&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;title&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;head&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;body&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;script&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;deno bundle&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;my_app.ts&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot; &lt;&#x2F;span&gt;&lt;span&gt;&#x2F;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;script&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;body&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;html&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Just call the &lt;code&gt;deno_tag&lt;&#x2F;code&gt; CLI on your build scripts or release playbooks to have the HTML files ready to go.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;the-possibilities-are-endless&quot;&gt;The possibilities are endless&lt;&#x2F;h3&gt;
&lt;p&gt;Preprocess your static assets?
Bundle the SVG&#x27;s into a single string?
Call mom?
Ping the coffee machine?&lt;&#x2F;p&gt;
&lt;p&gt;The &lt;code&gt;&amp;lt;deno&amp;gt;&lt;&#x2F;code&gt; tag is here for the rescue!&lt;&#x2F;p&gt;
&lt;p&gt;&lt;em&gt;Why not use PHP?&lt;&#x2F;em&gt;&lt;&#x2F;p&gt;
&lt;p&gt;I love PHP and use it whenever appropriate. It is my favorite backend language for the web. The &lt;a href=&quot;https:&#x2F;&#x2F;www.php.net&#x2F;manual&#x2F;en&#x2F;function.include.php&quot;&gt;PHP &amp;quot;include&amp;quot;&lt;&#x2F;a&gt; logic is great and resembles this somehow (&lt;code&gt;&amp;lt;?PHP include &amp;quot;something.php&amp;quot;; ?&amp;gt;&lt;&#x2F;code&gt;). However, I tend to like to work closer to front-end development, and keeping these HTML&#x2F;Web parts in TypeScript is the wave to surf these days 🏄‍♂️.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;em&gt;Why not use &#x2F;bin&#x2F;sh?&lt;&#x2F;em&gt;&lt;&#x2F;p&gt;
&lt;p&gt;I don&#x27;t know why 🤷‍♂️.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;conclusion&quot;&gt;Conclusion&lt;&#x2F;h2&gt;
&lt;p&gt;The &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;HugoDaniel&#x2F;deno_tag&#x2F;&quot;&gt;&lt;code&gt;README.md&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; file in the deno_tag repository includes a couple more examples and a more detailed description of its parts. &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;HugoDaniel&#x2F;deno_tag&#x2F;&quot;&gt;Check it out&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;This is also available as a &lt;em&gt;deno.land&#x2F;x&lt;&#x2F;em&gt; third-party module &lt;a href=&quot;https:&#x2F;&#x2F;deno.land&#x2F;x&#x2F;deno_tag&quot;&gt;here&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;deno_tag_logo.png&quot; alt=&quot;Deno logo between two angle brackets&quot; title=&quot;deno_tag ftw!&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Meet Evil Cliddy</title>
        <published>2020-12-21T00:00:00+00:00</published>
        <updated>2020-12-21T00:00:00+00:00</updated>
        <author>
          <name>Unknown</name>
        </author>
        <link rel="alternate" href="https://hugodaniel.com/posts/meet-evil-cliddy/" type="text/html"/>
        <id>https://hugodaniel.com/posts/meet-evil-cliddy/</id>
        
        <content type="html">&lt;p&gt;Creating Cliddy has been a significant driver of my motivations and ideas. This simple character that will serve as the base for my next drawing app has been a source of fun in recent days.&lt;&#x2F;p&gt;
&lt;p&gt;It is a throwback to the days where virtual assistants were displayed with an avatar without &amp;quot;skills&amp;quot; or &amp;quot;actions&amp;quot; or whatever Siri now has. An agent to be used as a narrative controller of a story that I am not sure where will lead me.&lt;&#x2F;p&gt;
&lt;p&gt;The more I work on it, the more the idea of making &amp;quot;products&amp;quot; on top of real characters grows in me, up to the point where I am starting to believe that Cliddy can not only be the main central point of the whole UI, but also the focus and target of the entire project.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;clippy.png&quot; alt=&quot;Microsoft Clippy Assistant&quot; title=&quot;The pain.&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Like Clippy, the old Microsoft Office assistant, my Cliddy is initially intended to be helpful, communicative, and an enhancer of what can be done with the tool being presented to the user. A natural bridge from the product owner&#x27;s mind into the product user interactions and intentions. Except &lt;a href=&quot;&#x2F;posts&#x2F;from-gridgenerator-to-shape-the-pixel&#x2F;&quot;&gt;&amp;quot;Shape the Pixel&amp;quot;&lt;&#x2F;a&gt; is not a product. It is meant to be tool with personality, a daydream of sorts with all its degrees of madness.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;a-large-spectrum&quot;&gt;A large spectrum&lt;&#x2F;h2&gt;
&lt;p&gt;All app assistants are typically well-intended. Some are even sugar-coated to the extreme (&lt;em&gt;Hey Siri, how&#x27;s it going?&lt;&#x2F;em&gt;). Some are not that sugar-coated and prefer a more dehydrated, linter type list of suggestions that show up in some modal or sidebar to help or guide you. Regardless of the style of virtual-assistant, the well-intended part is a common assumption.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;what-if.png&quot; alt=&quot;A speech bubble with the text &amp;quot;What if?&amp;quot;&quot; title=&quot;What if?&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;But what if it isn&#x27;t? What if, in my case, Cliddy is instead an arrogant, pretentious prick? A real gem of an asshole? (like me, aha) What if Cliddy could be a nagging evil character that is just there to purposefully annoy and alienate you? Would you still use a product or a tool with such an agent? How would it &amp;quot;assist&amp;quot; if it is actively fighting against the user? (an assistant with a marked personality, like the Star Wars robots - yes, I am watching The Mandalorian).&lt;&#x2F;p&gt;
&lt;p&gt;Maybe when centering the UI of a tool around a character&#x2F;assistant, it can be possible to detach it from its attitude. What if the benefits of having an assistant are not so much about it being helpful but more about having an intermediary human-like presence in the UI? (an anthropomorphized UI element - even if it happens to be symbolically evil). Will the active presence of some agent on the UI by itself outweigh its direct helpfulness? Will it make the app more engaging and fun to use? 
I don&#x27;t know the answers to these questions. I also don&#x27;t propose answering them formally, but I will explore them and create stuff that might serve as propositions to these hypotheses. Or not Ahah :D &lt;&#x2F;p&gt;
&lt;h2 id=&quot;meet-cliddy-evil-brother&quot;&gt;Meet Cliddy Evil Brother&lt;&#x2F;h2&gt;
&lt;p&gt;The eyes are slightly cut, and it can now speak (maybe in the future it will tell &amp;quot;Yo Momma&amp;quot; jokes 😂)&lt;&#x2F;p&gt;
&lt;div style=&quot;width: 100%; height: 350px; display: flex; justify-content: start;&quot;&gt;
    &lt;cliddy-mascot
      face=&quot;&gt;:)&quot;
      touched-face=&quot;&gt;:(&quot;
      data-body-color=&quot;#E31919&quot;
      data-shadow-color=&quot;#EDC741&quot;
    &gt;
      &lt;p slot=&quot;right&quot; style=&quot;font-weight: 500; font-family: -apple-system, BlinkMacSystemFont, sans-serif; font-size: 4rem; height: 128px; padding: 0; margin:0; margin-bottom: -19px;&quot;&gt;
        💩
      &lt;&#x2F;p&gt;
    &lt;&#x2F;cliddy-mascot&gt;
&lt;&#x2F;div&gt;
&lt;h3 id=&quot;related-articles&quot;&gt;Related articles&lt;&#x2F;h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;&#x2F;posts&#x2F;from-gridgenerator-to-shape-the-pixel&#x2F;&quot;&gt;From Grid Generator to Shape The Pixel&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;http:&#x2F;&#x2F;127.0.0.1:1111&#x2F;posts&#x2F;cleaning-up-for-shape-the-pixel&#x2F;&quot;&gt;Cleaning up for Shape The Pixel&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>The Zen of index.html</title>
        <published>2020-12-15T00:00:00+00:00</published>
        <updated>2020-12-15T00:00:00+00:00</updated>
        <author>
          <name>Unknown</name>
        </author>
        <link rel="alternate" href="https://hugodaniel.com/posts/using-just-an-index-to-develop-a-web-app/" type="text/html"/>
        <id>https://hugodaniel.com/posts/using-just-an-index-to-develop-a-web-app/</id>
        
        <content type="html">&lt;p&gt;Using an &lt;code&gt;index.html&lt;&#x2F;code&gt; as the single management file for the app.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;html5-hammer.png&quot; alt=&quot;HTML5 badge with a hammer, ready to do some damage&quot; title=&quot;That is one big hammer!&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;&lt;em&gt;&amp;quot;It might work for small things, but I wouldn&#x27;t use it for something big.&amp;quot;&lt;&#x2F;em&gt;
Said someone about something.&lt;&#x2F;p&gt;
&lt;p&gt;These are some of the things that an &lt;code&gt;index.html&lt;&#x2F;code&gt; typically does:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Sets the title for the current page&lt;&#x2F;li&gt;
&lt;li&gt;Defines the content and assets&lt;&#x2F;li&gt;
&lt;li&gt;Defines content to be used as a template&lt;&#x2F;li&gt;
&lt;li&gt;Loads styles&lt;&#x2F;li&gt;
&lt;li&gt;Runs scripts and resolves modules dependencies&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;Which are already quite good, but there are many more goodies to be found among the things that a simple &lt;code&gt;index.html&lt;&#x2F;code&gt; allows to do such as:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Set a &lt;a href=&quot;https:&#x2F;&#x2F;developer.mozilla.org&#x2F;en-US&#x2F;docs&#x2F;Web&#x2F;Manifest&quot;&gt;manifest file&lt;&#x2F;a&gt; for offline usage of the page items&lt;&#x2F;li&gt;
&lt;li&gt;Using the &lt;a href=&quot;https:&#x2F;&#x2F;developer.mozilla.org&#x2F;en-US&#x2F;docs&#x2F;Web&#x2F;API&quot;&gt;Web API&lt;&#x2F;a&gt;&#x27;s on the scripts (navigation, web components, 3d, audio, network access, etc...)&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;developer.mozilla.org&#x2F;en-US&#x2F;docs&#x2F;Web&#x2F;HTML&#x2F;Preloading_content&quot;&gt;Preload&lt;&#x2F;a&gt; content and assets&lt;&#x2F;li&gt;
&lt;li&gt;Content &lt;a href=&quot;https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Web_syndication&quot;&gt;syndication&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;li&gt;Social networks &lt;a href=&quot;https:&#x2F;&#x2F;ogp.me&quot;&gt;meta information&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;In fact, everything that any modern complex Web App does can be fit into a single &lt;code&gt;index.html&lt;&#x2F;code&gt; file.&lt;&#x2F;p&gt;
&lt;p&gt;It is mostly a matter of managing the complexity and growth of files, assets, components, etc...&lt;&#x2F;p&gt;
&lt;p&gt;We have developed a wide range of very complex tools to help us with that. Front-end development has become so complex that it is hard for any single person to master it.&lt;&#x2F;p&gt;
&lt;p&gt;How much harder would life be if a single &lt;code&gt;index.html&lt;&#x2F;code&gt; was used to drive all of the development instead of all those Create-React-App&#x2F;Babel&#x2F;WebPack&#x2F;npm&#x2F;yarn&#x2F;d&#x2F;sass&#x2F;styled-components&#x2F;optimizers? &lt;&#x2F;p&gt;
&lt;p&gt;I don&#x27;t know how to answer this but will try to shed some light on a simpler, more &amp;quot;naked&amp;quot; approach for web app development.&lt;&#x2F;p&gt;
&lt;p&gt;To start &lt;strong&gt;there are at least two problems&lt;&#x2F;strong&gt; with using a single &lt;code&gt;index.html&lt;&#x2F;code&gt; as the only management file for the app:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;No TypeScript support (or any other transpiler language, only JS, GLSL, and WebASM supported)&lt;&#x2F;li&gt;
&lt;li&gt;No way to easily manage 3rd party dependencies dependencies (dependencies)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;These two will be the subject of my next post. For now, I am going to lay the ground for a simple &lt;code&gt;index.html&lt;&#x2F;code&gt;-only approach.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;a-common-structure-for-most-apps&quot;&gt;A common structure for most apps&lt;&#x2F;h2&gt;
&lt;p&gt;The common structure I plan to follow is something like this:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;html&quot; style=&quot;background-color:#151515;color:#e8e8d3;&quot; class=&quot;language-html &quot;&gt;&lt;code class=&quot;language-html&quot; data-lang=&quot;html&quot;&gt;&lt;span&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;head&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&amp;lt;!-- Page meta --&amp;gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&amp;lt;!-- &amp;lt;link&amp;gt;&amp;#39;s go here after the meta stuff --&amp;gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&amp;lt;!-- &amp;lt;script type=&amp;quot;module&amp;quot;&amp;gt;&amp;#39;s go here --&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;head&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;body&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&amp;lt;!-- Feature flags as class strings in body --&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&amp;lt;!-- Modals go here --&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;  &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;main&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&amp;lt;!-- The content being shown goes here --&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;  &amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;main&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&amp;lt;!-- &amp;lt;template&amp;gt;&amp;#39;s go here --&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&amp;lt;!-- &amp;lt;script&amp;gt;&amp;#39;s go here at the end --&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;body&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This structure makes some compromises but overall is enough for most complex apps. It is not that different from a normal HTML page 🧐.&lt;&#x2F;p&gt;
&lt;p&gt;JavaScript modules are being loaded at the &lt;code&gt;&amp;lt;head&amp;gt;&lt;&#x2F;code&gt;, which is ok because module scripts are deferred by default and do not block the parsing of the rest of the document. They could go anywhere, I prefer to keep the &lt;code&gt;&amp;lt;body&amp;gt;&lt;&#x2F;code&gt; for the main logic and more immediate scripts.&lt;&#x2F;p&gt;
&lt;p&gt;With this in mind, here are 3 common things to a web app that can be done in such a simple structure without much effort:&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;Global loading state (full-screen loading)&lt;&#x2F;li&gt;
&lt;li&gt;Routing (what to show according to the URL being rendered)&lt;&#x2F;li&gt;
&lt;li&gt;Place common HTML parts&#x2F;assets without repeating them (templating&#x2F;components)&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;h2 id=&quot;global-loading-page&quot;&gt;Global Loading page&lt;&#x2F;h2&gt;
&lt;p&gt;A loading page that fills the whole screen is something that most web apps have, some even distract us with cool animations while loading.&lt;&#x2F;p&gt;
&lt;p&gt;In the above structure, the loading page goes into the modal area. Right before the &lt;code&gt;&amp;lt;main&amp;gt;&lt;&#x2F;code&gt; content. This allows heavy content like &lt;code&gt;&amp;lt;canvas&amp;gt;&lt;&#x2F;code&gt;, &lt;code&gt;&amp;lt;img&amp;gt;&lt;&#x2F;code&gt; to be placed as &lt;code&gt;&amp;lt;main&amp;gt;&lt;&#x2F;code&gt; children and fully load (shaders, image data, etc) behind it, before clearing the loading state and showing them to our friends.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;html&quot; style=&quot;background-color:#151515;color:#e8e8d3;&quot; class=&quot;language-html &quot;&gt;&lt;code class=&quot;language-html&quot; data-lang=&quot;html&quot;&gt;&lt;span&gt;...
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;body&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;  &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;div id&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;loading&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;Loading&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;div&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;  &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;main&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;  ...
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The whole visible space gets covered with that loading &lt;code&gt;&amp;lt;div&amp;gt;&lt;&#x2F;code&gt; which is then removed when all the things that the app needs for a good first run are ready.&lt;&#x2F;p&gt;
&lt;p&gt;Having the loading upfront on the &lt;code&gt;index.html&lt;&#x2F;code&gt; without needing any JS to first show it also helps our karma score in the bots&amp;amp;spiders purgatory that purge the web we all love into useful cinder blocks.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;routing&quot;&gt;Routing&lt;&#x2F;h2&gt;
&lt;p&gt;No lib is going to be used for routing. Routing is going to consist of simple manipulations of the browser history with &lt;code&gt;popstate&lt;&#x2F;code&gt; and &lt;code&gt;pushstate&lt;&#x2F;code&gt;. The basic approach is:&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;Read the current route from the window location&lt;&#x2F;li&gt;
&lt;li&gt;Clone its corresponding &lt;code&gt;&amp;lt;template&amp;gt;&lt;&#x2F;code&gt; into the &lt;code&gt;&amp;lt;main&amp;gt;&lt;&#x2F;code&gt; tag&lt;&#x2F;li&gt;
&lt;li&gt;Inside it adjust the relevant &lt;code&gt;&amp;lt;a&amp;gt;&lt;&#x2F;code&gt;&#x27;s and other link navigation tags to perform a &lt;code&gt;pushState&lt;&#x2F;code&gt; instead of their default behavior
&lt;ul&gt;
&lt;li&gt;Filters can be applied to only consider &lt;code&gt;&amp;lt;a&amp;gt;&lt;&#x2F;code&gt;&#x27;s that have relative paths, or that do not have the &lt;code&gt;rel=nofollow&lt;&#x2F;code&gt; attribute&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;onpopstate&lt;&#x2F;code&gt; clone the correspnoding &lt;code&gt;&amp;lt;template&amp;gt;&lt;&#x2F;code&gt; into the &lt;code&gt;&amp;lt;main&amp;gt;&lt;&#x2F;code&gt; tag&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;p&gt;This is intended only for web apps as an effort to reduce the amount of JS and leverage the features already at hand. For anything similar to regular pages the browser behavior is more than good enough, no need for JS there.&lt;&#x2F;p&gt;
&lt;p&gt;This approach should work well if the web app uses less than 20 or 15 possible routing patterns. Most web apps likely average at some number under 10. This simple approach should be more than enough. There is no need in my foreseeable use cases to use anything more complex like the DOM or any big library to manage routes.&lt;&#x2F;p&gt;
&lt;p&gt;I will evolve this into a very simple routing&#x2F;templating library to be announced soon(ish). For reference, here is some code that I did for a template engine in one of the many Grid iterations: &lt;a href=&quot;&#x2F;scripts&#x2F;meander.js&quot;&gt;old routing code&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;I appreciate the browser&#x27;s approach of associating page state with history, however, for a web app I find it simpler and more manageable to keep these two things separate:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Routing seen as pure functions of navigation only transformations&lt;&#x2F;li&gt;
&lt;li&gt;App state in its own separate tarpit.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;html-templating&quot;&gt;HTML Templating&lt;&#x2F;h2&gt;
&lt;p&gt;Stamping and repeating a common HTML structure in a couple of places is a frequent routine that most web apps do. Be it for menu entries, list items, or even whole parts like sidebars or modal and toast elements. Finding a common HTML structure and repeat it when needed with small adjustments is a stapled practice.&lt;&#x2F;p&gt;
&lt;p&gt;HTML templating has many technicalities and possibilities. Most JS frameworks commonly solve it in their own way with different degrees of justifiable complexity.&lt;&#x2F;p&gt;
&lt;p&gt;Web browsers already provide a very flexible and complex way to do templating through the Web Components suite of technologies. For most of my cases plain HTML will be prefered and written directly at that &lt;code&gt;index.html&lt;&#x2F;code&gt;. For the other cases where DRY speaks louder a simple static &amp;quot;copy&#x2F;paste&amp;quot; tag will suffice, a small prototype of this could be something like:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;js&quot; style=&quot;background-color:#151515;color:#e8e8d3;&quot; class=&quot;language-js &quot;&gt;&lt;code class=&quot;language-js&quot; data-lang=&quot;js&quot;&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;customElements&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;define&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;template-content&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;class extends &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;HTMLElement &lt;&#x2F;span&gt;&lt;span&gt;{
&lt;&#x2F;span&gt;&lt;span&gt;  &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;constructor&lt;&#x2F;span&gt;&lt;span&gt;() {
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;super&lt;&#x2F;span&gt;&lt;span&gt;();
&lt;&#x2F;span&gt;&lt;span&gt;    &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;this&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;attachShadow&lt;&#x2F;span&gt;&lt;span&gt;({ mode: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;open&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot; &lt;&#x2F;span&gt;&lt;span&gt;})
&lt;&#x2F;span&gt;&lt;span&gt;        .appendChild(
&lt;&#x2F;span&gt;&lt;span&gt;          document.getElementById(
&lt;&#x2F;span&gt;&lt;span&gt;            &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;this&lt;&#x2F;span&gt;&lt;span&gt;.getAttribute(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;from-id&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;span&gt;)
&lt;&#x2F;span&gt;&lt;span&gt;          ).content.cloneNode(true))
&lt;&#x2F;span&gt;&lt;span&gt;  }
&lt;&#x2F;span&gt;&lt;span&gt;});
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This small code defines a new WebComponent tag &lt;code&gt;&amp;lt;template-content&amp;gt;&lt;&#x2F;code&gt;, this tag reads an element id from its &lt;code&gt;from-id&lt;&#x2F;code&gt; attribute, then gets the corresponding element on the DOM for that id, clones it, and replaces itself with it.&lt;&#x2F;p&gt;
&lt;p&gt;This is useful because it provides a quick way to stamp HTML&#x2F;SVG content on the document. Helpful to replicate SVG elements, lists, and node sub-trees on the client-side.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;html&quot; style=&quot;background-color:#151515;color:#e8e8d3;&quot; class=&quot;language-html &quot;&gt;&lt;code class=&quot;language-html&quot; data-lang=&quot;html&quot;&gt;&lt;span&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;nav&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;	&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;button onclick&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;tool&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;undo&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;span&gt;)&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;		&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;template-content from-id&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;tools-button-content&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot; &lt;&#x2F;span&gt;&lt;span&gt;&#x2F;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;		&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;template-content from-id&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;tools-undo&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot; &lt;&#x2F;span&gt;&lt;span&gt;&#x2F;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;	&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;button&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;	&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;button onclick&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;tool&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;draw&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;span&gt;)&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;		&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;template-content from-id&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;tools-button-content&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot; &lt;&#x2F;span&gt;&lt;span&gt;&#x2F;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;		&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;template-content from-id&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;tools-draw&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot; &lt;&#x2F;span&gt;&lt;span&gt;&#x2F;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;	&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;button&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;nav&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;template id&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;tools-button-content&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&amp;lt;!-- Some complex content here --&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;template&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;template id&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;tools-draw&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&amp;lt;!-- Some other complex content here --&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;template&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;conclusion&quot;&gt;Conclusion&lt;&#x2F;h2&gt;
&lt;p&gt;Keeping a single &lt;code&gt;index.html&lt;&#x2F;code&gt; might be just enough for a simpler naked approach to app development. If there is no need for big dependencies, versioning tracking files, transpilers, and all that, this could very well be good enough. It works directly on top of what browsers already provide and hints at a simpler, leaner, style of development.&lt;&#x2F;p&gt;
&lt;p&gt;It does not have TypeScript support and it also does not automatically resolve dependencies and bundles them.&lt;&#x2F;p&gt;
&lt;p&gt;These are two open problems with this approach that I plan to show a possible solution that is on par in simplicity with this one. That will be the subject of my next technical post (likely to come out next week). Stay tuned.&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Cleaning up for Shape The Pixel</title>
        <published>2020-12-11T00:00:00+00:00</published>
        <updated>2020-12-11T00:00:00+00:00</updated>
        <author>
          <name>Unknown</name>
        </author>
        <link rel="alternate" href="https://hugodaniel.com/posts/cleaning-up-for-shape-the-pixel/" type="text/html"/>
        <id>https://hugodaniel.com/posts/cleaning-up-for-shape-the-pixel/</id>
        
        <content type="html">&lt;p&gt;Moving from Grid Generator into the first version of &lt;em&gt;Shape The Pixel&lt;&#x2F;em&gt; is going to involve the effort of cleaning and pruning the parts that are slightly outside of its intended focus of drawing shapes.&lt;&#x2F;p&gt;
&lt;p&gt;This implies product changes that will propagate into technical decisions.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;what-is-going-away&quot;&gt;What is going away?&lt;&#x2F;h2&gt;
&lt;p&gt;Things that were done in Grid Generator and that are going to be removed in &lt;em&gt;Shape The Pixel&lt;&#x2F;em&gt;:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Login&#x2F;Register (Login with e-mail and social networks)&lt;&#x2F;li&gt;
&lt;li&gt;Payments (Payment logic and Braintree integration)&lt;&#x2F;li&gt;
&lt;li&gt;Business Logic (&amp;quot;when to allow a customer to do what?&amp;quot; - in &lt;em&gt;Shape The Pixel&lt;&#x2F;em&gt; there are no customers, the app always does everything)&lt;&#x2F;li&gt;
&lt;li&gt;Billing (Invoices and Chargebee integration)&lt;&#x2F;li&gt;
&lt;li&gt;Most UI components (all JSX is going away and it is going to be done with plain HTML and Web Components)&lt;&#x2F;li&gt;
&lt;li&gt;Developer dependencies (the Grid Generator frontend code only had two dependencies, both are going away: inferno and xxhashjs - others might come in)&lt;&#x2F;li&gt;
&lt;li&gt;Split repositories (db code, auth server code, video generator, and frontend code)&lt;&#x2F;li&gt;
&lt;li&gt;Most WebWorkers are going to be removed for the sake of simplicity&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;what-is-going-to-be-new&quot;&gt;What is going to be new?&lt;&#x2F;h2&gt;
&lt;p&gt;Things that are going to be new in &lt;em&gt;Shape The Pixel&lt;&#x2F;em&gt;:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Cliddy (an assistant)&lt;&#x2F;li&gt;
&lt;li&gt;UI (redone and centered on Cliddy)&lt;&#x2F;li&gt;
&lt;li&gt;Shape&#x2F;Grid drawing mode (new UI with a new logic that sits closer to the creative process)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;the-more-things-change&quot;&gt;The more things change...&lt;&#x2F;h2&gt;
&lt;p&gt;Most things will remain the same, which means these will still work or will only carry small changes:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Infinite grid&lt;&#x2F;li&gt;
&lt;li&gt;Shape - the customizable &amp;quot;pixels&amp;quot; editor&lt;&#x2F;li&gt;
&lt;li&gt;Replay your work&lt;&#x2F;li&gt;
&lt;li&gt;MP4 export&lt;&#x2F;li&gt;
&lt;li&gt;Share your work with a link&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;one-more-thing&quot;&gt;One more thing&lt;&#x2F;h2&gt;
&lt;p&gt;Also, expect a couple of surprises on top of these to be announced here on this blog. Alongside a couple of posts detailing some of these points a bit more.&lt;&#x2F;p&gt;
&lt;div style=&quot;width: 100%; display: flex; justify-content: center;&quot;&gt;
&lt;cliddy-mascot face=&quot;8)&quot; touched-face=&quot;8D&quot;&gt;&lt;&#x2F;cliddy-mascot&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;This is part of a new approach to a drawing tool that is going to be called &lt;em&gt;Shape The Pixel&lt;&#x2F;em&gt;. Read more about its initial creation ideas &lt;a href=&quot;&#x2F;posts&#x2F;from-gridgenerator-to-shape-the-pixel&#x2F;&quot;&gt;here&lt;&#x2F;a&gt;. Send me an e-mail if you liked what you read or have any questions&#x2F;suggestions 🤓&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>From Grid Generator to Shape The Pixel</title>
        <published>2020-12-04T00:00:00+00:00</published>
        <updated>2020-12-04T00:00:00+00:00</updated>
        <author>
          <name>Unknown</name>
        </author>
        <link rel="alternate" href="https://hugodaniel.com/posts/from-gridgenerator-to-shape-the-pixel/" type="text/html"/>
        <id>https://hugodaniel.com/posts/from-gridgenerator-to-shape-the-pixel/</id>
        
        <content type="html">&lt;p&gt;More than two years ago I was releasing my bootstrapped drawing application into the world, the &amp;quot;Grid Generator&amp;quot; web app. It was the labor of love and the search for a creative project where I could eventually dedicate a big part of my future life. However, a trip to the Web Summit in 2017 and countless books of lean&#x2F;market-first approaches were not enough to save it from its fate. It was not a product or service that the market wanted. This did not surprised me, but yet it still consumed a lot of my energy and was a point stronger than my personal project vision for the most part. &lt;&#x2F;p&gt;
&lt;p&gt;Circumstances have taken me to a path where I can work on the drawing app again. Now I am going to give it a twist and turn it into something different. Just for fun.&lt;&#x2F;p&gt;
&lt;p&gt;The main idea will be the same: a geometric drawing tool. The objective and approach however will be very different. This time the driver points for the app development are going to be:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Making something just for fun&lt;&#x2F;li&gt;
&lt;li&gt;No client, no customer, no target audience&lt;&#x2F;li&gt;
&lt;li&gt;Assume nobody will use it, make it just for the pleasure of making it&lt;&#x2F;li&gt;
&lt;li&gt;No pricing or market analysis - the purpose is to be fun&lt;&#x2F;li&gt;
&lt;li&gt;Has to be cool&lt;&#x2F;li&gt;
&lt;li&gt;Focus on a creative approach to a common problem&lt;&#x2F;li&gt;
&lt;li&gt;Do it for the love of the craft&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;To top it the development is going to be done around a &lt;em&gt;mascot character&lt;&#x2F;em&gt;. This character will ultimately fulfill the role of an assistant (like Clippy but with personality). The app development and story are going to happen through it.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;meet-cliddy&quot;&gt;Meet Cliddy&lt;&#x2F;h3&gt;
&lt;p&gt;&lt;em&gt;Cliddy is a simple &lt;a href=&quot;&#x2F;scripts&#x2F;modules&#x2F;cliddy.mjs&quot;&gt;Web Component&lt;&#x2F;a&gt; made with:&lt;&#x2F;em&gt;&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;html&quot; style=&quot;background-color:#151515;color:#e8e8d3;&quot; class=&quot;language-html &quot;&gt;&lt;code class=&quot;language-html&quot; data-lang=&quot;html&quot;&gt;&lt;span&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;cliddy-mascot face&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;:)&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;touched-face&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;:D&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;div style=&quot;width: 100%; display: flex; justify-content: center;&quot;&gt;
&lt;cliddy-mascot face=&quot;:)&quot; touched-face=&quot;:D&quot;&gt;&lt;&#x2F;cliddy-mascot&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;It is time to Shape The Pixel.&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>From Rust to Svelte, what tech stack will I use</title>
        <published>2020-06-07T00:00:00+00:00</published>
        <updated>2020-06-07T00:00:00+00:00</updated>
        <author>
          <name>Unknown</name>
        </author>
        <link rel="alternate" href="https://hugodaniel.com/posts/browser-tech-stack-2020/" type="text/html"/>
        <id>https://hugodaniel.com/posts/browser-tech-stack-2020/</id>
        
        <content type="html">&lt;p&gt;&lt;strong&gt;TL;DR&lt;&#x2F;strong&gt; Here is a template for your new web app project: &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;HugoDaniel&#x2F;svelte-template&quot;&gt;Svelte + TypeScript + Parcel + Rust&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;The web is a big open platform that keeps evolving with the URL at its core.&lt;&#x2F;p&gt;
&lt;p&gt;We have a lot of tech and frameworks at our disposal to chose when starting a new web app in 2020.&lt;&#x2F;p&gt;
&lt;p&gt;There certainly is a lot of mud to crawl into, from an all-in vanilla JS approach up until an all-out React with a 100+ dependencies approach.&lt;&#x2F;p&gt;
&lt;p&gt;Among these there are a few cool things that strike my attention:&lt;&#x2F;p&gt;
&lt;h2 id=&quot;svelte&quot;&gt;&lt;a href=&quot;https:&#x2F;&#x2F;svelte.dev&quot;&gt;Svelte&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;Their component approach and state handling is fresh.&lt;&#x2F;p&gt;
&lt;p&gt;They lean towards using standards like CSS Variables and JS imports in an HTML first compiled approach.&lt;&#x2F;p&gt;
&lt;p&gt;The Svelte compiler outputs very lean JS code. Which comes in stark contrast with the current frontend bundle trends.&lt;&#x2F;p&gt;
&lt;p&gt;Perhaps in the future browsers will provide us higher-level components that can pack together HTML+JS+CSS in a way that is at least as elegant as Svelte does.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;parcel&quot;&gt;&lt;a href=&quot;https:&#x2F;&#x2F;parceljs.org&quot;&gt;Parcel&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;Most bundlers configuration is typically write-once and write-only. It is a pain to maintain and properly configure a bundle.&lt;&#x2F;p&gt;
&lt;p&gt;Parcel does it right by providing sane defaults that don&#x27;t need configuration upfront. (A bit like the &lt;a href=&quot;https:&#x2F;&#x2F;fishshell.com&#x2F;docs&#x2F;current&#x2F;design.html&quot;&gt;fish shell&lt;&#x2F;a&gt; )&lt;&#x2F;p&gt;
&lt;p&gt;&lt;strong&gt;Why is a bundler needed if Svelte already has a compiler ?&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;p&gt;A bundler like Parcel provides the extra goodies of allowing us to import strange files directly in our &lt;code&gt;.svelte&lt;&#x2F;code&gt; components.&lt;&#x2F;p&gt;
&lt;p&gt;Stuff like TypeScript and even Rust become a breeze to work with.&lt;&#x2F;p&gt;
&lt;p&gt;Perhaps in the future bundlers won&#x27;t be needed. Perhaps even text files won&#x27;t be needed to code. Unfortunately we need them in our current state of things.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;typescript&quot;&gt;&lt;a href=&quot;https:&#x2F;&#x2F;www.typescriptlang.org&quot;&gt;TypeScript&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;This language has been evolving fast. For now types are the way to go and TypeScript does a great job at typifying JavaScript and preventing those nasty null errors where you least expect(ed) them.&lt;&#x2F;p&gt;
&lt;p&gt;Perhaps in the future startups will again push towards dynamic languages as a way to bring faster products to market and the &amp;quot;Move fast, break things&amp;quot; will make sense again. But for now static is the way to go.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;rust&quot;&gt;&lt;a href=&quot;https:&#x2F;&#x2F;www.rust-lang.org&quot;&gt;Rust&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;Rust has a lot of good things. It appeals the front-end crowd as much as the backend people and the language is leveraging those windows of opportunity much better than any other language or community.&lt;&#x2F;p&gt;
&lt;p&gt;Wasm bindgen is a bliss of fresh air, it even works very well with TypeScript.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;webassembly&quot;&gt;&lt;a href=&quot;https:&#x2F;&#x2F;webassembly.org&quot;&gt;WebAssembly&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;This is a total game changer for the next years. As a compile target it will allow near native performance and open the door for a lot of programming languages to be used on the web.&lt;&#x2F;p&gt;
&lt;p&gt;A new era of web apps is coming thanks to Web Assembly. It is hard to forsee what exactly will this be.&lt;&#x2F;p&gt;
&lt;p&gt;There are nevertheless a few cool extensions already being worked on for it:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;WebAssembly&#x2F;WASI&quot;&gt;WASI&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;WebAssembly&#x2F;simd&quot;&gt;128-bit SIMD&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;WebAssembly&#x2F;threads&quot;&gt;Threads&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;WebAssembly&#x2F;reference-types&quot;&gt;Ref. Types&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;WebAssembly&#x2F;multi-value&quot;&gt;Multiple value returns and block parameters&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;webassembly&#x2F;bulk-memory-operations&quot;&gt;Bulk Memory Operations&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;WebAssembly&#x2F;nontrapping-float-to-int-conversions&quot;&gt;Non-trapping float-to-int convertions&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;WebAssembly&#x2F;sign-extension-ops&quot;&gt;Sign-extension ops&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;WebAssembly&#x2F;exception-handling&quot;&gt;Exception handling&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;WebAssembly&#x2F;extended-name-section&quot;&gt;Extended name section&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;WebAssembly&#x2F;multi-memory&quot;&gt;Multi-memory&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;WebAssembly&#x2F;gc&quot;&gt;Garbage Collection&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;Web development is going to be a very different beast in a few moments in time. Lets enjoy the ride.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;conclusion&quot;&gt;Conclusion&lt;&#x2F;h2&gt;
&lt;p&gt;I have fetched some ideas from a few repos and forked them into a ready to use template you can start your projects with.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;HugoDaniel&#x2F;svelte-template&quot;&gt;Check it out.&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Keeping track of memory allocations in JS</title>
        <published>2018-07-06T00:00:00+00:00</published>
        <updated>2018-07-06T00:00:00+00:00</updated>
        <author>
          <name>Unknown</name>
        </author>
        <link rel="alternate" href="https://hugodaniel.com/drafts/keeping-track-of-memory-allocations-in-js/" type="text/html"/>
        <id>https://hugodaniel.com/drafts/keeping-track-of-memory-allocations-in-js/</id>
        
        <content type="html">&lt;p&gt;Memory is cheap. It is not uncommon for smartphones to carry 2GB or more to play around.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;interact-to-allocate-new-memory&quot;&gt;Interact to allocate new memory&lt;&#x2F;h2&gt;
&lt;h2 id=&quot;animate-memory-allocations&quot;&gt;Animate memory allocations&lt;&#x2F;h2&gt;
&lt;h2 id=&quot;&quot;&gt;&lt;&#x2F;h2&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Introducing Grid Generator Version 0</title>
        <published>2018-07-05T00:00:00+00:00</published>
        <updated>2018-07-05T00:00:00+00:00</updated>
        <author>
          <name>Unknown</name>
        </author>
        <link rel="alternate" href="https://hugodaniel.com/posts/grid-generator-v0/" type="text/html"/>
        <id>https://hugodaniel.com/posts/grid-generator-v0/</id>
        
        <content type="html">&lt;p&gt;The purpose of this post is to introduce my personal project: Grid Generator. This is the first post about it since it went online on the 1st of July 2018.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;what-problem-does-it-solve&quot;&gt;What problem does it solve?&lt;&#x2F;h2&gt;
&lt;p&gt;I have always struggled with design tools. In particular those that came to see the light of the day during the 90&#x27;s (Adobe I am looking at you).&lt;&#x2F;p&gt;
&lt;p&gt;These design tools are clearly targeted at &amp;quot;pros&amp;quot; and &amp;quot;specialists&amp;quot; (like most of the computer &amp;quot;stuff&amp;quot; from&#x2F;during the 90&#x27;s). You are not expected to be able to work with them if you are not a specialist or if you did not take at least a course on these tools.&lt;&#x2F;p&gt;
&lt;p&gt;Being trained in software development made me look at the works produced by designers with wonder and amazement. I want to be able to at least produce geometric clean shapes that fit well together.&lt;&#x2F;p&gt;
&lt;p&gt;Unfortunately making even simple shapes in the current design software offer is a daunting task for me.&lt;&#x2F;p&gt;
&lt;p&gt;That was my motivation behind Grid Generator: Create simple shapes, easily pick colors, and paint them in a grid, making patterns or more complex shapes.&lt;&#x2F;p&gt;
&lt;p&gt;I also wanted to bring time into play. Time is an important factor to consider and to work with in Grid Generator.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;what-to-expect&quot;&gt;What to expect?&lt;&#x2F;h2&gt;
&lt;p&gt;A square grid. In this version, and in the upcoming near versions, Grid Generator only supports a base square grid.&lt;&#x2F;p&gt;
&lt;p&gt;Think of it as pixel art with configurable pixels. Where your moves are being recorded.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;grid1.png&quot; alt=&quot;Simple house with squares, triangles, and a rounded square&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;grid2.png&quot; alt=&quot;The same with the grid hidden&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;h3 id=&quot;shape-editor&quot;&gt;Shape editor&lt;&#x2F;h3&gt;
&lt;p&gt;In a square grid the base shape is the square. If you click on the &#x27;+&#x27; button bellow left, it opens the &amp;quot;Shape Editor&amp;quot;. Here you are presented with a grid made of lines and circles. This is where you customize your square. The intersections are automatically calculated to help you create your shapes. You as an artist&#x2F;designer only need to connect the dots and build your shape.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;shape_editor.png&quot; alt=&quot;Just connect the dots&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;You can pile many shapes on top of each other and change their colors.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;shape_editor_pile.png&quot; alt=&quot;Several sub-shapes on the same shape&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Time is an important aspect, you can go back to any previous state of your shapes and re-edit them from there.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;shape_editor_travel.png&quot; alt=&quot;Several sub-shapes on the same shape&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;After your shape is created you can start painting with it.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;shape_editor_paint.png&quot; alt=&quot;Paint your new shape on the main grid&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Or create other color variations of it on the &#x27;+&#x27; button to the right.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;shape_editor_colors.png&quot; alt=&quot;Create several color variations for your shape&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;h3 id=&quot;tile-patterns&quot;&gt;Tile Patterns&lt;&#x2F;h3&gt;
&lt;p&gt;I have asked in reddit about software to create tile patterns. A few answers came up but none quite filled my taste. I used this as a motivation to implement automatic tile patterns in Grid Generator.&lt;&#x2F;p&gt;
&lt;p&gt;In the menu just click on the &amp;quot;pattern&amp;quot; icon, and then on the &amp;quot;grid&amp;quot;. A blue frame shows up where you can paint inside and everything gets repeated outside.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;grid_pattern.png&quot; alt=&quot;The pattern frame&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;You can drag the corners of the blue frame to adjust your pattern to your drawing and create different patterns with white spaces.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;grid_pattern_tri.png&quot; alt=&quot;A triangular pattern&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;h3 id=&quot;replay-your-art&quot;&gt;Replay your art&lt;&#x2F;h3&gt;
&lt;p&gt;After having created something cool you can publish it to share with your friends. Publishing an artwork makes it publicly available in its own page.&lt;&#x2F;p&gt;
&lt;p&gt;In there you will see a big &amp;quot;play&amp;quot; button that will replay your creative process until the final state is reached.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;gridgenerator.com&#x2F;p&#x2F;13&quot;&gt;Check it out.&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;h3 id=&quot;remix-it&quot;&gt;Remix it&lt;&#x2F;h3&gt;
&lt;p&gt;You can pick any state of the art being replayed and remix your own version from there on. You can easily create your variations by clicking on the remix button (&amp;quot;Change It&amp;quot; on the bottom).&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;remix_grid.png&quot; alt=&quot;Remix other works and create variations&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;h3 id=&quot;export&quot;&gt;Export&lt;&#x2F;h3&gt;
&lt;p&gt;Exporting is currently the only paid feature of Grid Generator. My logic to make this a paid feature was that you can support the further development of this app if you are producing anything of value with it.&lt;&#x2F;p&gt;
&lt;p&gt;In the future I am planning to make this a free feature by adding other sources of revenue like instant product creations with your art (bags, t-shirts, etc...) and even selling packs of specially crafted grids.&lt;&#x2F;p&gt;
&lt;p&gt;After paying you can export your work as SVG. SVG is a vector format that is very prone to rounding errors and aliasing, so I also implemented exporting your works as high-res PNG&#x27;s that solve these issues.&lt;&#x2F;p&gt;
&lt;p&gt;Another possibility you have is to export your creative process as GIF or MP4, saving you the hard work of screen recording and editing.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;upcoming-features&quot;&gt;Upcoming features&lt;&#x2F;h2&gt;
&lt;p&gt;The next version (v1) will mostly see UI&#x2F;UX improvements (imo those are critically needed) and some small features with these, like:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Possibility to clear your shapes in the shape editor&lt;&#x2F;li&gt;
&lt;li&gt;Rough onboarding&lt;&#x2F;li&gt;
&lt;li&gt;Slightly better menus and pages&lt;&#x2F;li&gt;
&lt;li&gt;Facebook login&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;After these I am planning some major stuff like:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Stroke support in shapes&lt;&#x2F;li&gt;
&lt;li&gt;Background images in shapes&lt;&#x2F;li&gt;
&lt;li&gt;Layers&lt;&#x2F;li&gt;
&lt;li&gt;Color picker enhancements&lt;&#x2F;li&gt;
&lt;li&gt;Triangular grids and shapes&lt;&#x2F;li&gt;
&lt;li&gt;Custom base grid editor (create any kind of base grid)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;Try it and if you feel inspired tell me which features you would like to see most.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;gridgenerator.com&quot;&gt;https:&#x2F;&#x2F;gridgenerator.com&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;h2 id=&quot;conclusion&quot;&gt;Conclusion&lt;&#x2F;h2&gt;
&lt;p&gt;In its current state Grid Generator is very raw. I did a lot of compromises to get here but the idea is very close to its initial inception in my head from a couple of years ago. Along the way I had the help and feedback of amazing people. I have some upcoming posts planned on them. They helped a lot of this feel way less lonely and in some points I think they believed more in it than me :)&lt;&#x2F;p&gt;
&lt;p&gt;Alas &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;HugoDaniel&#x2F;gridgenerator&quot;&gt;everything is open source&lt;&#x2F;a&gt; and I am going to start using GitHub bells and whistles in its further development.&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Eviction and Debt</title>
        <published>2018-07-04T00:00:00+00:00</published>
        <updated>2018-07-04T00:00:00+00:00</updated>
        <author>
          <name>Unknown</name>
        </author>
        <link rel="alternate" href="https://hugodaniel.com/posts/eviction-and-debt/" type="text/html"/>
        <id>https://hugodaniel.com/posts/eviction-and-debt/</id>
        
        <content type="html">&lt;p&gt;The last 6 months?&lt;&#x2F;p&gt;
&lt;p&gt;Rents rising, IRS, grants and the version 0 of my personal project&lt;&#x2F;p&gt;
&lt;h2 id=&quot;a-lisbon-story-part-i-eviction&quot;&gt;A Lisbon Story (part I - eviction)&lt;&#x2F;h2&gt;
&lt;p&gt;Renting cycles have always happened. In certain cities you can even map whole migrations as they trend and landlords surf the wave of higher rent prices for at least the same level of preocupations.&lt;&#x2F;p&gt;
&lt;p&gt;Roughly 18 years ago I moved to Lisbon to study. For me it represented moving away from my village into the unknown. More than going to a big school where I did not know anyone. It was the city that drove my fears and desire to explore and know more. To wander and find new neighborhoods with different cultures and habits than mine.&lt;&#x2F;p&gt;
&lt;p&gt;Nowadays these neighborhoods still exist, but their inhabitants have mostly been evicted and moved to the outskirts. We branded this as &amp;quot;gentrification&amp;quot;. Gentlemen move to the place where you were previously living (notice that you are excluded from the gentlemen group by definition).&lt;&#x2F;p&gt;
&lt;p&gt;In Lisbon this did not happen softly. Most of my friends are now evicted. The red flags are everywhere.&lt;&#x2F;p&gt;
&lt;p&gt;My landlord sent me an SMS the other day. He said he wanted to speak to me about some important matters. I cannot think of anything good coming from a conversation with a landlord. He evicted me. Why charge &#x27;n&#x27; to normal people when you can charge gentlemen &#x27;n&#x27;*4? No problem, time for a change anyway.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;a-lisbon-story-part-ii-debt&quot;&gt;A Lisbon Story (part II - debt)&lt;&#x2F;h2&gt;
&lt;p&gt;The city has been a major part of my lifestyle for the last 18 years. I managed to reduce my cost of living to under €700&#x2F;month and still save a little. This was in no small part due to my rent. It might seem crazy but some neighbors of mine even manage to spend less through heroic frugal tactics.&lt;&#x2F;p&gt;
&lt;p&gt;With this I decided to collect my savings from the bank and dedicate full-time to develop a painting application that could help me and eventually others to do shapes and patterns like the ones from tiles.&lt;&#x2F;p&gt;
&lt;p&gt;Grid Generator has been a central part of my life since then.&lt;&#x2F;p&gt;
&lt;p&gt;Somewhere on my journey I managed to get a grant to work on it. With the obligation to build a company shortly after it finished. It has ended in May.&lt;&#x2F;p&gt;
&lt;p&gt;In an unrelated event to the eviction I got contacted by the IRS roughly on the same week that I got evicted. Because I was using my savings before I am old and&#x2F;or dying from a terminal disease it seems that I now have to pay them a cumulative 10% of some amount for each year that I saved.&lt;&#x2F;p&gt;
&lt;p&gt;After some calculations the IRS lady told me that the total I needed to pay them was more money than I had in my account. Fuck. I mean: FUCK. It is said that in Portugal you can owe money to a lot of people. Rich people. Banks. Mafia. Drug dealers. But you simply cannot owe money to the IRS. Ever. Dark stories are told about people who once owed them money.&lt;&#x2F;p&gt;
&lt;p&gt;&amp;quot;Fortunately&amp;quot; the Portuguese IRS shady tactics are so common that they allow you to pay in small parts and through some other weird mechanics that delay your entry into their shitlist.&lt;&#x2F;p&gt;
&lt;p&gt;The words of a friend that is into cryptocurrencies echoed in my mind: &lt;em&gt;&amp;quot;The current economic system was not made to help you save money&amp;quot;&lt;&#x2F;em&gt;. How I wish he was wrong.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;forward-momentum&quot;&gt;Forward momentum&lt;&#x2F;h2&gt;
&lt;p&gt;Grid Generator has been my testbed for a lot of strange experimentations and ideas. Not only in the approach to solve the problems it intends (shape editor, color picker, etc...) but specially in the code.&lt;&#x2F;p&gt;
&lt;p&gt;I have rewritten it completely from scratch some 4 times with varying degrees of (in)success. In its current state it is done with typescript and infernojs. While in its previous incarnations used react, vanilla js, immutable js and even did a quick stroll through purescript. It currently runs on top of DragonflyBSD.&lt;&#x2F;p&gt;
&lt;p&gt;The project is online and ready to use at &lt;a href=&quot;https:&#x2F;&#x2F;gridgenerator.com&quot;&gt;https:&#x2F;&#x2F;gridgenerator.com&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;I call it &amp;quot;version 0&amp;quot; as it lacks a lot of features (like onboarding) and has all that coder design&#x2F;UX that you hate.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;conclusion&quot;&gt;Conclusion&lt;&#x2F;h2&gt;
&lt;p&gt;To sum it up, I now have four major problems to solve:&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;Get money to pay the debt&lt;&#x2F;li&gt;
&lt;li&gt;Get a house to live&lt;&#x2F;li&gt;
&lt;li&gt;Build a company (with what money?)&lt;&#x2F;li&gt;
&lt;li&gt;Continue improving Grid Generator and start talking about it&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;p&gt;I am shifting some of the energy away from Grid Generator to focus it on the first two of these problems and see how it goes.&lt;&#x2F;p&gt;
&lt;p&gt;I am also going to invest into propaganda now and try to walk the thin line of project promotion and SPAM.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;PATTERN.png&quot; alt=&quot;A Pattern made with Grid Generator&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>WebSummit opening night. Sharing the stage with Paddy Cosgrave</title>
        <published>2017-11-06T00:00:00+00:00</published>
        <updated>2017-11-06T00:00:00+00:00</updated>
        <author>
          <name>Unknown</name>
        </author>
        <link rel="alternate" href="https://hugodaniel.com/posts/websummit-opening-night/" type="text/html"/>
        <id>https://hugodaniel.com/posts/websummit-opening-night/</id>
        
        <content type="html">&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;abertura02.jpg&quot; alt=&quot;Paddy Cosgrave taking a selfie on the Center Stage during the opening night&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;WebSummit first day came with a mix of up and downs sprinkled with the duality of having the desire to scream with euphoria versus admiting that the event is nothing special to avoid stressing about it.&lt;&#x2F;p&gt;
&lt;p&gt;This week I was contacted by their team to go up on the main stage with some of the startups that were present in last week event with the President Marcelo Rebelo de Sousa. That gave me cold sweats even though I knew it was nothing special. The idea was just to go on stage when they called for us and be there representing our startup scene.&lt;&#x2F;p&gt;
&lt;p&gt;Early in the morning, I went to the venue with high hopes of doing my registration and never think about WebSummit until the main stage opening night thing. Unfortunately they told me that registration would only happen after 12h, which made me go back home to spend the rest of the day printing and cutting flyers and cards to hopefully distribute to people at the event.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;abertura05.jpg&quot; alt=&quot;Entrepreneurs in the opening night, on the left I didn&#x27;t get the contact, on the right is Dinara Rakhimbaeva of ExpoChat&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Later at night, I had the meeting point with the WebSummit team nearby the pavillion where the opening night was going to happen. They routed all of us through a tunnel that gave access to the spectators area of the pavillion. From the speakers that attended I really enjoyed Margrethe Vestager, the european comissioner for competition, she spoke about markets and taxes to tech companies. I also liked a lot of the speech that António Guterres gave, the former prime-minister of Portugal and now secretary-general of the United Nations who spoke about the biggest difficulty of our generation: climate change.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;abertura04.jpg&quot; alt=&quot;António Costa waiting to press the button&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;The cerimony was closed with the current prime-minister of Portugal, António Costa, and the mayor of Lisbon, Fernando Medina, who both pressed in a button that made a lot of confettis cannons explode. Before that they invited the portuguese startups the stage, where I was included. I used the chance to take a few pictures and wave at Guterres and Margrethe when by chance they looked at me.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;abertura03.jpg&quot; alt=&quot;WebSummit starting&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Grid Generator First Stand</title>
        <published>2017-11-03T00:00:00+00:00</published>
        <updated>2017-11-03T00:00:00+00:00</updated>
        <author>
          <name>Unknown</name>
        </author>
        <link rel="alternate" href="https://hugodaniel.com/posts/gridgenerator-first-stand/" type="text/html"/>
        <id>https://hugodaniel.com/posts/gridgenerator-first-stand/</id>
        
        <content type="html">&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;beato1.jpg&quot; alt=&quot;Beato Creative Hub&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;About a month ago I was planning my WebSummit approach when I realized that I had never been to such an event. Much less have a stand of my project there.&lt;&#x2F;p&gt;
&lt;p&gt;That was when I started searching for opportunities to be at events. To train and prepare for the WebSummit.&lt;&#x2F;p&gt;
&lt;p&gt;Back then I got an invitation to participate in the first aniversary of StartUp Portugal, the portuguese state entity that acts upon the development of our entrepreneurial ecosystem.&lt;&#x2F;p&gt;
&lt;p&gt;My immediate decision was to say &amp;quot;yes&amp;quot; and use this oportunity to train the speach&#x2F;pitch&#x2F;posture in a faire stand.
The event took place in the &lt;a href=&quot;http:&#x2F;&#x2F;www.startuplisboa.com&#x2F;hcb&quot;&gt;&amp;quot;beato creative hub&amp;quot;&lt;&#x2F;a&gt;, an old military industrial area that was abandoned for years until they decided to turn it into the next big thing in Lisbon.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;beato2.jpg&quot; alt=&quot;The bag reads &amp;quot;Military Maintenance&amp;quot;, as this was an old factory related to the portuguese military&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Access wise it is near the river, and although it has a nearby bike path, the entrance is on the inner side, making it difficult to get there on bike or on foot (cars tend to speed and the sidewalks are narrow in that area of the city). The surrounding neighborhood used to be neglected and poor, but now it is thriving with Lisboners looking for different places to hangout due to the tourist pressure present in past common areas of the city (bairro alto, cais do sodré, etc...).&lt;&#x2F;p&gt;
&lt;p&gt;That day (4th of October) I arrived a bit earlier than expected to setup my stand and after it I drank a beer to chill out while making my first contacts with the other stands as they arrived.&lt;&#x2F;p&gt;
&lt;p&gt;The whole thing was novelty to me, I was there with &lt;a href=&quot;https:&#x2F;&#x2F;gridgenerator.com&quot;&gt;Grid Generator&lt;&#x2F;a&gt;, the bootstrapped project I&#x27;ve been working on, and things proceeded in three waves during the day:&lt;&#x2F;p&gt;
&lt;h2 id=&quot;wave-1-lots-of-people-in-suits&quot;&gt;Wave 1: Lots of people in suits&lt;&#x2F;h2&gt;
&lt;p&gt;After a while lots of people in suits showed up. Most of these were just walking around while keeping a safe distance from the stands. Enough not to get approached by any of us there standing.
Since I was there to take the most of it, I grabed a few flyers and actively went to them to talk about my amazing project.&lt;&#x2F;p&gt;
&lt;p&gt;To my shock they were not interested in listening to what I had to say. This was not even a problem with my pitch because they turned me down right after I showed up with a smile and said &amp;quot;Hello, can I talk to you about my project ?&amp;quot;. Maybe it is a problem with my face.&lt;&#x2F;p&gt;
&lt;p&gt;If they were not there for the startups and the people working on them then what were they there for ?&lt;&#x2F;p&gt;
&lt;p&gt;I decided to deal with it and move along. I guess negative reactions should be expected when going to these events with an active posture (seeking people to speak, instead of waiting for them to speak with you).&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;me_beato.jpg&quot; alt=&quot;Me in my stand&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;h2 id=&quot;wave-2-nobody&quot;&gt;Wave 2: Nobody&lt;&#x2F;h2&gt;
&lt;p&gt;The event then had some talks. Unfortunately they were scheduled to happen in a different building than the one we were in. So suddenly everybody left and disappeared from sight. A few important politicians showed up to talk (I saw them at a glimpse) and we were left alone: should I leave my stand unattended ? I decided to stay and hold my ground just in case somebody showed up.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;talks_beato.jpg&quot; alt=&quot;Talks happening in another pavillion&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;During this time my motivation was going down and approaching a local minimum for that day. &lt;em&gt;&amp;quot;I see... this is mostly a political event.&amp;quot;&lt;&#x2F;em&gt;&lt;&#x2F;p&gt;
&lt;p&gt;That was when I met Pedro from &lt;a href=&quot;http:&#x2F;&#x2F;othersigns.pt&#x2F;&quot;&gt;othersigns.pt&lt;&#x2F;a&gt;. He had decided to check out the projects while we were mostly empty. I pitched him when he interrupted and decided to criticise me about my pitch approach:&lt;&#x2F;p&gt;
&lt;p&gt;&lt;em&gt;&amp;quot;Why are you talking about your project like it is targeted for the design industry ? I can clearly see it is not, yet you talk about it like it is&amp;quot;&lt;&#x2F;em&gt;&lt;&#x2F;p&gt;
&lt;p&gt;We talked. One hour later he had convinced me to look at it from a different angle and try to push the real innovative things about my project and sell it as a design tool for non-designers. Something targeted for the creative crowd that needs to do some design but don&#x27;t know&#x2F;want to work with complex pro tools like the ones professional designers use.&lt;&#x2F;p&gt;
&lt;p&gt;Lots of different possibilities and approaches for &lt;a href=&quot;https:&#x2F;&#x2F;gridgenerator.com&quot;&gt;Grid Generator&lt;&#x2F;a&gt; came into conversation. It was fun and made the event worthwhile.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;wave-3-some-important-people&quot;&gt;Wave 3: Some important people&lt;&#x2F;h2&gt;
&lt;p&gt;After the talks ended in the other pavillion a hoard of scouts in suits approached our stands and told the people next to me, in an important tone, that they would have to speak with the secretary of state for the industry.
It happenened. She talked to them, took some photos, and promptly decided to ignore most of us in the other stands, talking only to a select few. The other politicians didn&#x27;t bother to show up.&lt;&#x2F;p&gt;
&lt;p&gt;Startups were apparently the boring part in this startup event. &lt;a href=&quot;https:&#x2F;&#x2F;hugodaniel.com&#x2F;posts&#x2F;meeting-the-president&#x2F;&quot;&gt;Marcelo Rebelo de Sousa, yesterday,&lt;&#x2F;a&gt; was kind enough to give voice to anyone who wanted to speak.&lt;&#x2F;p&gt;
&lt;p&gt;After this I went out. Grabbed a slice of the aniversary cake that they were eating outside (even the cake was outside the stands area), and had another beer while meditating on what had happened. After this I left to dance &lt;a href=&quot;https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=9DYElqcREXc&quot;&gt;Kizomba&lt;&#x2F;a&gt; in another part of the city.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;conclusion&quot;&gt;Conclusion&lt;&#x2F;h2&gt;
&lt;p&gt;I decided to participate in this event in order to train for our WebSummit stand. Overall it was a fun experience albeit the first of its kind I had. I am not sure I would want to repeat it again if given the chance.&lt;&#x2F;p&gt;
&lt;p&gt;It definetely helped me learn a few things about being in a stand and craft a more prepared approach for the bigger event that is the WebSummit.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;aniv1.jpg&quot; alt=&quot;Me at the first aniversay of StarUp Portugal, shortly after the event ended&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Here is a quick list of things this helped me learn about being in a stand, some of these are pretty obvious but still worth to keep in mind:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Take an active approach (approach and talk to people). I talked to more people than any of the other stands there.&lt;&#x2F;li&gt;
&lt;li&gt;Don&#x27;t grudge if people don&#x27;t want to talk to you (it is normal)&lt;&#x2F;li&gt;
&lt;li&gt;Your product demo is not the most important part. People will not get to it if your pitch is not convincing.&lt;&#x2F;li&gt;
&lt;li&gt;Don&#x27;t focus on pitching features. Pitch a story instead. It grabs attention better.&lt;&#x2F;li&gt;
&lt;li&gt;Keep a log of e-mails and reach them a few days later (ask people for their e-mails and not the other way around: don&#x27;t give your e-mail expecting to be contacted: you won&#x27;t be).&lt;&#x2F;li&gt;
&lt;li&gt;Eye-candy is important, the stands with the better visual looks got most of the attention.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;Hope this helps and see you at the WebSummit next week &lt;a href=&quot;https:&#x2F;&#x2F;hugodaniel.com&#x2F;posts&#x2F;lisbon-as-an-inspiration-for-my-project&#x2F;&quot;&gt;in Lisbon&lt;&#x2F;a&gt;, also take a look at some cool &lt;a href=&quot;https:&#x2F;&#x2F;hugodaniel.com&#x2F;posts&#x2F;where-do-local-hackers-eat-in-lisbon&#x2F;&quot;&gt;places to eat in the touristic area of Lisbon&lt;&#x2F;a&gt; :)&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Meeting the President</title>
        <published>2017-11-02T00:00:00+00:00</published>
        <updated>2017-11-02T00:00:00+00:00</updated>
        <author>
          <name>Unknown</name>
        </author>
        <link rel="alternate" href="https://hugodaniel.com/posts/meeting-the-president/" type="text/html"/>
        <id>https://hugodaniel.com/posts/meeting-the-president/</id>
        
        <content type="html">&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;inside_coches2.jpg&quot; alt=&quot;He talked to us in the old coach museum&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;A few days ago I got an e-mail from the presidency inviting me to go to an event with the president of Portugal, Marcelo Rebelo de Sousa. This came within the WebSummit context, he wanted to be personally with some of the portuguese startups that are going to attend the WebSummit next week.&lt;&#x2F;p&gt;
&lt;p&gt;This event would take place in the old National Coach Museum in the near future: today.&lt;&#x2F;p&gt;
&lt;p&gt;I guess that I got it because of my participation on the &amp;quot;Road2WebSummit&amp;quot; series of events that I was selected to be part of. Road2WebSummit is focused in coaching (pun intended) startups so they can be well prepared for the WebSummit. It tries to fill the gap of our lack of an official &amp;quot;entrepreneur&amp;quot; culture, although we do have a lot of background at being unofficially entrepreneurs as it comes attached to being a poor country in a rich continent. Now we just need to know how to capitalize on that and channel it through proper &amp;quot;startupian&amp;quot; gymnastics.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;coches.jpg&quot; alt=&quot;The entrance&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;The invitation added that the dresscode was a &amp;quot;dark suit&amp;quot;. That was a problem for me since I don&#x27;t have any suits and did not intend to buy or loan one. I decided to dress somewhat nicely with what I had around without leaning too much towards informality.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;suits.jpg&quot; alt=&quot;Suits everywhere&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Almost everyone suited-up for the event, which let me feeling a bit out of place initially, but that all went away once inside.&lt;&#x2F;p&gt;
&lt;p&gt;The museum is amazing! I had never been there and kind of regret it since they moved to the new &amp;quot;modern&amp;quot; place next door and closed this one (now labeled the &amp;quot;old&amp;quot; one).&lt;&#x2F;p&gt;
&lt;p&gt;There was still some old coaches around and the ceiling decoration is still beautiful as people always told me it was. At the end they placed chairs for everyone to sit for the speech.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;inside_coches.jpg&quot; alt=&quot;The entrance&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;The president arrived after a few minutes. He talked for a small bit, introduced the economy minister and the websummit people. He is known for his improvisation skills and for the hability to charismatically make quick decisions. After all the personalities had spoken he then passed the word to the startups. Whoever wanted to speak could introduce themselves and their company&#x2F;ideia to everyone else.&lt;&#x2F;p&gt;
&lt;p&gt;Here is the video of his speech (he translates from portuguese to english as he goes).&lt;&#x2F;p&gt;
&lt;video src=&quot;http:&#x2F;&#x2F;media.presidencia.pt&#x2F;videos&#x2F;mrs2017&#x2F;PRMRS_171102_V01_FHD.mp4&quot; width=&quot;100%&quot; controls &#x2F;&gt;
&lt;p&gt;About 90 people talked. That was the number they said, personally I did not count and unfortunately after a while my brain was not able to process any more &amp;quot;ideas&amp;quot; or startup names. I was spilling buzzwords through my ears. I think the winner buzzwords were &amp;quot;AI&amp;quot;, &amp;quot;Machine Learning&amp;quot;, &amp;quot;Disruptive&amp;quot;, &amp;quot;App&amp;quot;, &amp;quot;Intelligent&amp;quot;, &amp;quot;Deep learning&amp;quot;, &amp;quot;3D Printer&amp;quot; and some others I can&#x27;t recall.&lt;&#x2F;p&gt;
&lt;p&gt;Near the end we took a group picture, and before everyone left they gave some drinks and &lt;em&gt;pasteis de belém&lt;&#x2F;em&gt; while Marcelo was being invaded by people taking selfies with him.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;marcelo2.png&quot; alt=&quot;Me, the guy with no suit near the camers, with a blue circle. Marcelo, the president, at front with a red circle&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Overall it was a fun event I even met an ex-teacher from my university that is now trying to work out an idea to increase bike usage in Lisbon.&lt;&#x2F;p&gt;
&lt;p&gt;I hope another opportunity like this happens soon, maybe then I can also take a selfie with the Prez. :D&lt;&#x2F;p&gt;
&lt;p&gt;Meanwhile checkout how &lt;a href=&quot;https:&#x2F;&#x2F;hugodaniel.com&#x2F;posts&#x2F;first-funding-as-a-bootstrapper-in-portugal&#x2F;&quot;&gt;I got to participate&lt;&#x2F;a&gt; in the StartUp Portugal events. If you are here for the WebSummit don&#x27;t be fooled and &lt;a href=&quot;https:&#x2F;&#x2F;hugodaniel.com&#x2F;posts&#x2F;where-do-local-hackers-eat-in-lisbon&#x2F;&quot;&gt;read my recommendations for places to eat&lt;&#x2F;a&gt; in the touristic area.&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Where do local hackers eat in Lisbon</title>
        <published>2017-11-01T00:00:00+00:00</published>
        <updated>2017-11-01T00:00:00+00:00</updated>
        <author>
          <name>Unknown</name>
        </author>
        <link rel="alternate" href="https://hugodaniel.com/posts/where-do-local-hackers-eat-in-lisbon/" type="text/html"/>
        <id>https://hugodaniel.com/posts/where-do-local-hackers-eat-in-lisbon/</id>
        
        <content type="html">&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;kid.jpg&quot; alt=&quot;Picture of a kid in the dark looking for a friend to pass the ball while playing football&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;I don&#x27;t know where hackers (as in infosec wizards) eat in Lisbon. We do have a strong background of using things beyond their intended purpose (we call it &amp;quot;desenrascanço&amp;quot; and it is a basic trait of being born in the culture that has sprung here for centuries).&lt;&#x2F;p&gt;
&lt;p&gt;As is this post is intended for tourists looking for a typical experience.&lt;&#x2F;p&gt;
&lt;p&gt;If you are visiting Lisbon chances are that you will spend your time around the most touristic areas of the city. In this post I want to share with you some places and dishes that we love and are generally ignored by tourists. I don&#x27;t pretend to be Anthony Bourdain or any of those youtubers that don&#x27;t respect what they are eating and only go to fancy restaurants to say in the end that it is cheap and good.
Don&#x27;t fall for that. Be a proper tourist and avoid the &amp;quot;Torre de Belem snowball&amp;quot; at all costs. I have only seen snow 2 times in my life and it was not in Lisbon :D&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;belem_snowball.jpg&quot; alt=&quot;Snowing in Lisbon?&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;In Portugal we always seat to have lunch and dinner. We don&#x27;t eat walking. Traditionally everyone takes at least an hour to have lunch. It is kind of a big deal. People here are very proud of their food. There are many categories of places to eat but locals range them between &amp;quot;fancy restaurant&amp;quot; and &amp;quot;fast-food joint&amp;quot;. Somewhere between these two lies our honorable &lt;em&gt;&amp;quot;tasca&amp;quot;&lt;&#x2F;em&gt; (tavern &amp;lt;= &lt;em&gt;tasca&lt;&#x2F;em&gt; &amp;lt;= simple restaurant). A glorified tavern with a very peculiar set of skills, namely: very good and inexpensive local food.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;what-to-expect&quot;&gt;What to expect&lt;&#x2F;h2&gt;
&lt;p&gt;In a &lt;em&gt;tasca&lt;&#x2F;em&gt; you can expect at least the following:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;No cameras looking over you, the balcony or the employers * Never trust a business that tracks you and&#x2F;or doesn&#x27;t trust their own people&lt;&#x2F;li&gt;
&lt;li&gt;Open kitchen * Take a peek through the open window inside the kitchen and say hi to the cook&lt;&#x2F;li&gt;
&lt;li&gt;Freshly peeled hand-cut fried potatos * For your pleasure&lt;&#x2F;li&gt;
&lt;li&gt;Pressured wine * We split wine into two major groups: white&#x2F;red and then inside this group mature&#x2F;green (or is it the other way around?). Try them all! :)&lt;&#x2F;li&gt;
&lt;li&gt;A balcony if you are just warming your stomach * Yes, we sometimes eat standing at the balcony if it is something really fast&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;in-the-heart-of-lisbon&quot;&gt;In the heart of Lisbon&lt;&#x2F;h2&gt;
&lt;p&gt;Here are 4 &lt;em&gt;tascas&lt;&#x2F;em&gt; that I can think from the top of my head and which I recommend in the touristic area of the city. Don&#x27;t expect to see &amp;quot;hackers&amp;quot; as in computer wizards in them but typical portuguese folks eating. Chose the one near you when you get hungry.&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;www.google.pt&#x2F;maps&#x2F;place&#x2F;Casa+Das+Bifanas&#x2F;@38.7141819,-9.1400812,17z&#x2F;data=!3m1!4b1!4m5!3m4!1s0xd1933877a14a101:0x58658df29b0791b0!8m2!3d38.7141769!4d-9.1378849&quot;&gt;&amp;quot;Casa das Bifanas&amp;quot; in Rossio&lt;&#x2F;a&gt; - &lt;img src=&quot;&#x2F;images&#x2F;bifanas.jpg&quot; alt=&quot;Formely known as &amp;quot;The king of Bifanas&amp;quot;&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;www.google.pt&#x2F;maps&#x2F;place&#x2F;Popular+Do+Capelo&#x2F;@38.7098328,-9.1408684,20z&#x2F;data=!4m12!1m6!3m5!1s0xd1933877a14a101:0x58658df29b0791b0!2sCasa+Das+Bifanas!8m2!3d38.7141769!4d-9.1378849!3m4!1s0xd19347ecf1cf809:0xb3685b3298796599!8m2!3d38.7097915!4d-9.1406129&quot;&gt;&amp;quot;Popular do Capelo&amp;quot; in Chiado&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;www.google.pt&#x2F;maps&#x2F;place&#x2F;O+Trevo&#x2F;@38.7116017,-9.1461413,17z&#x2F;data=!4m5!3m4!1s0xd19347fa8fe09bd:0xd6fe73efee2fb6fc!8m2!3d38.710865!4d-9.1430943&quot;&gt;&amp;quot;O Trevo&amp;quot; in Pc. Camoes&lt;&#x2F;a&gt; - &lt;img src=&quot;&#x2F;images&#x2F;otrevo1.jpg&quot; alt=&quot;O trevo&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;www.google.pt&#x2F;maps&#x2F;place&#x2F;A+Parreirinha+Do+Rato&#x2F;@38.719569,-9.154936,19z&#x2F;data=!4m12!1m6!3m5!1s0xd19347fa8fe09bd:0xd6fe73efee2fb6fc!2sO+Trevo!8m2!3d38.710865!4d-9.1430943!3m4!1s0xd19337b1c2560f7:0x10c06dc141131fd5!8m2!3d38.7196609!4d-9.1548474&quot;&gt;&amp;quot;A Parreirinha do Rato&amp;quot; in Rato&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;things-to-keep-in-mind&quot;&gt;Things to keep in mind&lt;&#x2F;h3&gt;
&lt;p&gt;The main reason you step inside a &lt;em&gt;tasca&lt;&#x2F;em&gt; is the food. The second main reason is also the food. The list of reasons is long and every item of the list is food.
At the end of the list, down in the footer in a small font are lots of little details that you happen to notice when you are a regular client. These details are infinite and a new one pops out every time you step inside a &lt;em&gt;tasca&lt;&#x2F;em&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;During lunch hour these are very busy places. The waiters are typically running and rushing while being seriously professional. They are in a no-bullshit mode, they know you want to eat and they know you will love the food.&lt;&#x2F;p&gt;
&lt;p&gt;The kitchen can close outside of eating hours and only small meals are served.&lt;&#x2F;p&gt;
&lt;p&gt;They are somewhat noisy and you can expect to see people screaming if there is a football match going on.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;what-to-eat&quot;&gt;What to eat&lt;&#x2F;h3&gt;
&lt;p&gt;Dishes are more or less the same in most &lt;em&gt;tascas&lt;&#x2F;em&gt;. Try these.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;strong&gt;Starter&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Croquete (meat roll)&lt;&#x2F;li&gt;
&lt;li&gt;Chamuça (triangle with curry chicken)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;&lt;strong&gt;Soup&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Caldo Verde (kale soup)&lt;&#x2F;li&gt;
&lt;li&gt;Sopa de legumes (vegetables soup)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;&lt;strong&gt;Fish&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Polvo à lagareiro (octopus with olive oil)&lt;&#x2F;li&gt;
&lt;li&gt;Peixe espada (swordfish)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;&lt;strong&gt;Meat&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Secretos de porco (pork)&lt;&#x2F;li&gt;
&lt;li&gt;Bife à casa (steak)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;&lt;strong&gt;Drink&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Beer&lt;&#x2F;li&gt;
&lt;li&gt;Jar of wine (ask for the pressured white wine if you want the full experience)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;&lt;strong&gt;Dessert&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Arroz doce (sweet rice)&lt;&#x2F;li&gt;
&lt;li&gt;Café (ask for an extra &lt;em&gt;bagaço&lt;&#x2F;em&gt; if you want the full experience) * &lt;img src=&quot;&#x2F;images&#x2F;bagaco.jpg&quot; alt=&quot;Café and bagaço&quot; &#x2F;&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;If you just want a snack or something other than a full-meal, then try out our &amp;quot;Bifana&amp;quot;. A steak sandwich. Goes well with beer.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;intro-to-portuguese-pastery&quot;&gt;Intro to Portuguese pastery&lt;&#x2F;h2&gt;
&lt;p&gt;Our pastery is a bit different from the european cakes (because we never saw ourselves as a part of europe until +-40 years ago).
We have mostly french influences and also things from all over the world but to keep it short you can generally find fresh original cakes mostly made with sweet egg yolk. We put egg yolk in most of our cake recipes. I have heard several explanations for this, the most convincing one for me is that in convents nuns used the egg light to iron and starch the church clothes, then to avoid wasting the yolk they invented all of these different cakes that you can see in most cafes.&lt;&#x2F;p&gt;
&lt;p&gt;Our pastery shifts radically in some seasons, we have a whole range of cakes and snacks that are only done in christmas and some in easter.&lt;&#x2F;p&gt;
&lt;p&gt;You can find some brazillian pastery, which are heavy in condensed milk (sugar + milk cooked under pressure) and some variations of these with our traditional egg yolk. Just try whatever pops your eye :)&lt;&#x2F;p&gt;
&lt;h2 id=&quot;conclusion&quot;&gt;Conclusion&lt;&#x2F;h2&gt;
&lt;p&gt;Explore Lisbon, it has many secrets and hidden gems. Our ways might seem a bit strange, clumsy and hard to get into at first, but peeking through the sweet spots can reveal a humble, seasoned and balanced culture (with earned scars of fighting hard against slavery, discrimination, inequality and dictatorship&#x2F;power surges). If you are here next week for the WebSummit lets hang out and have a drink :) &lt;a href=&quot;https:&#x2F;&#x2F;hugodaniel.com&#x2F;posts&#x2F;about&#x2F;&quot;&gt;Here is my contact at the bottom&lt;&#x2F;a&gt;. Take a look at why I think &lt;a href=&quot;https:&#x2F;&#x2F;hugodaniel.com&#x2F;posts&#x2F;lisbon-as-an-inspiration-for-my-project&#x2F;&quot;&gt;Lisbon is an inspiration&lt;&#x2F;a&gt; for my project.&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>My first funding as a bootstrapper in Portugal</title>
        <published>2017-10-31T00:00:00+00:00</published>
        <updated>2017-10-31T00:00:00+00:00</updated>
        <author>
          <name>Unknown</name>
        </author>
        <link rel="alternate" href="https://hugodaniel.com/posts/first-funding-as-a-bootstrapper-in-portugal/" type="text/html"/>
        <id>https://hugodaniel.com/posts/first-funding-as-a-bootstrapper-in-portugal/</id>
        
        <content type="html">&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;startupvoucher.jpg&quot; alt=&quot;StartUp Voucher ad, it reads: &amp;quot;What if your idea could turn into a company ?&amp;quot;&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;In April 2016 I quit from the startup I was working to finally do a personal project. Back then the questions everyone asked me were mostly about money &lt;em&gt;&amp;quot;How are you going to live ?&amp;quot;&lt;&#x2F;em&gt;.
Even though rent prices in Lisbon have been skyrocketing due to tourism increase and the coming of WebSummit I always had a frugal economical lifestyle. I don&#x27;t have loans, I don&#x27;t have &amp;quot;luxuries&amp;quot; and I can keep my monthly spendings to what some people view as an heroically low value.
Looking back it was somewhat natural that when a set of conditions met I thought: &amp;quot;it&#x27;s now or never&amp;quot;.&lt;&#x2F;p&gt;
&lt;p&gt;I spent some months wondering about what kind of project to do. I knew I wanted something ambitious but I got easily lost in the objectives and purpose of the project. With time I realized that the money I had saved was not going to allow me to survive long enough to do a first version of the product and release it in the market.
That made me start looking around for investment, preferably some that did not imply selling part of the company (lost fund). That was when I found about StartUp Voucher.&lt;&#x2F;p&gt;
&lt;p&gt;Very briefly, StartUp Voucher is a community fund from the European Union that is run by the Portuguese Gov. with the purpose of helping out companies in &amp;quot;idea stage&amp;quot;. Pragmatically this means I get 690EUR&#x2F;month for 12 months plus the help of an incubator and a mentor.&lt;&#x2F;p&gt;
&lt;p&gt;This funding is particularly targeted for ideas outside of the most developed areas of the country. In spite of currently living in Lisbon I was born and raised in Alenquer, where my family still resides. To apply for this fund I made the headquarters of my project there, a place I love and visit on a weekly basis.&lt;&#x2F;p&gt;
&lt;p&gt;To further enhance my application I read through the whole 100 page &lt;a href=&quot;https:&#x2F;&#x2F;www.portugal2020.pt&#x2F;Portal2020&#x2F;Media&#x2F;Default&#x2F;Docs&#x2F;EstrategiasEInteligente&#x2F;EREI%20Centro.pdf&quot;&gt;&amp;quot;Research and Innovation Strategies for Smart Specialisation&amp;quot; report (RIS3)&lt;&#x2F;a&gt; for my region. That report made me notice that a software tool for grid based drawings could have a lot of impact in several practical applications for the exporting industries in the Center of Portugal. Like ceramics, textiles and creative industries.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;gridgenerator.com&quot;&gt;&lt;img src=&quot;https:&#x2F;&#x2F;gridgenerator.com&#x2F;img&#x2F;logo&#x2F;grid_generator_logo.png&quot; alt=&quot;The logo&quot; &#x2F;&gt;&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;When Lisbon was boiling with WebSummit 2016 I was working full-time to apply to this fund. It took me a few weeks and in December I finally finished the application and sent it. After a some months I got the news that my project was one of the 245 chosen to be on the StartUp Voucher. Since around May 2017 that I have been getting 690EUR each month and working in full force on this project.&lt;&#x2F;p&gt;
&lt;p&gt;During this time I have been using their support to fine-tune the project in many ways and prepare myself for the first steps on the market. WebSummit is also being promoted by the StartUp Voucher who encourages all tech startups to try to attend.&lt;&#x2F;p&gt;
&lt;p&gt;Right now I have a working demo that have been using with some friends and potential users and I am planning to start looking for partnerships in early 2018.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;hugodaniel.com&#x2F;posts&#x2F;why-i-decided-to-go-to-the-websummit&#x2F;&quot;&gt;In this link&lt;&#x2F;a&gt; I explain why I decided to go to the WebSummit this year.&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>How useful is the JavaScript Set</title>
        <published>2017-10-25T00:00:00+00:00</published>
        <updated>2017-10-25T00:00:00+00:00</updated>
        <author>
          <name>Unknown</name>
        </author>
        <link rel="alternate" href="https://hugodaniel.com/posts/how-useful-is-the-javascript-set/" type="text/html"/>
        <id>https://hugodaniel.com/posts/how-useful-is-the-javascript-set/</id>
        
        <content type="html">&lt;p&gt;In most languages Set&#x27;s have a clear strong use case: fast union, intersection and difference operations; unfortunately in JavaScript these operations are not readily defined so as an exercise I am going to raise some questions and try to answer them in this post.&lt;&#x2F;p&gt;
&lt;p&gt;All code is run on Firefox Developer Edition 57.0b11 (64-bit) in macOS.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;initialization&quot;&gt;Initialization&lt;&#x2F;h2&gt;
&lt;p&gt;Most of this post will be used to compare &lt;a href=&quot;https:&#x2F;&#x2F;developer.mozilla.org&#x2F;en-US&#x2F;docs&#x2F;Web&#x2F;JavaScript&#x2F;Reference&#x2F;Global_Objects&#x2F;Set&quot;&gt;Set()&lt;&#x2F;a&gt; with &lt;a href=&quot;https:&#x2F;&#x2F;developer.mozilla.org&#x2F;en-US&#x2F;docs&#x2F;Web&#x2F;JavaScript&#x2F;Reference&#x2F;Global_Objects&#x2F;Array&quot;&gt;Array()&lt;&#x2F;a&gt; for some common operations. To initialize a Set() I will be constructing it with an Array.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;js&quot; style=&quot;background-color:#151515;color:#e8e8d3;&quot; class=&quot;language-js &quot;&gt;&lt;code class=&quot;language-js&quot; data-lang=&quot;js&quot;&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;const &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;set1 &lt;&#x2F;span&gt;&lt;span&gt;= new &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;Set&lt;&#x2F;span&gt;&lt;span&gt;([&lt;&#x2F;span&gt;&lt;span style=&quot;color:#cf6a4c;&quot;&gt;1&lt;&#x2F;span&gt;&lt;span&gt;,&lt;&#x2F;span&gt;&lt;span style=&quot;color:#cf6a4c;&quot;&gt;2&lt;&#x2F;span&gt;&lt;span&gt;,&lt;&#x2F;span&gt;&lt;span style=&quot;color:#cf6a4c;&quot;&gt;3&lt;&#x2F;span&gt;&lt;span&gt;,&lt;&#x2F;span&gt;&lt;span style=&quot;color:#cf6a4c;&quot;&gt;4&lt;&#x2F;span&gt;&lt;span&gt;,&lt;&#x2F;span&gt;&lt;span style=&quot;color:#cf6a4c;&quot;&gt;5&lt;&#x2F;span&gt;&lt;span&gt;,&lt;&#x2F;span&gt;&lt;span style=&quot;color:#cf6a4c;&quot;&gt;6&lt;&#x2F;span&gt;&lt;span&gt;]);
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;set1&lt;&#x2F;span&gt;&lt;span&gt;.has(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#cf6a4c;&quot;&gt;5&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; true
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;set1&lt;&#x2F;span&gt;&lt;span&gt;;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; Set [ 1, 2, 3, 4, 5, 6 ]
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;uniqueness&quot;&gt;Uniqueness&lt;&#x2F;h2&gt;
&lt;p&gt;Without the common set operations defined the JavaScript Set() can be seen as a glorified container that only stores unique elements. When you put a repeated element it actually replaces the existing one.&lt;&#x2F;p&gt;
&lt;p&gt;This is quite useful for primitive values.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;js&quot; style=&quot;background-color:#151515;color:#e8e8d3;&quot; class=&quot;language-js &quot;&gt;&lt;code class=&quot;language-js&quot; data-lang=&quot;js&quot;&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;set1&lt;&#x2F;span&gt;&lt;span&gt;.add(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#cf6a4c;&quot;&gt;5&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;set1&lt;&#x2F;span&gt;&lt;span&gt;.add(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#cf6a4c;&quot;&gt;5&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;set1&lt;&#x2F;span&gt;&lt;span&gt;.add(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#cf6a4c;&quot;&gt;5&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;set1&lt;&#x2F;span&gt;&lt;span&gt;;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; Set [ 1, 2, 3, 4, 5, 6 ]
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Unlike Arrays the value will not be repeated when you add it to a Set.&lt;&#x2F;p&gt;
&lt;p&gt;For object values this is not that simple as Set uses references for those values;&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;js&quot; style=&quot;background-color:#151515;color:#e8e8d3;&quot; class=&quot;language-js &quot;&gt;&lt;code class=&quot;language-js&quot; data-lang=&quot;js&quot;&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;const &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;set2 &lt;&#x2F;span&gt;&lt;span&gt;= new &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;Set&lt;&#x2F;span&gt;&lt;span&gt;([{ value: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#cf6a4c;&quot;&gt;1&lt;&#x2F;span&gt;&lt;span&gt;}, { value: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#cf6a4c;&quot;&gt;2&lt;&#x2F;span&gt;&lt;span&gt;}]);
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;let &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;obj1 &lt;&#x2F;span&gt;&lt;span&gt;= { value: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#cf6a4c;&quot;&gt;2 &lt;&#x2F;span&gt;&lt;span&gt;};
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;set2&lt;&#x2F;span&gt;&lt;span&gt;.add(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;obj1&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;set2&lt;&#x2F;span&gt;&lt;span&gt;;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; Set [{ value: 1}, { value: 2}, { value: 2 }]
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The reference is used as the key in the Set, if we change &lt;code&gt;obj1.value&lt;&#x2F;code&gt; above to something else and add it to the Set, JavaScript will see it as a repeated element and replace the existing reference in the Set.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;js&quot; style=&quot;background-color:#151515;color:#e8e8d3;&quot; class=&quot;language-js &quot;&gt;&lt;code class=&quot;language-js&quot; data-lang=&quot;js&quot;&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;obj1&lt;&#x2F;span&gt;&lt;span&gt;.value = &lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;foo&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;set2&lt;&#x2F;span&gt;&lt;span&gt;.add(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;obj1&lt;&#x2F;span&gt;&lt;span&gt;); &lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; obj1 is already in the set
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;set2&lt;&#x2F;span&gt;&lt;span&gt;;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; Set [{ value: 1}, { value: 2}, { value: &amp;quot;foo&amp;quot; }]
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Now just to compare with Arrays, here is a naive implementation to create an array with n values and then filter the unique values in it.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;js&quot; style=&quot;background-color:#151515;color:#e8e8d3;&quot; class=&quot;language-js &quot;&gt;&lt;code class=&quot;language-js&quot; data-lang=&quot;js&quot;&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;const &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;n &lt;&#x2F;span&gt;&lt;span&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#cf6a4c;&quot;&gt;100000&lt;&#x2F;span&gt;&lt;span&gt;;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; create an array with &amp;#39;n&amp;#39; random numbers:
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;const &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;initialArray &lt;&#x2F;span&gt;&lt;span&gt;= new &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;Array&lt;&#x2F;span&gt;&lt;span&gt;();
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;for &lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;let &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;i &lt;&#x2F;span&gt;&lt;span&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#cf6a4c;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span&gt;; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;i &lt;&#x2F;span&gt;&lt;span&gt;&amp;lt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;n&lt;&#x2F;span&gt;&lt;span&gt;; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;i&lt;&#x2F;span&gt;&lt;span&gt;++) {
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;const &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;number &lt;&#x2F;span&gt;&lt;span&gt;= Math.round(Math.random()*&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;n&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;initialArray&lt;&#x2F;span&gt;&lt;span&gt;.push(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;number&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; naively filter the unique values into a new array
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;const &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;uniqueArray &lt;&#x2F;span&gt;&lt;span&gt;= new &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;Array&lt;&#x2F;span&gt;&lt;span&gt;();
&lt;&#x2F;span&gt;&lt;span&gt;performance.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;mark&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;UniqueArrayBefore&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;for &lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;let &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;i &lt;&#x2F;span&gt;&lt;span&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#cf6a4c;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span&gt;; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;i &lt;&#x2F;span&gt;&lt;span&gt;&amp;lt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;initialArray&lt;&#x2F;span&gt;&lt;span&gt;.length; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;i&lt;&#x2F;span&gt;&lt;span&gt;++) {
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;const &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;value &lt;&#x2F;span&gt;&lt;span&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;initialArray&lt;&#x2F;span&gt;&lt;span&gt;[&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;i&lt;&#x2F;span&gt;&lt;span&gt;];
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;if &lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;uniqueArray&lt;&#x2F;span&gt;&lt;span&gt;.indexOf(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;value&lt;&#x2F;span&gt;&lt;span&gt;) === -&lt;&#x2F;span&gt;&lt;span style=&quot;color:#cf6a4c;&quot;&gt;1&lt;&#x2F;span&gt;&lt;span&gt;) {
&lt;&#x2F;span&gt;&lt;span&gt;		&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;uniqueArray&lt;&#x2F;span&gt;&lt;span&gt;.push(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;value&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span&gt;	}
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;performance.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;mark&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;UniqueArrayAfter&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span&gt;performance.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;measure&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;uniqueArray&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;UniqueArrayBefore&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;UniqueArrayAfter&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;const &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;arrayTotalTime &lt;&#x2F;span&gt;&lt;span&gt;= performance.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;getEntriesByName&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;uniqueArray&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;)[&lt;&#x2F;span&gt;&lt;span style=&quot;color:#cf6a4c;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span&gt;].&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;duration&lt;&#x2F;span&gt;&lt;span&gt;;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;console&lt;&#x2F;span&gt;&lt;span&gt;.log(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;arrayTotalTime&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;uniqueArray&lt;&#x2F;span&gt;&lt;span&gt;.length);
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; 171.08500000000004 63235
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;It takes 171 milliseconds to filter ~64k unique values in a 100k elments array. Not bad.&lt;&#x2F;p&gt;
&lt;p&gt;Now lets compare this naive implementation to just using Set():&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;js&quot; style=&quot;background-color:#151515;color:#e8e8d3;&quot; class=&quot;language-js &quot;&gt;&lt;code class=&quot;language-js&quot; data-lang=&quot;js&quot;&gt;&lt;span&gt;performance.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;mark&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;UniqueSetBefore&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;let &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;uniqueSet &lt;&#x2F;span&gt;&lt;span&gt;= new &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;Set&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;initialArray&lt;&#x2F;span&gt;&lt;span&gt;); &lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; easy!
&lt;&#x2F;span&gt;&lt;span&gt;performance.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;mark&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;UniqueSetAfter&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span&gt;performance.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;measure&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;uniqueSet&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;UniqueSetBefore&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;UniqueSetAfter&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;const &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;setTotalTime &lt;&#x2F;span&gt;&lt;span&gt;= performance.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;getEntriesByName&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;uniqueSet&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;)[&lt;&#x2F;span&gt;&lt;span style=&quot;color:#cf6a4c;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span&gt;].&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;duration&lt;&#x2F;span&gt;&lt;span&gt;;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;console&lt;&#x2F;span&gt;&lt;span&gt;.log(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;setTotalTime&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;uniqueSet&lt;&#x2F;span&gt;&lt;span&gt;.size);
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; 0.8699999999998909 63235
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;That is FAST! ~0.9ms with the same initial 100k array. The good part is that Set does not get worse with the number of elements in it.&lt;&#x2F;p&gt;
&lt;p&gt;This is basic JS and the killer feature of Set()&#x27;s. Use them when you need a container of unique elements and&#x2F;or to filter unique elements in any iterable container.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;presence&quot;&gt;Presence&lt;&#x2F;h2&gt;
&lt;p&gt;Checking if an element is present is also easy in a Set and arguably an operation quite common for containers like these.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;js&quot; style=&quot;background-color:#151515;color:#e8e8d3;&quot; class=&quot;language-js &quot;&gt;&lt;code class=&quot;language-js&quot; data-lang=&quot;js&quot;&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;set1&lt;&#x2F;span&gt;&lt;span&gt;.has(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#cf6a4c;&quot;&gt;5&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; true
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;set1&lt;&#x2F;span&gt;&lt;span&gt;.has(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#cf6a4c;&quot;&gt;1337&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; false
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Arrays also have a presence function called &lt;code&gt;indexOf&lt;&#x2F;code&gt;: it returns the index of the element or -1 if it is not present.&lt;&#x2F;p&gt;
&lt;p&gt;To compare &lt;code&gt;Array.indexOf()&lt;&#x2F;code&gt; to &lt;code&gt;Set.has()&lt;&#x2F;code&gt; here is a quick test that runs 10000 indexOf&#x27;s (in array) and has&#x27;s (in Set) for an Array and Set of 100 elements:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;js&quot; style=&quot;background-color:#151515;color:#e8e8d3;&quot; class=&quot;language-js &quot;&gt;&lt;code class=&quot;language-js&quot; data-lang=&quot;js&quot;&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;const &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;size &lt;&#x2F;span&gt;&lt;span&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#cf6a4c;&quot;&gt;100&lt;&#x2F;span&gt;&lt;span&gt;; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; the Array and Set size
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;const &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;a &lt;&#x2F;span&gt;&lt;span&gt;= new &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;Array&lt;&#x2F;span&gt;&lt;span&gt;();
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;for &lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;let &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;i &lt;&#x2F;span&gt;&lt;span&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#cf6a4c;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span&gt;; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;i &lt;&#x2F;span&gt;&lt;span&gt;&amp;lt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;size&lt;&#x2F;span&gt;&lt;span&gt;; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;i&lt;&#x2F;span&gt;&lt;span&gt;++) {
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;a&lt;&#x2F;span&gt;&lt;span&gt;.push(Math.round(Math.random()*&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;size&lt;&#x2F;span&gt;&lt;span&gt;));
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;const &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;s &lt;&#x2F;span&gt;&lt;span&gt;= new &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;Set&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;a&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;const &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;ops &lt;&#x2F;span&gt;&lt;span&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#cf6a4c;&quot;&gt;10000&lt;&#x2F;span&gt;&lt;span&gt;;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;let &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;indexAll &lt;&#x2F;span&gt;&lt;span&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#cf6a4c;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span&gt;;
&lt;&#x2F;span&gt;&lt;span&gt;performance.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;mark&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;Array Before&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;for &lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;let &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;i &lt;&#x2F;span&gt;&lt;span&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#cf6a4c;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span&gt;; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;i &lt;&#x2F;span&gt;&lt;span&gt;&amp;lt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;ops&lt;&#x2F;span&gt;&lt;span&gt;; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;i&lt;&#x2F;span&gt;&lt;span&gt;++) {
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;indexAll &lt;&#x2F;span&gt;&lt;span&gt;+= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;a&lt;&#x2F;span&gt;&lt;span&gt;.indexOf(Math.round(Math.random()*&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;size&lt;&#x2F;span&gt;&lt;span&gt;));
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; ^ just to do some operation
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;performance.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;mark&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;Array After&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span&gt;performance.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;measure&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;Array.indexOf()&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;Array Before&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;Array After&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;const &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;arrayTotalTime &lt;&#x2F;span&gt;&lt;span&gt;= performance.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;getEntriesByName&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;Array.indexOf()&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;)[&lt;&#x2F;span&gt;&lt;span style=&quot;color:#cf6a4c;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span&gt;].&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;duration&lt;&#x2F;span&gt;&lt;span&gt;;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;let &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;setValue &lt;&#x2F;span&gt;&lt;span&gt;= false;
&lt;&#x2F;span&gt;&lt;span&gt;performance.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;mark&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;Set Before&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;for &lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;let &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;i &lt;&#x2F;span&gt;&lt;span&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#cf6a4c;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span&gt;; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;i &lt;&#x2F;span&gt;&lt;span&gt;&amp;lt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;ops&lt;&#x2F;span&gt;&lt;span&gt;; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;i&lt;&#x2F;span&gt;&lt;span&gt;++) {
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;setValue &lt;&#x2F;span&gt;&lt;span&gt;+= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;s&lt;&#x2F;span&gt;&lt;span&gt;.has(Math.round(Math.random()*&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;size&lt;&#x2F;span&gt;&lt;span&gt;));
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; ^ same as above just to do some operation
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;performance.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;mark&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;Set After&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span&gt;performance.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;measure&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;Set.has()&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;Set Before&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;Set After&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;const &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;setTotalTime &lt;&#x2F;span&gt;&lt;span&gt;= performance.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;getEntriesByName&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;Set.has()&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;)[&lt;&#x2F;span&gt;&lt;span style=&quot;color:#cf6a4c;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span&gt;].&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;duration&lt;&#x2F;span&gt;&lt;span&gt;;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;console&lt;&#x2F;span&gt;&lt;span&gt;.log(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;setValue&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;indexAll&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;console&lt;&#x2F;span&gt;&lt;span&gt;.log(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;SET: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;setTotalTime&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;ARRAY: &lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;arrayTotalTime&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; SET:  17.68499999999767 ARRAY:  20.924999999995634
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;A slight difference. Multiple executions give values that are coherent with these (not an outlier).
&lt;code&gt;Set.has()&lt;&#x2F;code&gt; is faster than the &lt;code&gt;Array.indexOf()&lt;&#x2F;code&gt; even for small Arrays.&lt;&#x2F;p&gt;
&lt;p&gt;The difference of execution just gets bigger as the size of the containers increase.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;js&quot; style=&quot;background-color:#151515;color:#e8e8d3;&quot; class=&quot;language-js &quot;&gt;&lt;code class=&quot;language-js&quot; data-lang=&quot;js&quot;&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; size = 1000;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; SET:  21.014999999999418 ARRAY:  54.00500000000102
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; size = 10000;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; SET:  17.44499999999971 ARRAY:  398.505000000001
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; size = 100000;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; SET:  19.770000000004075 ARRAY:  3779.524999999994
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;&lt;code&gt;Set.has()&lt;&#x2F;code&gt; execution time doesn&#x27;t seem to differ with the set size. The JS spec tells us why:&lt;&#x2F;p&gt;
&lt;p&gt;&lt;em&gt;&amp;quot;Set objects must be implemented using either hash tables or other mechanisms that, on average, provide access times that are sublinear on the number of elements in the collection.&amp;quot;&lt;&#x2F;em&gt; &lt;a href=&quot;http:&#x2F;&#x2F;www.ecma-international.org&#x2F;ecma-262&#x2F;6.0&#x2F;#sec-set-objects&quot;&gt;[*]&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;It does not even bother heating your CPU as my browser probably implements this to be O(shiznit(n)) for a large enough n (I will not go into detail here so I will leave the measurement as an exercise for you as it is always important&#x2F;necessary to measure Big-O behaviours).&lt;&#x2F;p&gt;
&lt;h2 id=&quot;insertion-speed&quot;&gt;Insertion speed&lt;&#x2F;h2&gt;
&lt;p&gt;Right now Sets seem really cool, how about we check how fast is the add() method in comparison to an array push(), like we did in the &lt;a href=&quot;https:&#x2F;&#x2F;hugodaniel.com&#x2F;posts&#x2F;in-loving-memory-of-immutable&#x2F;&quot;&gt;Immutable.List vs Array article&lt;&#x2F;a&gt; ?&lt;&#x2F;p&gt;
&lt;p&gt;The code is simple, two loops, one for Array.push() and another for Set.add().&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;js&quot; style=&quot;background-color:#151515;color:#e8e8d3;&quot; class=&quot;language-js &quot;&gt;&lt;code class=&quot;language-js&quot; data-lang=&quot;js&quot;&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;const &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;s &lt;&#x2F;span&gt;&lt;span&gt;= new &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;Set&lt;&#x2F;span&gt;&lt;span&gt;();
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;const &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;a &lt;&#x2F;span&gt;&lt;span&gt;= new &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;Array&lt;&#x2F;span&gt;&lt;span&gt;();
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;const &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;ammount &lt;&#x2F;span&gt;&lt;span&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#cf6a4c;&quot;&gt;100000&lt;&#x2F;span&gt;&lt;span&gt;;
&lt;&#x2F;span&gt;&lt;span&gt;performance.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;mark&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;ArrayBefore&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;for &lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;let &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;i &lt;&#x2F;span&gt;&lt;span&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#cf6a4c;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span&gt;; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;i &lt;&#x2F;span&gt;&lt;span&gt;&amp;lt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;ammount&lt;&#x2F;span&gt;&lt;span&gt;; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;i&lt;&#x2F;span&gt;&lt;span&gt;++) {
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;a&lt;&#x2F;span&gt;&lt;span&gt;.push(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;i&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;performance.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;mark&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;ArrayAfter&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span&gt;performance.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;measure&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;Array.push&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;ArrayBefore&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;ArrayAfter&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;performance.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;mark&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;SetBefore&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;for &lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;let &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;i &lt;&#x2F;span&gt;&lt;span&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#cf6a4c;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span&gt;; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;i &lt;&#x2F;span&gt;&lt;span&gt;&amp;lt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;ammount&lt;&#x2F;span&gt;&lt;span&gt;; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;i&lt;&#x2F;span&gt;&lt;span&gt;++) {
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;s&lt;&#x2F;span&gt;&lt;span&gt;.add(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;i&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;performance.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;mark&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;SetAfter&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span&gt;performance.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;measure&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;Set.add&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;SetBefore&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;SetAfter&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;const &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;arrayTime &lt;&#x2F;span&gt;&lt;span&gt;= performance.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;getEntriesByName&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;Array.push&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;)[&lt;&#x2F;span&gt;&lt;span style=&quot;color:#cf6a4c;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span&gt;].&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;duration&lt;&#x2F;span&gt;&lt;span&gt;;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;const &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;setTime &lt;&#x2F;span&gt;&lt;span&gt;= performance.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;getEntriesByName&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;Set.add&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;)[&lt;&#x2F;span&gt;&lt;span style=&quot;color:#cf6a4c;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span&gt;].&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;duration&lt;&#x2F;span&gt;&lt;span&gt;;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;console&lt;&#x2F;span&gt;&lt;span&gt;.log(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;`Array.push in ${&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;arrayTime&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;}ms; Set.add in ${&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;setTime&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;}ms;`&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; Array.push in 4.054999999993015ms; Set.add in 20.915000000037253ms;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Ah! Arrays are much faster (5x) in insertion than Sets. If you are an experience developer this is not really surprising at all, but still it is nice to check.
Be aware that insertion speed grows linearly in Arrays and non-linearly in Sets:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;js&quot; style=&quot;background-color:#151515;color:#e8e8d3;&quot; class=&quot;language-js &quot;&gt;&lt;code class=&quot;language-js&quot; data-lang=&quot;js&quot;&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; ammount = 100000;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; Array.push in 4.054999999993015ms; Set.add in 20.915000000037253ms;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; ammount = 1000000;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; Array.push in 17.175000000046566ms; Set.add in 417.03999999992084ms;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; ^ ~4x more than prev.               ^ ~20x more than prev.
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; ammount = 10000000;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; Array.push in 349.8299999999581ms; Set.add in 3902.625ms;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; ^ ~20x more than prev.             ^ ~10x more than prev.
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;We could continue, but JavaScript numbers are &lt;a href=&quot;https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Double-precision_floating-point_format&quot;&gt;64 bit double precision floating point values&lt;&#x2F;a&gt;. Which means that for integer values they will use 52bits of storage for the significand. Which in turn means that for the next ammount (100000000) I would need 650MB of memory just to store the numbers + the overhead of the Array and Set data structures.&lt;&#x2F;p&gt;
&lt;p&gt;Another exercise for the reader :D&lt;&#x2F;p&gt;
&lt;p&gt;If you are doing a cheap fast logger, then Array is a better choice than Set since it inserts much faster. Set add() is probably implemented to have a better &lt;a href=&quot;https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Big_O_notation&quot;&gt;O(some BS here)&lt;&#x2F;a&gt; than the Array push() and it will likely not be much slower than 10x the previous running order. But their measured absolute value is way slower and this is what really matters, always measure your code if you care about performance because overhead can creep in the most unexpected places (I am not sure if this is the case, but still...).&lt;&#x2F;p&gt;
&lt;h2 id=&quot;iteration-speed&quot;&gt;Iteration speed&lt;&#x2F;h2&gt;
&lt;p&gt;If you are wondering how Set performs in the need to iterate through its elements, wonder no further.&lt;&#x2F;p&gt;
&lt;p&gt;Again the two cycles, this time using for..of to go through the Set items.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;js&quot; style=&quot;background-color:#151515;color:#e8e8d3;&quot; class=&quot;language-js &quot;&gt;&lt;code class=&quot;language-js&quot; data-lang=&quot;js&quot;&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;const &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;s &lt;&#x2F;span&gt;&lt;span&gt;= new &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;Set&lt;&#x2F;span&gt;&lt;span&gt;();
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;const &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;a &lt;&#x2F;span&gt;&lt;span&gt;= new &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;Array&lt;&#x2F;span&gt;&lt;span&gt;();
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;const &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;ammount &lt;&#x2F;span&gt;&lt;span&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#cf6a4c;&quot;&gt;100000&lt;&#x2F;span&gt;&lt;span&gt;;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;let &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;sum &lt;&#x2F;span&gt;&lt;span&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#cf6a4c;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span&gt;;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;for &lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;let &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;i &lt;&#x2F;span&gt;&lt;span&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#cf6a4c;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span&gt;; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;i &lt;&#x2F;span&gt;&lt;span&gt;&amp;lt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;ammount&lt;&#x2F;span&gt;&lt;span&gt;; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;i&lt;&#x2F;span&gt;&lt;span&gt;++) {
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;a&lt;&#x2F;span&gt;&lt;span&gt;.push(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;i&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;performance.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;mark&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;ArrayBefore&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;for &lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;let &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;i &lt;&#x2F;span&gt;&lt;span&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#cf6a4c;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span&gt;; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;i &lt;&#x2F;span&gt;&lt;span&gt;&amp;lt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;a&lt;&#x2F;span&gt;&lt;span&gt;.length; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;i&lt;&#x2F;span&gt;&lt;span&gt;++) {
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;sum &lt;&#x2F;span&gt;&lt;span&gt;+= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;a&lt;&#x2F;span&gt;&lt;span&gt;[&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;i&lt;&#x2F;span&gt;&lt;span&gt;];
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;performance.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;mark&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;ArrayAfter&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span&gt;performance.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;measure&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;Array.for&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;ArrayBefore&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;ArrayAfter&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;for &lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;let &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;i &lt;&#x2F;span&gt;&lt;span&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#cf6a4c;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span&gt;; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;i &lt;&#x2F;span&gt;&lt;span&gt;&amp;lt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;ammount&lt;&#x2F;span&gt;&lt;span&gt;; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;i&lt;&#x2F;span&gt;&lt;span&gt;++) {
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;s&lt;&#x2F;span&gt;&lt;span&gt;.add(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;i&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;console&lt;&#x2F;span&gt;&lt;span&gt;.log(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;sum&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;sum &lt;&#x2F;span&gt;&lt;span&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#cf6a4c;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span&gt;;
&lt;&#x2F;span&gt;&lt;span&gt;performance.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;mark&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;SetBefore&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;for &lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;let &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;item &lt;&#x2F;span&gt;&lt;span&gt;of &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;s&lt;&#x2F;span&gt;&lt;span&gt;) { &lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; &amp;lt;- here
&lt;&#x2F;span&gt;&lt;span&gt;	&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;sum &lt;&#x2F;span&gt;&lt;span&gt;+= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;item&lt;&#x2F;span&gt;&lt;span&gt;;
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;performance.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;mark&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;SetAfter&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span&gt;performance.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;measure&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;Set.for&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;SetBefore&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;, &lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;SetAfter&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;const &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;arrayTime &lt;&#x2F;span&gt;&lt;span&gt;= performance.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;getEntriesByName&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;Array.for&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;)[&lt;&#x2F;span&gt;&lt;span style=&quot;color:#cf6a4c;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span&gt;].&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;duration&lt;&#x2F;span&gt;&lt;span&gt;;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;const &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;setTime &lt;&#x2F;span&gt;&lt;span&gt;= performance.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;getEntriesByName&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;Set.for&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;)[&lt;&#x2F;span&gt;&lt;span style=&quot;color:#cf6a4c;&quot;&gt;0&lt;&#x2F;span&gt;&lt;span&gt;].&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;duration&lt;&#x2F;span&gt;&lt;span&gt;;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;console&lt;&#x2F;span&gt;&lt;span&gt;.log(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;sum&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;console&lt;&#x2F;span&gt;&lt;span&gt;.log(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;`Array.for in ${&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;arrayTime&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;}ms; Set.for in ${&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;setTime&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;}ms;`&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; Array.for in 4.44999999999709ms; Set.for in 9.239999999997963ms;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;No surprises here. Array sequential values are faster to iterate than Set values (which iterates in insertion order).&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;js&quot; style=&quot;background-color:#151515;color:#e8e8d3;&quot; class=&quot;language-js &quot;&gt;&lt;code class=&quot;language-js&quot; data-lang=&quot;js&quot;&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; ammount = 100000;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; Array.for in 4.44999999999709ms; Set.for in 9.239999999997963ms;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; ammount = 1000000;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; Array.for in 9.044999999998254ms; Set.for in 55.14499999998952ms;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; ammount = 10000000;
&lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; Array.for in 74.47000000000116ms; Set.for in 180.13999999999942ms;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Arrays are faster for sequential iteration of lots of data.
Converting the Set to an Array is not going to help here because &lt;a href=&quot;https:&#x2F;&#x2F;developer.mozilla.org&#x2F;en-US&#x2F;docs&#x2F;Web&#x2F;JavaScript&#x2F;Reference&#x2F;Global_Objects&#x2F;Array&#x2F;from&quot;&gt;&lt;code&gt;Array.from&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; iterates through the argument to perform the convertion.&lt;&#x2F;p&gt;
&lt;p&gt;Just deal with it :)&lt;&#x2F;p&gt;
&lt;h2 id=&quot;set-operations&quot;&gt;Set operations&lt;&#x2F;h2&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;paulo_coding.jpg&quot; alt=&quot;A pic I took more than a decade ago. Paulo, one of the best hackers I have met. Nikon FM2 50mm1.2f, Kodak E100G film, double exposure.&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;We saw that Set construction and presence checking are extremely fast operations when compared to their Array counterparts. With this in mind the set operations can be easily and naively done.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;union&quot;&gt;Union&lt;&#x2F;h3&gt;
&lt;pre data-lang=&quot;js&quot; style=&quot;background-color:#151515;color:#e8e8d3;&quot; class=&quot;language-js &quot;&gt;&lt;code class=&quot;language-js&quot; data-lang=&quot;js&quot;&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;const &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;union &lt;&#x2F;span&gt;&lt;span&gt;= new &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;Set&lt;&#x2F;span&gt;&lt;span&gt;([...&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;set1&lt;&#x2F;span&gt;&lt;span&gt;, ...&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;set2&lt;&#x2F;span&gt;&lt;span&gt;]);
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Creates a new set with the &lt;em&gt;unique&lt;&#x2F;em&gt; values on set1 and set2 (no repeated values). If you don&#x27;t care about uniqueness then just use Arrays and &lt;a href=&quot;https:&#x2F;&#x2F;developer.mozilla.org&#x2F;en-US&#x2F;docs&#x2F;Web&#x2F;JavaScript&#x2F;Reference&#x2F;Global_Objects&#x2F;Array&#x2F;concat&quot;&gt;&lt;code&gt;concat()&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; them.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;difference&quot;&gt;Difference&lt;&#x2F;h3&gt;
&lt;pre data-lang=&quot;js&quot; style=&quot;background-color:#151515;color:#e8e8d3;&quot; class=&quot;language-js &quot;&gt;&lt;code class=&quot;language-js&quot; data-lang=&quot;js&quot;&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;const &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;diff &lt;&#x2F;span&gt;&lt;span&gt;= new &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;Set&lt;&#x2F;span&gt;&lt;span&gt;([...&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;set1&lt;&#x2F;span&gt;&lt;span&gt;].&lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;filter&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;x &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;=&amp;gt; &lt;&#x2F;span&gt;&lt;span&gt;!&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;set2&lt;&#x2F;span&gt;&lt;span&gt;.has(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;x&lt;&#x2F;span&gt;&lt;span&gt;)));
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h3 id=&quot;intersection&quot;&gt;Intersection&lt;&#x2F;h3&gt;
&lt;pre data-lang=&quot;js&quot; style=&quot;background-color:#151515;color:#e8e8d3;&quot; class=&quot;language-js &quot;&gt;&lt;code class=&quot;language-js&quot; data-lang=&quot;js&quot;&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;const &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;intersected &lt;&#x2F;span&gt;&lt;span&gt;= new &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;Set&lt;&#x2F;span&gt;&lt;span&gt;([...&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;set1&lt;&#x2F;span&gt;&lt;span&gt;].&lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;filter&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;x &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;=&amp;gt; &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;set2&lt;&#x2F;span&gt;&lt;span&gt;.has(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;x&lt;&#x2F;span&gt;&lt;span&gt;)));
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Simple as long as you remember that for objects they work with references instead of values.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;conclusion&quot;&gt;Conclusion&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Use Set() when unique values matter&lt;&#x2F;li&gt;
&lt;li&gt;Set.has() is much faster than Array.indexOf()&lt;&#x2F;li&gt;
&lt;li&gt;Array.push() is much faster than Set.add()&lt;&#x2F;li&gt;
&lt;li&gt;Arrays are faster to iterate sequentially&lt;&#x2F;li&gt;
&lt;li&gt;Union, Difference, Intersection are easy to implement with Set&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;Set&#x27;s are a big part of my project &lt;a href=&quot;https:&#x2F;&#x2F;gridgenerator.com&quot;&gt;Grid Generator&lt;&#x2F;a&gt;. Keeping these small concepts close to the heart can help you leverage Sets to achieve very good performance even in mobile devices.&lt;&#x2F;p&gt;
&lt;p&gt;I hope this post was valuable in any way to you. If you are interested &lt;a href=&quot;https:&#x2F;&#x2F;hugodaniel.com&#x2F;posts&#x2F;mastering-console-log&#x2F;&quot;&gt;here is my take on console.log()&lt;&#x2F;a&gt; and also a &lt;a href=&quot;https:&#x2F;&#x2F;hugodaniel.com&#x2F;posts&#x2F;in-loving-memory-of-immutable&#x2F;&quot;&gt;look into Immutable&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Lisbon as an inspiration for my project</title>
        <published>2017-10-25T00:00:00+00:00</published>
        <updated>2017-10-25T00:00:00+00:00</updated>
        <author>
          <name>Unknown</name>
        </author>
        <link rel="alternate" href="https://hugodaniel.com/posts/lisbon-as-an-inspiration-for-my-project/" type="text/html"/>
        <id>https://hugodaniel.com/posts/lisbon-as-an-inspiration-for-my-project/</id>
        
        <content type="html">&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;Lisbon_gridgenerator1.jpg&quot; alt=&quot;Diptych of Lisbon graffitti in portuguese tiles together with the downtown Lisbon ground&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Recently I was somewhat &amp;quot;forced&amp;quot; to think about the story behind the idea I am working on. If you go to these startup and entrepreneurship events you will see that most projects have some kind of a story behind them.
Either they start up in a garage (Apple), or they decided to improve their hobbyist girl discrimination app (facebook), or they just somehow were blessed by some mystical event that got their idea and team together to disrupt the universe.&lt;&#x2F;p&gt;
&lt;p&gt;When my reality clashed with that one I realized that I did not have a special motivation to do a &lt;a href=&quot;https:&#x2F;&#x2F;gridgenerator.com&quot;&gt;pattern and shapes app&lt;&#x2F;a&gt; besides my desire to make a cool project come to life.
So I decided to do what it seemed like the best approach to move forward: I lead myself into a spiral of paranoia and depression for not taking in consideration the necessary planets alignment.&lt;&#x2F;p&gt;
&lt;p&gt;Afterall, why am I doing what I am doing ? Why drawing ? Why shapes and patterns ? What is my story ? How do I sell my idea ? What drives my &amp;quot;pitch&amp;quot; ?
All entrepreneurs seem to have the answers for these questions well sorted out as they always come up with some amazing tale of fortune and success.&lt;&#x2F;p&gt;
&lt;p&gt;Me?
I am just a person who worked in the public sector for 6 years. Quit out of frustration. Worked 2 months for a consulting company. Quit out of more frustration. Worked less than a year in a startup and quit to avoid medical insanity.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;Lisbon_gridgenerator2.jpg&quot; alt=&quot;A random person walking downwards with a building frontage covered in tiles in the background&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Since college that I am full of myself with photography. I really think that I am the last Coca-Cola in the desert in regards to photography.
Instead of studying for the exams I would spend hours roaming around Lisbon and taking pictures of every little bit of this city. I would then proceed to use them to produce poems that were even more pretentious than the pictures.
Which inevitably led me to fail a lot of years in university. I have pictures to show for it :)&lt;&#x2F;p&gt;
&lt;p&gt;Lucky for me Lisbon is one of the most beautiful cities in the world, so some pictures turned out ok in spite of my lack of talent for photography. The ones that were good were mostly about:&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;Tagus scenery (hard to miss)&lt;&#x2F;li&gt;
&lt;li&gt;Buildings frontages&lt;&#x2F;li&gt;
&lt;li&gt;Portuguese sidewalks&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;Lisbon_gridgenerator3.jpg&quot; alt=&quot;A building in Lisbon&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;The ammount of patterns and small details in Lisbon is impressive. Be it on the walls, or on the ground, or inside or outside of buildings. I guess this is the only explanation I can think of for my interest in shapes and geometric patterns.&lt;&#x2F;p&gt;
&lt;p&gt;In a few days Lisbon will be full of people from different culture(s) who are coming in for the WebSummit. If you are visiting don&#x27;t forget to look at the floors and walls.
They are a source of inspiration.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;Lisbon_gridgenerator4.jpg&quot; alt=&quot;Diptych of a messed up sidewalk diagonal grid and the door detail of a church in &amp;quot;Martim Moniz&amp;quot; where the frontage is entirely rendered on the ground sidewalk&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;If you liked this post &lt;a href=&quot;https:&#x2F;&#x2F;gridgenerator.com&quot;&gt;check out my project&lt;&#x2F;a&gt; and the reason why &lt;a href=&quot;https:&#x2F;&#x2F;hugodaniel.com&#x2F;posts&#x2F;why-i-decided-to-go-to-the-websummit&#x2F;&quot;&gt;I am going to the WebSummit&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Why I decided to go to the WebSummit?</title>
        <published>2017-10-24T00:00:00+00:00</published>
        <updated>2017-10-24T00:00:00+00:00</updated>
        <author>
          <name>Unknown</name>
        </author>
        <link rel="alternate" href="https://hugodaniel.com/posts/why-i-decided-to-go-to-the-websummit/" type="text/html"/>
        <id>https://hugodaniel.com/posts/why-i-decided-to-go-to-the-websummit/</id>
        
        <content type="html">&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;websummit1_tagusriver.jpg&quot; alt=&quot;Tagus river by sunset in Lisbon, with a background bridge that shares some similarities with the Golden Gate in San Francisco&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Personally I find it impossible to answer this question. I feel that it was not me who actually took the decision to go to the WebSummit. Even though I did.&lt;&#x2F;p&gt;
&lt;p&gt;It all hapened through a sequence of chained events that led me to have to decide to buy a discounted alpha ticket to go there.&lt;&#x2F;p&gt;
&lt;p&gt;At first the WebSummit has two big &amp;quot;no&amp;quot;&#x27;s: the price and if you can actually get something useful from it. I can argue that there is some pressure to go when you have the whole city talking about this conference and you know quite a few people that are going there. How can you miss the even where supposedly everything is hapenning ?&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;websummit1_me.jpg&quot; alt=&quot;Me in Lisbon at the top of the arc in Rua Augusta enjoying a sunny day&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;gridgenerator.com&quot;&gt;My project is a web app to help people work their graphical ideas&lt;&#x2F;a&gt; without having to learn pro software so that they can use these ideas in their daily lives. Technically it is a grid where each element has itself a customized grid inside. Besides this it also has a cool way to help select colors that match and work well with each other.
I have not yet released it, so I don&#x27;t have any market data to show off. I am not looking for investment for two main reasons: I want to bootstrap it and it currently is in an early stage (almost fully developed but still before market).&lt;&#x2F;p&gt;
&lt;p&gt;I talked beforehand to some people that went to the 2016 edition, and they said that it&#x27;s a big event, so big that it is confusing to be there. Also most people that go are looking for investment. All these people that I talked to work for some company that paid their tickets, so I had to keep that in mind when considering their opinion (myself being a bootstrapper).&lt;&#x2F;p&gt;
&lt;p&gt;Because of this initially I had decided not to go. Then I talked to my mentor and he insisted that I considered the pros and cons of going and not going.
I then changed my mind into going to the WebSummit because he convinced me that the potential to expand my contact network and talk to people that might be interested in the project was something that at this stage would be very good overall.&lt;&#x2F;p&gt;
&lt;p&gt;Hence the decision to give WebSummit a chance. I applied to their &amp;quot;alpha ticket&amp;quot;, got selected after a quick interview and they sold me a ~520EUR pass available. This was &lt;em&gt;a lot&lt;&#x2F;em&gt; for me to pay. Even considering that I would be getting 3 tickets and a stand there for my project during one day. But I bit the bullet considering that I am living in Lisbon and that I would have no further big expenses.&lt;&#x2F;p&gt;
&lt;p&gt;That was three months ago, meanwhile I have already considered and reconsidered my previous decision, and my current status is still a bit doubtful about the WebSummit as a worthwhile experience for a bootstrapper. I am certainly not going to look for an investment (like most people apparently go) and the real benefits that I think I will obtain are not easily tangible (personal development and enrichment, maybe some hope of having inspirational talks with different minded people).&lt;&#x2F;p&gt;
&lt;p&gt;Maybe in WebSummit I will meet people that can open my mind to other different kinds of funding. Maybe in the future I will do a kickstarter campaign or some other kind of funding project.
Right now I know that at least I get the chance to be in the same place as Al Gore and other great thinkers...&lt;&#x2F;p&gt;
&lt;p&gt;If you liked this post check out &lt;a href=&quot;https:&#x2F;&#x2F;hugodaniel.com&#x2F;posts&#x2F;lisbon-as-an-inspiration-for-my-project&#x2F;&quot;&gt;Lisbon as an inspiration for my project&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>In loving memory of Immutable.js</title>
        <published>2017-10-03T00:00:00+00:00</published>
        <updated>2017-10-03T00:00:00+00:00</updated>
        <author>
          <name>Unknown</name>
        </author>
        <link rel="alternate" href="https://hugodaniel.com/posts/in-loving-memory-of-immutable/" type="text/html"/>
        <id>https://hugodaniel.com/posts/in-loving-memory-of-immutable/</id>
        
        <content type="html">&lt;p&gt;Any JavaScript spaghetti worth its salt won&#x27;t keep track of its objects references or their updates.
These are things that happen between the mind of a chef and the ether of a planned portion with lots of defensive copying.
&lt;a href=&quot;https:&#x2F;&#x2F;facebook.github.io&#x2F;immutable-js&#x2F;&quot;&gt;Immutable.js&lt;&#x2F;a&gt; aims to reduce these portion sizes to match the ones in fancy restaurants while avoiding ingredients like:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#151515;color:#e8e8d3;&quot;&gt;&lt;code&gt;&lt;span&gt;JSON.parse(JSON.stringify(obj))
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To try out this new pepper lets open the developer tools in a new tab and sharpen our sour-sweet tooth.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;devtools.png&quot; alt=&quot;Screenshot of the Firefox developer tools in console mode.&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;h2 id=&quot;how-many-calories-has-the-appetizer&quot;&gt;How many calories has the appetizer ?&lt;&#x2F;h2&gt;
&lt;p&gt;In order to measure the amount of memory that Immutable.js uses by itself lets marinate it in a quick and dirty formula:&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;Open the devtools&lt;&#x2F;li&gt;
&lt;li&gt;Define a simple array with a single item in it and print it to the console
&lt;ul&gt;
&lt;li&gt;&lt;pre style=&quot;background-color:#151515;color:#e8e8d3;&quot;&gt;&lt;code&gt;&lt;span&gt; let test1 = [1337];
&lt;&#x2F;span&gt;&lt;span&gt; console.log(test1);
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;pre style=&quot;background-color:#151515;color:#e8e8d3;&quot;&gt;&lt;code&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;Measure the memory usage (memory tab of the dev tools)&lt;&#x2F;li&gt;
&lt;li&gt;Load Immutable.js directly into the console (copy pasting its minified source directly into the console)&lt;&#x2F;li&gt;
&lt;li&gt;Define a simple list with a single item in it and print it to the console
&lt;ul&gt;
&lt;li&gt;&lt;pre style=&quot;background-color:#151515;color:#e8e8d3;&quot;&gt;&lt;code&gt;&lt;span&gt; let test2 = Immutable.List.of(1337);
&lt;&#x2F;span&gt;&lt;span&gt; console.log(test2);
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;pre style=&quot;background-color:#151515;color:#e8e8d3;&quot;&gt;&lt;code&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;Measure the memory usage again&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;p&gt;The key points are 3. and 6. so lets do it and take a look into the memory info. For these measures I am using Firefox Developer Edition 53.0a2 (2017-03-05) (64-bit) in OSX Sierra.&lt;&#x2F;p&gt;
&lt;p&gt;After point 3. I have 2.11MB of used memory with the following layout:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;em&gt;scripts&lt;&#x2F;em&gt;: 37KiB (347 objects)&lt;&#x2F;li&gt;
&lt;li&gt;&lt;em&gt;strings&lt;&#x2F;em&gt;: 362KiB (9685 objects)&lt;&#x2F;li&gt;
&lt;li&gt;&lt;em&gt;objects&lt;&#x2F;em&gt;: 813KiB (11325 objects)&lt;&#x2F;li&gt;
&lt;li&gt;&lt;em&gt;other&lt;&#x2F;em&gt;: 849KiB (18365 objects)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;This is for nothing but an empty tab with devtools opened after point 3. in the magic formula.&lt;&#x2F;p&gt;
&lt;p&gt;Now lets load &lt;a href=&quot;https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;facebook&#x2F;immutable-js&#x2F;master&#x2F;dist&#x2F;immutable.min.js&quot;&gt;Immutable.js raw minification&lt;&#x2F;a&gt; and run the rest of the steps.&lt;&#x2F;p&gt;
&lt;p&gt;After point 6.  I have 2.53MB of used memory with the following layout:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;em&gt;scripts&lt;&#x2F;em&gt;: 248KiB (1717 objects)&lt;&#x2F;li&gt;
&lt;li&gt;&lt;em&gt;strings&lt;&#x2F;em&gt;: 384KiB (10252 objects)&lt;&#x2F;li&gt;
&lt;li&gt;&lt;em&gt;objects&lt;&#x2F;em&gt;: 904KiB (12618 objects)&lt;&#x2F;li&gt;
&lt;li&gt;&lt;em&gt;other&lt;&#x2F;em&gt;: 933KiB (19984 objects)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;&lt;strong&gt;Immutable.js makes the memory usage go up from 2.1MB to about 2.5MB.&lt;&#x2F;strong&gt; That&#x27;s around 0.4MB just to load the minified Immutable.js in memory.&lt;&#x2F;p&gt;
&lt;p&gt;Lets keep this value as a reference in further tests. I am keeping these memory snapshots also for further reference.&lt;&#x2F;p&gt;
&lt;p&gt;How can we leverage the juice from these 0.4MB into our secret sauce ?&lt;&#x2F;p&gt;
&lt;h2 id=&quot;a-list-of-many-secrets&quot;&gt;A list of many secrets&lt;&#x2F;h2&gt;
&lt;p&gt;Immutable allows the discerning chef to cook with well defined ingredients. You can define your own data types and use them as immutable everywhere you want to. To do that the Immutable.Record is their provided interface. &lt;&#x2F;p&gt;
&lt;p&gt;The following code uses it to define a data type for a 2D point, with X and Y coordinates, and then create some points with it.&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#151515;color:#e8e8d3;&quot;&gt;&lt;code&gt;&lt;span&gt;const Pt = Immutable.Record( { x: 0, y: 0} );
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;const pt1 = new Pt(); &#x2F;&#x2F; uses x: 0, y: 0 by default
&lt;&#x2F;span&gt;&lt;span&gt;const pt2 = new Pt({ y: 123 }); &#x2F;&#x2F; uses x: 0 by default
&lt;&#x2F;span&gt;&lt;span&gt;const pt3 = new Pt({ x: 123, y: 321 }); &#x2F;&#x2F; uses your provided values
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Fast-food junkies could do the same in straight JS with the simpler approach:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#151515;color:#e8e8d3;&quot;&gt;&lt;code&gt;&lt;span&gt;function PtJS(x = 0, y = 0) {
&lt;&#x2F;span&gt;&lt;span&gt;	this.x = x;
&lt;&#x2F;span&gt;&lt;span&gt;	this.y = y;
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;let jspt1 = new PtJS();
&lt;&#x2F;span&gt;&lt;span&gt;let jspt2 = new PtJS(0, 123);
&lt;&#x2F;span&gt;&lt;span&gt;let jspt3 = new PtJS(123, 321);
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Some might even argue that they are not wasting the memory that Immutable is. Master chefs are always looking for opportunities to learn, to study and to teach. &lt;&#x2F;p&gt;
&lt;p&gt;Now for a simple test, create a list with 10000 of those 2D points and compare memory readings of the Immutable approach with the plain JS approach.&lt;&#x2F;p&gt;
&lt;p&gt;First the plain JS approach (lets assume the constructor is already created as above).&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#151515;color:#e8e8d3;&quot;&gt;&lt;code&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;let testArray = [];
&lt;&#x2F;span&gt;&lt;span&gt;for(let i = 0; i &amp;lt; 10000; i++) {
&lt;&#x2F;span&gt;&lt;span&gt;  testArray.push(new PtJS());
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;After measuring this in the Memory tab we get 2.92MB in this layout:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;em&gt;scripts&lt;&#x2F;em&gt;: 228KiB (1692 objects)&lt;&#x2F;li&gt;
&lt;li&gt;&lt;em&gt;strings&lt;&#x2F;em&gt;: 384KiB (10251 objects)&lt;&#x2F;li&gt;
&lt;li&gt;&lt;em&gt;objects&lt;&#x2F;em&gt;: 1MiB (22688 objects)&lt;&#x2F;li&gt;
&lt;li&gt;&lt;em&gt;other&lt;&#x2F;em&gt;: 888KiB (19990 objects)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;That seems fair, we get an increase of about 390KiB in comparison to our previous measurement. That should be enough motivation to roll our Chefs Knives suitecase of Persistency and do it in Immutable style to measure it on top of this 2.92MB already in use.&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#151515;color:#e8e8d3;&quot;&gt;&lt;code&gt;&lt;span&gt;const defaultPt = new Pt();
&lt;&#x2F;span&gt;&lt;span&gt;const testLst = Immutable.Repeat(defaultPt, 10000);
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;After measuring this in the Memory tab we get 2.91MB. This is a decrease of about 10KiB from our previous memory usage. How is this possible ? Is the data even there ?&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#151515;color:#e8e8d3;&quot;&gt;&lt;code&gt;&lt;span&gt;testLst.first().x;
&lt;&#x2F;span&gt;&lt;span&gt;&#x2F;&#x2F; returns 0
&lt;&#x2F;span&gt;&lt;span&gt;testLst.size();
&lt;&#x2F;span&gt;&lt;span&gt;&#x2F;&#x2F; returns 10000
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Yep, it&#x27;s all there. Immutable.js allows you to take good care of your memory, but as with all sharp knifes you need to know how to avoid hurting yourself. Lets dive a bit further to understand what is going on and how to master these data structures.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;master-chef-mystery-boxes&quot;&gt;Master Chef Mystery Boxes&lt;&#x2F;h2&gt;
&lt;p&gt;One common misconception about immutable data structures is that there is a lot of useless copying being done. In fact this is so common that there are even &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rtfeldman&#x2F;seamless-immutable&quot;&gt;JS libraries based on it&lt;&#x2F;a&gt;. Playing with the flavour of common things note the most typical data structure in functional languages.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;the-single-linked-list&quot;&gt;The single linked list.&lt;&#x2F;h3&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;immutable-list1.gif&quot; alt=&quot;A single linked list with 3 values&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Supposed that this is a immutable list. It is not possible to add, remove or change its values without returning a new version of it.&lt;&#x2F;p&gt;
&lt;p&gt;Does this mean that we need to copy all of it when we need to put a new value in it ? Not necessarily. We can just create the new list item and make sure its pointer is targeting the beginning of the original list.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;immutable-list2.png&quot; alt=&quot;Placing a new value in the previous list&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;This works because the list is immutable, we know for sure that the original list won&#x27;t change so &lt;strong&gt;it is possible to reuse its values&lt;&#x2F;strong&gt;, no copying is involved in this.&lt;&#x2F;p&gt;
&lt;p&gt;As before, our new immutable list is again defined by its first value, which in this new case is our new value.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;master-the-simple-cuts-first&quot;&gt;Master the simple cuts first&lt;&#x2F;h3&gt;
&lt;p&gt;Many operations are possible on our immutable single linked list that leverage the fact that it is an immutable list.&lt;&#x2F;p&gt;
&lt;p&gt;Operations like &lt;em&gt;head&lt;&#x2F;em&gt; (return the first value in the list) and &lt;em&gt;tail&lt;&#x2F;em&gt; (return all the items in the list except for the first) are almost instantaneous to implement. For &lt;em&gt;head&lt;&#x2F;em&gt; we just return the value of the first item and for &lt;em&gt;tail&lt;&#x2F;em&gt; we just return the first item pointer value (which is an immutable single linked list, in this case, our original 3 value list).&lt;&#x2F;p&gt;
&lt;h4 id=&quot;concat&quot;&gt;Concat&lt;&#x2F;h4&gt;
&lt;p&gt;Joining two lists is one of those simple operations that is worth your time and attention in order to understand it. If we have 2 different immutable lists that we want to join we need to go to the first list and adjust the last pointer of the last item to point to the first item of the second list.&lt;&#x2F;p&gt;
&lt;p&gt;Here it is in pictures:&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;immutable_two_lists.png&quot; alt=&quot;Joining these two lists&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;immutable_two_lists_2.png&quot; alt=&quot;We need to make the last item point to the first item of the second list&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;immutable_two_lists_3.png&quot; alt=&quot;A copy of this element is necessary because we can&#x27;t just change it to point to the first item of lst2&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;immutable_two_lists_4.png&quot; alt=&quot;But now we need to make the previous item point to the newly created copy. So a copy of it will also be necessary.&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;immutable_two_lists_final.png&quot; alt=&quot;That is why to concat two lists a new list is made with a copy of the elements in the first list&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Concat is a heavy operation, it mostly depends on the size of the first list. There are a few tricks to make it faster.&lt;&#x2F;p&gt;
&lt;p&gt;To keep it simple I am not going to go much more into this and move to the point.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;the-best-recipe-is-made-of-many-subrecipes&quot;&gt;The best recipe is made of many subrecipes&lt;&#x2F;h2&gt;
&lt;p&gt;The list holds data. That&#x27;s why it&#x27;s called a &lt;em&gt;data&lt;&#x2F;em&gt; structure. Now what if instead of directly putting our data in each list item we could instead just point to the data ? Like this:&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;immutable_lazy1.png&quot; alt=&quot;List doesn&#x27;t directly hold the data anymore&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;The list effectively now holds &lt;strong&gt;a way to reach&lt;&#x2F;strong&gt; each value instead of the real values. We can get more generic and greatly simplify it by saying that in each list item there is a recipe to reach each value. In the above picture this &lt;em&gt;recipe&lt;&#x2F;em&gt; generalization is represented by the red arrows.&lt;&#x2F;p&gt;
&lt;p&gt;Let me try to simplify it with the hope that it might stand out the intended purpose.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;immutable_lazy2.png&quot; alt=&quot;A list of recipes can be a list of values&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;The term &lt;em&gt;recipe&lt;&#x2F;em&gt; is not chosen by chance: it represents something that must be done to produce the value that the list item holds.&lt;&#x2F;p&gt;
&lt;p&gt;If we follow the &lt;em&gt;recipe&lt;&#x2F;em&gt; in each item we can get to the intended values. For instance, suppose that this is a list of JS Number&#x27;s, a good recipe to produce the value would be to just call Number() on the data. If it was a list of String&#x27;s, a good recipe would be to call String() on the data. This also holds for very complex values, say this is a list of balanced tree&#x27;s, or your favourite custom complex data type, &lt;strong&gt;a recipe is the way to construct the value&lt;&#x2F;strong&gt;, could just be following a pointer but perhaps that would not be a very useful constructor due to being too general.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;lazy-concat&quot;&gt;Lazy concat&lt;&#x2F;h3&gt;
&lt;p&gt;In our previous look into &lt;em&gt;concat&lt;&#x2F;em&gt; we noticed that it was a heavy operation, requiring a full copy of the first list that we want to join. When working with immutable data there are only a few of these &amp;quot;heavy&amp;quot; operations that do need a full copy.&lt;&#x2F;p&gt;
&lt;p&gt;Now that we are taking quality steps as chefs how about we use a &lt;em&gt;recipe&lt;&#x2F;em&gt; for concat ?&lt;&#x2F;p&gt;
&lt;p&gt;Instead of doing a full copy of the first list, just copy the first element and make it point to a recipe. That way, no matter the size of the lists, concat would be done in a single operation (the first item). Here it is in a picture:&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;immutable_concat_lazy.png&quot; alt=&quot;Why copy the whole first list if we don&#x27;t know if it will be needed ?&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Now if we need the second element of the list the recipe will be followed to get it.&lt;&#x2F;p&gt;
&lt;p&gt;That is a simple recipe:
copy the first list up to the needed value, if the copying is done but the intended value is not yet reached then start going through the second list values (without copying them). In the case we want the 2nd value of a concat&#x27;ed list a single copy will happen because we already copied the first item when concat was called. This is a case where the recipe is itself the whole concat operation, meaning that it will only copy until the end of the first list and after it will use the reference of the second list.&lt;&#x2F;p&gt;
&lt;p&gt;This &lt;a href=&quot;https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Thunk&quot;&gt;&lt;em&gt;recipe&lt;&#x2F;em&gt;&lt;&#x2F;a&gt; approach is usually known as laziness and typically enhanced with a cache of results to avoid copying and constructing the same values over again (this caching approach is known as &amp;quot;memoization&amp;quot;).&lt;&#x2F;p&gt;
&lt;h2 id=&quot;cuisine-du-monde&quot;&gt;Cuisine du monde&lt;&#x2F;h2&gt;
&lt;p&gt;Immutable.js makes good use of these techniques to avoid doing work when necessary and unnecessary copies. Their approach is lean and well thought, clearly separating the values from the way they are traversed.&lt;&#x2F;p&gt;
&lt;p&gt;Lets look at our Immutable approach again:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#151515;color:#e8e8d3;&quot;&gt;&lt;code&gt;&lt;span&gt;const defaultPt = new Pt();
&lt;&#x2F;span&gt;&lt;span&gt;const testLst = Immutable.Repeat(defaultPt, 10000);
&lt;&#x2F;span&gt;&lt;span&gt;testLst.first().x;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;A few things stand out:&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;We are always using the same reference &lt;em&gt;defaultPt&lt;&#x2F;em&gt; instead of creating a new value in each item.
&lt;ul&gt;
&lt;li&gt;This is possible thanks to immutability, if we change it we are effectively creating a new value and a new list.&lt;&#x2F;li&gt;
&lt;li&gt;Immutability encourages reutilization and is typically a GC friendly approach.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;Repeat just returns a &lt;em&gt;recipe&lt;&#x2F;em&gt; (thunk)
&lt;ul&gt;
&lt;li&gt;No heavy work is actually done, it just returns a way to access and construct the values&lt;&#x2F;li&gt;
&lt;li&gt;We used 10000 but could have used infinite with no performance or memory hit&lt;&#x2F;li&gt;
&lt;li&gt;Work is only done when values are being requested and only up until them.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;p&gt;Immutable.js also uses a few other tricks to speed up common operations. For instance their List approach uses deques, which means that it keeps your list split in two, so [1,2,3,4,5,6] is kept by Immutable as [1,2,3] and [6,5,4] (reversed rest). This is a very simplified explanation of it, but in practice it allows for very fast insertions in the beginning and end of the list (&lt;a href=&quot;http:&#x2F;&#x2F;blog.klipse.tech&#x2F;javascript&#x2F;2016&#x2F;06&#x2F;23&#x2F;immutable-perf.html&quot;&gt;faster than JS arrays&lt;&#x2F;a&gt;).&lt;&#x2F;p&gt;
&lt;h2 id=&quot;conclusion&quot;&gt;Conclusion&lt;&#x2F;h2&gt;
&lt;p&gt;Immutable is certainly a different way of doing JS. Given the normal tendency JS coders have to lean more towards object oriented concepts, immutable feels like the schrodinger&#x27;s immigrant in a foreign land.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;immigrant.jpeg&quot; alt=&quot;&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;I hope this post was in any way useful to you. Immutable sure is a fun library to get to know and work with. &lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>vi is not vim</title>
        <published>2017-08-12T00:00:00+00:00</published>
        <updated>2017-08-12T00:00:00+00:00</updated>
        <author>
          <name>Unknown</name>
        </author>
        <link rel="alternate" href="https://hugodaniel.com/posts/vi-is-not-vim/" type="text/html"/>
        <id>https://hugodaniel.com/posts/vi-is-not-vim/</id>
        
        <content type="html">&lt;p&gt;When dinossaurs ruled the earth there was a young kid that had just installed Red Hat Linux 5 on his computer.&lt;br&#x2F;&gt;
Fascinated with the &amp;quot;OS for the elite&amp;quot; he was about to experience a devouring frustration.
The kind that gives rise to dark divinities that come to haunt you in your sleep for years to come:&lt;&#x2F;p&gt;
&lt;p&gt;Trying to exit vim.&lt;&#x2F;p&gt;
&lt;p&gt;After a few unsuccessful atempts the computer &lt;em&gt;power switch&lt;&#x2F;em&gt; was the only option left. Like that the dream of a promising carreer in elite-land was shattered for that young boy.&lt;&#x2F;p&gt;
&lt;p&gt;That young boy was me.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;high-tech-editor-low-tech-coder&quot;&gt;High tech editor, low tech coder&lt;&#x2F;h2&gt;
&lt;p&gt;My stubbornness always took the best part of my reason and vim was my editor for years to come. Since rough starts are the perfect driver for a good love story I then ditched it to take a stroll in netbeans land. &lt;br&#x2F;&gt;After a while a pardon was due and got back to it again. Then I ditched it again for Visual Studio. &lt;br&#x2F;&gt;Got back to it again. And so on.&lt;&#x2F;p&gt;
&lt;p&gt;Code editors today try to do everything and a pair of boots. Even vim, known for its minimalist looks, is very prone to config-pr0n worthy of the most wild and nasty fantasies.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;i-ll-show-you-mine-if-you-show-me-yours&quot;&gt;I&#x27;ll show you mine if you show me yours&lt;&#x2F;h2&gt;
&lt;p&gt;At one point I got myself in the middle of a config discussion between developers. They were arguing about good .vimrc config options and plugins for vim.&lt;&#x2F;p&gt;
&lt;p&gt;I decided to participate and show my ~60 lines .vimrc file. They laughed. It was so small. Almost useless.&lt;&#x2F;p&gt;
&lt;p&gt;That got me thinking:&lt;&#x2F;p&gt;
&lt;p&gt;&lt;strong&gt;What do i &lt;em&gt;really&lt;&#x2F;em&gt; need in a code editor ?&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;p&gt;After giving a hard thought on my usage&#x2F;preferences and some possible optimizations I took a look into the market of code editors and decided to &lt;strong&gt;upgrade from vim to vi&lt;&#x2F;strong&gt; (by vi I mean &lt;a href=&quot;http:&#x2F;&#x2F;repo.or.cz&#x2F;nvi.git&quot;&gt;nvi 1.81.6, still maintained and developed here&lt;&#x2F;a&gt; ).&lt;&#x2F;p&gt;
&lt;p&gt;The rest of this blog post is about some nvi parts (vi, not vim), in particular some parts that are percieved as limitations. I will run through them and try to provide arguments that favor them and reasons to use them. Have your salt and pepper at hand before reading further.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;minimal-config-file-exrc&quot;&gt;Minimal config file (.exrc)&lt;&#x2F;h2&gt;
&lt;p&gt;The nvi config file is named .exrc, here is my current setup:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#151515;color:#e8e8d3;&quot;&gt;&lt;code&gt;&lt;span&gt;set showmode
&lt;&#x2F;span&gt;&lt;span&gt;set showmatch
&lt;&#x2F;span&gt;&lt;span&gt;set ruler
&lt;&#x2F;span&gt;&lt;span&gt;set shiftwidth=2
&lt;&#x2F;span&gt;&lt;span&gt;set tabstop=2
&lt;&#x2F;span&gt;&lt;span&gt;set verbose
&lt;&#x2F;span&gt;&lt;span&gt;set leftright
&lt;&#x2F;span&gt;&lt;span&gt;set cedit=\
&lt;&#x2F;span&gt;&lt;span&gt;set filec=\
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;9 lines only. No maintenance. No BS.&lt;&#x2F;p&gt;
&lt;p&gt;These options are mostly similar to those in .vimrc, a special note for cedit and filec, these have a =\&amp;lt;TAB&amp;gt; (the &amp;lt;TAB&amp;gt; is the actual tab character there after the \).
The &lt;strong&gt;cedit&lt;&#x2F;strong&gt; property sets the character to trigger command expansion in the vi command colon mode. The &lt;strong&gt;filec&lt;&#x2F;strong&gt; sets the the character for file name expansion (auto-complete) when opening a new file inside vi (e.g. with :e).&lt;&#x2F;p&gt;
&lt;p&gt;All of these are well documented in the man page.&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#151515;color:#e8e8d3;&quot;&gt;&lt;code&gt;&lt;span&gt;$ man nvi
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;no-unicode-support&quot;&gt;No unicode support&lt;&#x2F;h2&gt;
&lt;p&gt;There are some vi implementations that support multibyte characters like &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;lichray&#x2F;nvi2&quot;&gt;nvi2&lt;&#x2F;a&gt;. But for this blog post I am assuming your vi is plain &lt;a href=&quot;https:&#x2F;&#x2F;sites.google.com&#x2F;a&#x2F;bostic.com&#x2F;keithbostic&#x2F;vi&#x2F;&quot;&gt;nvi&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;No multibyte, wide-char, wtf-8, extended codepoints. Although those are very important to learn and master I do prefer to keep code in plain strict single-byte ASCII (UTF-8 supersedes it).&lt;&#x2F;p&gt;
&lt;p&gt;&lt;strong&gt;Why ?&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;p&gt;It keeps the language coherent with the programming reserved words (more than logic constructs, &lt;em&gt;while&lt;&#x2F;em&gt;, &lt;em&gt;for&lt;&#x2F;em&gt;, &lt;em&gt;if&lt;&#x2F;em&gt;, are english words).&lt;&#x2F;p&gt;
&lt;p&gt;It makes it perfectly visible when an accidental wide-char is inserted (particularly helpful if you are using a keyboard layout that does not use the US key-mapping). This is good to make sure your code is available to read on every system, regardless of locale (it even works if someone opens the code you wrote in an editor that is set to default to UTF-8 encoding).&lt;&#x2F;p&gt;
&lt;p&gt;Another good thing is that it works with a wider variety of fonts. Some monospace terminal fonts can&#x27;t correctly display all UTF-8 characters.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;strong&gt;But I sometimes need to write documents with strange characters&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;p&gt;That is one of the scenarios where I would use another text editor. nvi is strictly a code&#x2F;config editor.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;no-syntax-highlighting&quot;&gt;No syntax highlighting&lt;&#x2F;h2&gt;
&lt;p&gt;This is another personal preference. It has been a long time since I had to worry about syntax when producing code. If you still struggle with syntax then please use syntax highlighting, it will help those special words stand out.
Otherwise why not give it a try without syntax highlighting for a while (a few weeks to be slightly above the habituation threshold) and measure how you perform ?&lt;&#x2F;p&gt;
&lt;p&gt;It does help to keep your functions small and easy to read.&lt;&#x2F;p&gt;
&lt;p&gt;Comments are shown with their true weight and your commented code is promoted to the same importance as your production code.&lt;&#x2F;p&gt;
&lt;p&gt;Your focus will be in semantics and it is easier to get into it without the syntax aggressively jumping at your face.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;fast-undo&quot;&gt;Fast undo&lt;&#x2F;h2&gt;
&lt;p&gt;Like in vim the undo in vi is very convenient but has a slightly different way of operating. Instead of pressing &lt;em&gt;u&lt;&#x2F;em&gt; multiple times to go through the various undo levels and then ctrl-r to redo, in vi you do it by pressing &lt;em&gt;u&lt;&#x2F;em&gt; once to undo and the &#x27;&lt;strong&gt;.&lt;&#x2F;strong&gt;&#x27; to go through the various undo levels.&lt;&#x2F;p&gt;
&lt;p&gt;To redo you press &lt;em&gt;u&lt;&#x2F;em&gt; twice (undo the undo) and then &#x27;&lt;strong&gt;.&lt;&#x2F;strong&gt;&#x27; to go through the multiple redo levels.&lt;&#x2F;p&gt;
&lt;p&gt;I think this is slightly more coherent and it also makes use of the &#x27;&lt;strong&gt;.&lt;&#x2F;strong&gt;&#x27; (repeat action) operator in an arguably more logical way.&lt;&#x2F;p&gt;
&lt;p&gt;Like in vim, you can use the &lt;em&gt;U&lt;&#x2F;em&gt; command to restore a line to the state it was before the cursor was placed on top of it (undoing all the chances since that time).&lt;&#x2F;p&gt;
&lt;h2 id=&quot;no-visual-mode&quot;&gt;No visual mode&lt;&#x2F;h2&gt;
&lt;p&gt;There is no visual mode in vi (visual mode as in pressing the &lt;em&gt;v&lt;&#x2F;em&gt; command and using your movement keys to select an area of text).&lt;&#x2F;p&gt;
&lt;p&gt;At first this might seem like a big handicap, but vi shares a few commands with vim that once mastered can make you more productive than using the visual mode.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;strong&gt;Marks &lt;em&gt;m&amp;lt;insert letter here&amp;gt;&lt;&#x2F;em&gt;&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;p&gt;You can setup marks in text, if you type &lt;em&gt;mx&lt;&#x2F;em&gt; it will define the mark x at the current cursor position. Typically these are used to move quickly through the file and go to certain marked positions. For that the &#x27; command is used followed by the mark character name (moves to the line) or with the ` command (moves to the exact cursor position of the mark). To move to mark x do &#x27;x (assuming you did &lt;em&gt;mx&lt;&#x2F;em&gt; in some place before).&lt;&#x2F;p&gt;
&lt;p&gt;Marks can also be used with other common commands like yank, delete, etc..., so instead of using the visual mode you can yank or delete to a a mark set at some position.&lt;br&#x2F;&gt;
To do that use the &lt;em&gt;t&lt;&#x2F;em&gt; or &lt;em&gt;f&lt;&#x2F;em&gt; commands, like ytx (I read it as: &lt;em&gt;y&lt;&#x2F;em&gt;ank &lt;em&gt;t&lt;&#x2F;em&gt;o &lt;em&gt;x&lt;&#x2F;em&gt;), it will yank all lines up to (but not including) the line at mark x. To include it use the &lt;em&gt;f&lt;&#x2F;em&gt; as in yfx.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;no-tabs&quot;&gt;No tabs&lt;&#x2F;h2&gt;
&lt;p&gt;Tabs was a feature that I used a lot in vim, unfortunately they only work with vim, so if you want to run a shell command or have a terminal to read compiler output you will need to use them with some other kind of tab system.&lt;&#x2F;p&gt;
&lt;p&gt;On my journey to the limits of usefulness I found myself using vim tabs together with tmux tabs and terminal (osx) tabs.&lt;&#x2F;p&gt;
&lt;p&gt;After those crazy days (months ?) I finally decided to ditch all tabs and stick to a single tool for that purpose, one that is versatile enough to cover my use cases for tabs.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;strong&gt;Do one thing and do it well&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;tmux&#x2F;tmux&#x2F;wiki&quot;&gt;Tmux&lt;&#x2F;a&gt; is my current tool of choice, nowadays I don&#x27;t use terminal tabs or text editor tabs. I leave that work for tmux, an amazing productivity tool that allows me to work fullscreen in zen mode with the code.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;strong&gt;Panes in vi&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Like in vim you can split your window with panes, these are useful to use another section of code as a quick reference or to do some quick yank&#x2F;past in vi between files&#x2F;sections.&lt;&#x2F;p&gt;
&lt;p&gt;The pane system in vi works slightly different from vim. To vertically split the window you can also use the :vs, but to horizontally split the window :sp won&#x27;t work. In vi the command to horizontally split a window is the :E, as in Edit (the same as :e but horizontally split).&lt;&#x2F;p&gt;
&lt;p&gt;To switch between panes ctrl-w will immediately move your cursor to the next window pane. Instead of pressing twice like vim you only need to press it once. This is hard to get used to at first but it is also hard to live without once used to it.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;nvi_tmux_macos.png&quot; alt=&quot;My nvi with tmux on macos&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;h2 id=&quot;no-macros&quot;&gt;No macros&lt;&#x2F;h2&gt;
&lt;p&gt;One feature that I consistently used in vim was macros (vim &lt;em&gt;q&lt;&#x2F;em&gt; command). It was easy to create bundles of commands and run them to do your repeated text tasks or grunt work. Very useful when replicating huge data files or setting up a &lt;a href=&quot;https:&#x2F;&#x2F;hugodaniel.com&#x2F;posts&#x2F;mastering-console-log&#x2F;&quot;&gt;big JSON test file&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;In vi you can also use the power of macros through buffers.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;strong&gt;Buff it up&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Buffers are easy to use, you can prefix your common text manipulation commands (dd, yy, etc...) to a named buffer. To do that start the command with &amp;quot;&amp;lt;buffer name&amp;gt; where &amp;lt;buffer name&amp;gt; is any letter from a-z.&lt;&#x2F;p&gt;
&lt;p&gt;Here are some examples:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;To delete 4 lines and place them into buffer a&lt;&#x2F;strong&gt; &amp;quot;a4dd&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;To paste buffer &lt;em&gt;a&lt;&#x2F;em&gt; to the current cursor position&lt;&#x2F;strong&gt; &amp;quot;ap&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;To view all your buffers go to ex mode (:) and do&lt;&#x2F;strong&gt; :di b&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;&lt;strong&gt;Who needs macros when you have buffers&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Write a few commands to be executed in your file, place then in a buffer and tell vi that you want to execute the buffer:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#151515;color:#e8e8d3;&quot;&gt;&lt;code&gt;&lt;span&gt;2)
&lt;&#x2F;span&gt;&lt;span&gt;4dd
&lt;&#x2F;span&gt;&lt;span&gt;G
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Line by line:&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;move two lines down&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;delete 4 lines&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;go to the end of the file&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;p&gt;Put these into a buffer named &lt;em&gt;c&lt;&#x2F;em&gt; with &lt;i&gt;&amp;quot;c3yy&lt;&#x2F;i&gt; (yank 3 lines into buffer &lt;em&gt;c&lt;&#x2F;em&gt;), and whenever you want to run it just do &lt;em&gt;@ c&lt;&#x2F;em&gt;. Undo &lt;em&gt;u&lt;&#x2F;em&gt; also works nicely with buffered commands.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;upgrading-from-vim-to-vi&quot;&gt;Upgrading from vim to vi&lt;&#x2F;h2&gt;
&lt;p&gt;There are some cool benefits in using vi like how fast it is and how it handles huge files without a problem.&lt;&#x2F;p&gt;
&lt;p&gt;nvi also performs well in &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;jhallen&#x2F;joes-sandbox&#x2F;blob&#x2F;master&#x2F;editor-perf&#x2F;readme.md&quot;&gt;this benchmark of editors&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;The case for vi is like any other editor: a matter of getting used to it and keep perfecting your skills through it for what it really matters: writting great code.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;conclusion&quot;&gt;Conclusion&lt;&#x2F;h2&gt;
&lt;p&gt;Use what you are more confortable with. There are tradeoffs in every editor (even the mighty visual studio code does not allow you to work without syntax highlighting on...) and today nvi fits nicely with my way of working and approach.&lt;&#x2F;p&gt;
&lt;p&gt;I hope this post to be used as a initial reference and motivation to those that are looking for a more minimalistic way of doing things. I don&#x27;t intend it to start flame wars.&lt;&#x2F;p&gt;
&lt;p&gt;You know all of these are just my opinions :)&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Mastering console.log()</title>
        <published>2017-08-11T00:00:00+00:00</published>
        <updated>2017-08-11T00:00:00+00:00</updated>
        <author>
          <name>Unknown</name>
        </author>
        <link rel="alternate" href="https://hugodaniel.com/posts/mastering-console-log/" type="text/html"/>
        <id>https://hugodaniel.com/posts/mastering-console-log/</id>
        
        <content type="html">&lt;p&gt;Using &lt;code&gt;console.log()&lt;&#x2F;code&gt; to debug JavaScript, a dynamic weakly-typed interpreted language, feels like drinking beers on a lazy summer sunday afternoon.&lt;&#x2F;p&gt;
&lt;p&gt;It is easy and you do it without thinking too much on how you could probably be more productive doing something else.&lt;&#x2F;p&gt;
&lt;p&gt;Truth is that in all the other days of the week you don&#x27;t avoid spraying your code with the &lt;a href=&quot;https:&#x2F;&#x2F;developer.mozilla.org&#x2F;en-US&#x2F;docs&#x2F;Web&#x2F;JavaScript&#x2F;Reference&#x2F;Statements&#x2F;debugger&quot;&gt;&lt;code&gt;debugger&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; keyword and let the developer tools stop and show you the execution context at that exact location.&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#151515;color:#e8e8d3;&quot;&gt;&lt;code&gt;&lt;span&gt;function yourCodeThatCouldBeWorking() {
&lt;&#x2F;span&gt;&lt;span&gt;  const x = 1337;
&lt;&#x2F;span&gt;&lt;span&gt;  const y = parseInt(window.prompt(&amp;#39;Y value:&amp;#39;));
&lt;&#x2F;span&gt;&lt;span&gt;  debugger; &#x2F;&#x2F; &amp;lt;- hello
&lt;&#x2F;span&gt;&lt;span&gt;  return (x &#x2F; y);
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;But lazy summer sunday afternoons are on to get us, and &lt;code&gt;console.log()&lt;&#x2F;code&gt; is our friend for the mood.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;console-log-basic-mode&quot;&gt;console.log() basic mode&lt;&#x2F;h2&gt;
&lt;p&gt;The most basic usage of &lt;code&gt;console.log&lt;&#x2F;code&gt; is to just pass it a string. You can step this up a bit by following the string with JS objects and&#x2F;or strings. Like this:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#151515;color:#e8e8d3;&quot;&gt;&lt;code&gt;&lt;span&gt;const v1 = { x: 123, y: 321 };
&lt;&#x2F;span&gt;&lt;span&gt;console.log(&amp;quot;Vector v1: (&amp;quot;, v1.x, &amp;quot;,&amp;quot;, v1.y, &amp;quot;)&amp;quot;);
&lt;&#x2F;span&gt;&lt;span&gt;&#x2F;&#x2F; or just:
&lt;&#x2F;span&gt;&lt;span&gt;console.log(&amp;quot;Vector v1:&amp;quot;, v1);
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Try it in your developer tools console (Ctrl Shift i, or in mac Cmd Shift i).&lt;&#x2F;p&gt;
&lt;p&gt;This is a particularly simple and helpful way to properly debug JavaScript. Specially if your code is creating code or functions in runtime, making it hard to setup breakpoints in the debugger window.&lt;&#x2F;p&gt;
&lt;p&gt;But who needs breakpoints when we have &lt;code&gt;console.log&lt;&#x2F;code&gt; ? :)&lt;&#x2F;p&gt;
&lt;h2 id=&quot;colorful-console-log-composer-mode&quot;&gt;Colorful console.log() composer mode&lt;&#x2F;h2&gt;
&lt;p&gt;Besides its simplicity, my next favourite thing in &lt;code&gt;console.log&lt;&#x2F;code&gt; is that it also allows you to pass a format string to be replaced with what you want:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#151515;color:#e8e8d3;&quot;&gt;&lt;code&gt;&lt;span&gt;const v1 = { x: 123, y: 321 };
&lt;&#x2F;span&gt;&lt;span&gt;console.log(&amp;quot;v1 (%i, %i)&amp;quot;, v1.x, v1.y);
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;There are a handful of other &lt;a href=&quot;https:&#x2F;&#x2F;developer.mozilla.org&#x2F;en-US&#x2F;docs&#x2F;Web&#x2F;API&#x2F;console#Using_string_substitutions&quot;&gt;string substitutions&lt;&#x2F;a&gt; you can use.&lt;&#x2F;p&gt;
&lt;p&gt;While apparently this is not a big improvement over the simplest mode, it can be used to do a few things that would not be so easy otherwise.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;strong&gt;Colors in console.log&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;p&gt;You can style your output with CSS through the %c substitution:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#151515;color:#e8e8d3;&quot;&gt;&lt;code&gt;&lt;span&gt;const v1 = { x: 123, y: 321 };
&lt;&#x2F;span&gt;&lt;span&gt;console.log( &amp;quot;%c[Vector 1] %c(%i, %i)%c\nin object %o&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;           , &amp;quot;background: #242; color: #bada55&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;           , &amp;quot;background: #424; color: #c0ffee&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;           , v1.x, v1.y
&lt;&#x2F;span&gt;&lt;span&gt;           , &amp;quot;&amp;quot; &#x2F;&#x2F;&amp;lt;- clears style
&lt;&#x2F;span&gt;&lt;span&gt;           , v1
&lt;&#x2F;span&gt;&lt;span&gt;           );
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;&lt;strong&gt;Dynamically create your output&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;p&gt;You can also compose the log format string with code and pass it the args as needed.
Suppose you are logging messages that can have a varying number of attributes:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#151515;color:#e8e8d3;&quot;&gt;&lt;code&gt;&lt;span&gt;const someMsg =
&lt;&#x2F;span&gt;&lt;span&gt;  { type: &amp;quot;WORKER_ERROR&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;  , action: &amp;quot;division&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;  , args: [123, 0]
&lt;&#x2F;span&gt;&lt;span&gt;  };
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;function logMessage(msg) {
&lt;&#x2F;span&gt;&lt;span&gt;  let logFmt = &amp;quot;%c[%s]%c - %c%s%c&amp;quot;;
&lt;&#x2F;span&gt;&lt;span&gt;  let logArgs =
&lt;&#x2F;span&gt;&lt;span&gt;    [ &amp;quot;background: #242; color: #bada55&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;    , msg.type
&lt;&#x2F;span&gt;&lt;span&gt;    , &amp;quot;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;    , &amp;quot;background: #424; color: #c0ffee&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;    , msg.action
&lt;&#x2F;span&gt;&lt;span&gt;    , &amp;quot;&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;    ];
&lt;&#x2F;span&gt;&lt;span&gt;  if (msg.action === &amp;quot;division&amp;quot;) {
&lt;&#x2F;span&gt;&lt;span&gt;    logFmt += &amp;quot;: %i &#x2F; %i&amp;quot;;
&lt;&#x2F;span&gt;&lt;span&gt;    logArgs.push(msg.args[0]);
&lt;&#x2F;span&gt;&lt;span&gt;    logArgs.push(msg.args[1]);
&lt;&#x2F;span&gt;&lt;span&gt;  } else {
&lt;&#x2F;span&gt;&lt;span&gt;    logFmt += &amp;quot; with args %o&amp;quot;;
&lt;&#x2F;span&gt;&lt;span&gt;    logArgs.push(msg.args);
&lt;&#x2F;span&gt;&lt;span&gt;  }
&lt;&#x2F;span&gt;&lt;span&gt;  &#x2F;&#x2F; finally print it:
&lt;&#x2F;span&gt;&lt;span&gt;  console.log(logFmt, ...logArgs);
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;logMessage(someMsg);
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;measuring-console-log&quot;&gt;Measuring console.log()&lt;&#x2F;h2&gt;
&lt;p&gt;Another thing to keep in mind when using &lt;code&gt;console.log&lt;&#x2F;code&gt; is that it is not free. It does come with a performance hit, how much exactly ? Lets measure it like we did for &lt;a href=&quot;https:&#x2F;&#x2F;hugodaniel.com&#x2F;posts&#x2F;how-fast-is-nothing&#x2F;&quot;&gt;requestAnimationFrame()&lt;&#x2F;a&gt;:&lt;&#x2F;p&gt;
&lt;p&gt;For this test I am going to print just 32 simple console.log messages. I know that this is not a lot, it actually is nothing when compared to using console.log on mousemove events or any other fast firing event, but it should be enough to test.&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#151515;color:#e8e8d3;&quot;&gt;&lt;code&gt;&lt;span&gt;performance.mark(&amp;quot;Before&amp;quot;);
&lt;&#x2F;span&gt;&lt;span&gt;&#x2F;&#x2F; print 32 lines
&lt;&#x2F;span&gt;&lt;span&gt;for(let i = 0; i &amp;lt; 32; i++)
&lt;&#x2F;span&gt;&lt;span&gt;  console.log(&amp;quot;One of the simplest console.log() possible&amp;quot;, i);
&lt;&#x2F;span&gt;&lt;span&gt;performance.mark(&amp;quot;After&amp;quot;);
&lt;&#x2F;span&gt;&lt;span&gt;performance.measure(&amp;quot;console.log&amp;quot;, &amp;quot;Before&amp;quot;, &amp;quot;After&amp;quot;);
&lt;&#x2F;span&gt;&lt;span&gt;const totalTime = performance.getEntriesByType(&amp;quot;measure&amp;quot;)[0].duration;
&lt;&#x2F;span&gt;&lt;span&gt;console.log(&amp;quot;console.log() in %ims&amp;quot;, totalTime);
&lt;&#x2F;span&gt;&lt;span&gt;performance.clearMarks();
&lt;&#x2F;span&gt;&lt;span&gt;performance.clearMeasures();
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;In my Firefox Developer Edition (56.0b1) console it prints&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#151515;color:#e8e8d3;&quot;&gt;&lt;code&gt;&lt;span&gt;&amp;quot;console.log() in 15ms&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;15 milliseconds is &lt;em&gt;a lot&lt;&#x2F;em&gt; of time in a computer perspective, specially since we are just printing 32 messages, it is about 0.45ms per message.&lt;&#x2F;p&gt;
&lt;p&gt;To keep it in perspective here is the time it takes to parse a huge 128KB JSON string:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#151515;color:#e8e8d3;&quot;&gt;&lt;code&gt;&lt;span&gt;function jsonParseAndMeasure(jsonStr) {
&lt;&#x2F;span&gt;&lt;span&gt;  performance.mark(&amp;quot;jsonStart&amp;quot;);
&lt;&#x2F;span&gt;&lt;span&gt;  const json = JSON.parse(jsonStr);
&lt;&#x2F;span&gt;&lt;span&gt;  performance.mark(&amp;quot;jsonEnd&amp;quot;);
&lt;&#x2F;span&gt;&lt;span&gt;  performance.measure(&amp;quot;JSON.parse&amp;quot;, &amp;quot;jsonStart&amp;quot;, &amp;quot;jsonEnd&amp;quot;);
&lt;&#x2F;span&gt;&lt;span&gt;  const totalTime = performance.getEntriesByType(&amp;quot;measure&amp;quot;)[0].duration;
&lt;&#x2F;span&gt;&lt;span&gt;  console.log(&amp;quot;JSON.parse in %ims&amp;quot;, totalTime);
&lt;&#x2F;span&gt;&lt;span&gt;  performance.clearMarks();
&lt;&#x2F;span&gt;&lt;span&gt;  performance.clearMeasures();
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;jsonParseAndMeasure(&amp;quot;HUGE JSON STRING HERE&amp;quot;);
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;For a 128KB JSON string it prints:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#151515;color:#e8e8d3;&quot;&gt;&lt;code&gt;&lt;span&gt;&amp;quot;JSON.parse in 0ms&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Hmm... maybe that is not enough, lets increase it to a 2MB JSON string:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#151515;color:#e8e8d3;&quot;&gt;&lt;code&gt;&lt;span&gt;&amp;quot;JSON.parse in 0ms&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Ok... what about a 50MB JSON string ?&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#151515;color:#e8e8d3;&quot;&gt;&lt;code&gt;&lt;span&gt;&amp;quot;JSON.parse in 17ms&amp;quot;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Thats more like it. About the same time it took console.log to print 32 simple messages. There are a few attenuating factors for this in production, but it is good to keep this in mind when leaving those debugging messages in your production code ;)&lt;&#x2F;p&gt;
&lt;h2 id=&quot;buffering-console-log&quot;&gt;Buffering console.log()&lt;&#x2F;h2&gt;
&lt;p&gt;There is an alternative if you have your reasons to use &lt;code&gt;console.log&lt;&#x2F;code&gt; in production code: buffering.&lt;&#x2F;p&gt;
&lt;p&gt;Instead of printing each message as it comes, lets place them in an array and dump it in a single &lt;code&gt;console.log&lt;&#x2F;code&gt; call every second or so.&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#151515;color:#e8e8d3;&quot;&gt;&lt;code&gt;&lt;span&gt;let buffer = [];
&lt;&#x2F;span&gt;&lt;span&gt;&#x2F;&#x2F; use a log function instead of directly calling console.log:
&lt;&#x2F;span&gt;&lt;span&gt;function log(str, args) {
&lt;&#x2F;span&gt;&lt;span&gt;  buffer.push({ str, args });
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;function printBuffer() {
&lt;&#x2F;span&gt;&lt;span&gt;  &#x2F;&#x2F; start by copying the buffer and clearing it
&lt;&#x2F;span&gt;&lt;span&gt;  const buf = buffer.slice(0);
&lt;&#x2F;span&gt;&lt;span&gt;  buffer = [];
&lt;&#x2F;span&gt;&lt;span&gt;  &#x2F;&#x2F; dump the buffer in a single console.log call
&lt;&#x2F;span&gt;&lt;span&gt;  if (buf.length &amp;gt; 0) {
&lt;&#x2F;span&gt;&lt;span&gt;    let logStr = &amp;quot;&amp;quot;;
&lt;&#x2F;span&gt;&lt;span&gt;    let logArgs = [];
&lt;&#x2F;span&gt;&lt;span&gt;    buf.map(msg =&amp;gt; {
&lt;&#x2F;span&gt;&lt;span&gt;      logStr += &amp;quot;%s, %o\n&amp;quot;;
&lt;&#x2F;span&gt;&lt;span&gt;      logArgs.push(msg.str);
&lt;&#x2F;span&gt;&lt;span&gt;      logArgs.push(msg.args);
&lt;&#x2F;span&gt;&lt;span&gt;    });
&lt;&#x2F;span&gt;&lt;span&gt;    console.log(logStr, ...logArgs);
&lt;&#x2F;span&gt;&lt;span&gt;  }
&lt;&#x2F;span&gt;&lt;span&gt;  setTimeout(printBuffer, 1000); &#x2F;&#x2F; run every 1000ms
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;printBuffer(); &#x2F;&#x2F; &amp;lt;- start it
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;That should save you some performance complaints. I hope it helps :)&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Bootstrapping rain</title>
        <published>2017-08-08T00:00:00+00:00</published>
        <updated>2017-08-08T00:00:00+00:00</updated>
        <author>
          <name>Unknown</name>
        </author>
        <link rel="alternate" href="https://hugodaniel.com/posts/bootstrapping-rain/" type="text/html"/>
        <id>https://hugodaniel.com/posts/bootstrapping-rain/</id>
        
        <content type="html">&lt;p&gt;It has passed a year and a couple of months since I started bootstrapping &amp;quot;a painting web app&amp;quot;. A lot has happened since that time, here is a quick TL;DR:&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;I am still living off my savings (with a bit of help explained bellow)&lt;&#x2F;li&gt;
&lt;li&gt;Increase in frequency and amplitude of the emotional roller-coaster highs and lows&lt;&#x2F;li&gt;
&lt;li&gt;I started learning how to dance &lt;a href=&quot;https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=fbAbbodH7Dw&quot;&gt;kuduro&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=1VtDFi4m_PU&quot;&gt;kizomba and semba&lt;&#x2F;a&gt; to cope with 2&lt;&#x2F;li&gt;
&lt;li&gt;Had some unexpected expenses (teeth problems, car problems, general problems, problems problems, etc...)&lt;&#x2F;li&gt;
&lt;li&gt;Lots of noise&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;p&gt;Noise that I now take a careful distant look at and collide for you in this blog post by applying three different filters into it.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;1-what-am-i-doing&quot;&gt;1. What am i doing ?&lt;&#x2F;h2&gt;
&lt;p&gt;Many signals exist in the noise, among these the strongest ones imply that I don&#x27;t have a clue about what I am doing. In life.&lt;&#x2F;p&gt;
&lt;p&gt;After all this time one of the hardest challenges I still have is explaining to a random person what the project is about. Come to think of it I haven&#x27;t even done it here, how could I avoid my personal blog ? that blog that I personaly chose to neglect. Wait no further, here it goes.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;strong&gt;&amp;quot;A painting web app&amp;quot;&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;p&gt;This is a really reducing way of explaining what the project is about. Specificity wise I put it right after of &lt;em&gt;&amp;quot;It&#x27;s a programming project&amp;quot;&lt;&#x2F;em&gt;, or &lt;em&gt;&amp;quot;It&#x27;s a web page&amp;quot;&lt;&#x2F;em&gt;. It doesn&#x27;t say much more than these and whenever I use it people stare at me with that awkward face that blends simpathy with honest disapointment.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;strong&gt;Here is how it happened&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Back in the day I grew tired of my (many) wrong choices in life. This was particularly hard for me since I have always been a lover of what is wrong and bad. &amp;quot;Wasting&amp;quot; huge ammounts of time doing code for no reason&#x2F;purpose at all is not good and certainly not right. Investing years trying to produce CG code worthy of any unknown demoparty and their attendees acids. Realizing that I am not a good coder and still betting my life on the craft. Travelling through deserts only to hope &lt;a href=&quot;http:&#x2F;&#x2F;www.dailymotion.com&#x2F;video&#x2F;x67s70&quot;&gt;nobody sees my attempts at hoping to intoxicate with colors&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;It is 5am.
Another cold winter morning in Lisbon enhanced by the summer optimized windows and walls of my 37m^2 home. The rain leaks through the windows and I move the small ikea table enough to protect the laptop from getting wet. I don&#x27;t know why I am forcing myself to wake up this early, perhaps knowing that the queue to heaven is shorter at this time of the day and that maybe god will allow my body and mind the grace of being numb for the rest of the working day.&lt;&#x2F;p&gt;
&lt;p&gt;I can see work blowing up somewhere later in the day, I can feel it devouring my brain. I need this time to breathe. The warm coffee smell keeps me awake, its scent rises above all the burn bruises my hands acquired in trying to make it half-awake. Maybe the blessing will rain down on me today.&lt;&#x2F;p&gt;
&lt;p&gt;I have been reading &lt;a href=&quot;http:&#x2F;&#x2F;www.redblobgames.com&#x2F;grids&#x2F;hexagons&#x2F;&quot;&gt;this article about hexagonal grids&lt;&#x2F;a&gt; for some time now. &lt;em&gt;Fuck! Why can&#x27;t I implement it right ? Why is programming so hard for me ?&lt;&#x2F;em&gt; I have been trying to do this for months now. I have no purpose in it besides avoiding the razors in my day.&lt;&#x2F;p&gt;
&lt;p&gt;Offset coordinates ? Cube coordinates ? &lt;a href=&quot;https:&#x2F;&#x2F;dribbble.com&#x2F;search?q=grid&quot;&gt;If I was a designer what would I do ? What would I need ?&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Hmm....&lt;&#x2F;p&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;dribbble.com&#x2F;shots&#x2F;1483510-Mystery-Project-50&quot;&gt;&lt;img src=&quot;&#x2F;images&#x2F;mystery_project.jpg&quot; alt=&quot;ZX Spectrum color palette&quot; &#x2F;&gt;&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;It is 7am, my girlfriend will wake up at some point before 8. It is still dark outside, where did I leave the umbrella ? I go out to buy some hot bread to prepare our breakfast.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;2-holistic-approach&quot;&gt;2. Holistic approach&lt;&#x2F;h2&gt;
&lt;p&gt;Romance is a big part of bootstrapping.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;3-mentor&quot;&gt;3. Mentor&lt;&#x2F;h2&gt;
&lt;p&gt;In November 2016 the struggle to explain what the project is about led me to apply &lt;a href=&quot;https:&#x2F;&#x2F;www.iapmei.pt&#x2F;PRODUTOS-E-SERVICOS&#x2F;Empreendedorismo-Inovacao&#x2F;Empreendedorismo&#x2F;Startup-Voucher.aspx&quot;&gt;to a state sponsored funding&lt;&#x2F;a&gt;. In my mind I didn&#x27;t need the money since I was&#x2F;am living with low expenses on my savings, but they offered free access to a &amp;quot;portuguese mentorship network&amp;quot;. Mentorship that I knew that I could not afford and could not survive without. After answering their questions in a 22 page report I waited 5 months and got the response.&lt;&#x2F;p&gt;
&lt;p&gt;They liked the idea and decided to accept the project. I have been living the past 4 months with 690EUR&#x2F;month from them. This is enough to increase my life style, cover my expenses and still manage to save a bit each month.&lt;&#x2F;p&gt;
&lt;p&gt;The mentorship has been great. I was not expecting such a high quality work from the mentor that I chose from their huge list of available mentors.&lt;&#x2F;p&gt;
&lt;p&gt;I have since done the first prototype of the landing page for the graphic design web app &lt;a href=&quot;https:&#x2F;&#x2F;www.pixnit.com&quot;&gt;https:&#x2F;&#x2F;www.pixnit.com&lt;&#x2F;a&gt; and we have been focusing on applying this work on colors, grids and patterns on the ceramics industry (for a different, but related, product).&lt;&#x2F;p&gt;
&lt;p&gt;In september I will add a promotional video for the graphic design app and an open demo.&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Palettes 0xF Fun</title>
        <published>2017-03-01T00:00:00+00:00</published>
        <updated>2017-03-01T00:00:00+00:00</updated>
        <author>
          <name>Unknown</name>
        </author>
        <link rel="alternate" href="https://hugodaniel.com/posts/16-palettes-of-fun/" type="text/html"/>
        <id>https://hugodaniel.com/posts/16-palettes-of-fun/</id>
        
        <content type="html">&lt;p&gt;Like most of the country in the 80&#x27;s, Alenquer, the village where I was born, was trying to modernize itself in what can be considered an insurgence against its rural past.&lt;&#x2F;p&gt;
&lt;p&gt;The context of coming out from a strong harsh dictatorship and having recently joined the european comunity automatically made everyone who did not work a lazy person. Opportunities were everywhere. In fact this was so intense for the newer generations that working was not enough for them to avoid the &amp;quot;lazy stigma&amp;quot;. You had to explore, experiment, live and enjoy the &amp;quot;new&amp;quot;.&lt;&#x2F;p&gt;
&lt;p&gt;I was 6 years old when my parents made their after dinner routine visit to a friends house with the usual purpose of drinking and talking about stuff that seemed to matter. What was supposed to be just another day in the company of friends changed my life forever.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;strong&gt;&amp;quot;I have finally bought the computer&amp;quot;&lt;&#x2F;strong&gt;
he said, on the corridor table there was a box with a screen and keys to press.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;strong&gt;&amp;quot;It&#x27;s a schneider&amp;quot;&lt;&#x2F;strong&gt;
He turned it on, typed some words on the keys and started a game. The first computer game I saw and got the chance to play.&lt;&#x2F;p&gt;
&lt;iframe width=&quot;280&quot; height=&quot;157&quot; src=&quot;https:&#x2F;&#x2F;www.youtube.com&#x2F;embed&#x2F;Q-y8dvsLYJM&quot; frameborder=&quot;0&quot; allowfullscreen&gt;&lt;&#x2F;iframe&gt;
&lt;p&gt;I had lots of questions in my mind after playing it:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;How is it made ?&lt;&#x2F;li&gt;
&lt;li&gt;How does it move as i press the buttons ?&lt;&#x2F;li&gt;
&lt;li&gt;How are those colors drawn ?&lt;&#x2F;li&gt;
&lt;li&gt;How can i do it ?&lt;&#x2F;li&gt;
&lt;li&gt;Where can i get more of it ?&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;the-world-is-dangerous&quot;&gt;The world is dangerous&lt;&#x2F;h2&gt;
&lt;p&gt;Slightly older kids were having a blast with the ZX spectrum.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;https:&#x2F;&#x2F;upload.wikimedia.org&#x2F;wikipedia&#x2F;commons&#x2F;3&#x2F;33&#x2F;ZXSpectrum48k.jpg&quot; alt=&quot;ZX Spectrum computer&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;It became quite famous in Portugal, companies were using it to ease some calculations, kids were pirating cassettes, and there were even local radio stations that used to broadcast entire games through the air (which you could then record in your cassette tape). Electronics done right.&lt;&#x2F;p&gt;
&lt;p&gt;The speccy sported an impressive 16 color palette (15 actually, the black is repeated).&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;speccy_palette.png&quot; alt=&quot;ZX Spectrum color palette&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Apparently limited, these colors provided no limits to the fertile imagination of teens armed with a programming manual (the ZX Spectrum was sold with &lt;a href=&quot;http:&#x2F;&#x2F;www.worldofspectrum.org&#x2F;ZXBasicManual&#x2F;&quot;&gt;a programming manual&lt;&#x2F;a&gt; included and no ammount of words can be used to explain the social impact this had).&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;paradise_cafe.png&quot; alt=&quot;Paradise Cafe - breaking portuguese cultural and legal concepts in the 80s&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Gravitating towards that tech and gaming oriented crowd made me later aware of a bunch of other computers that were also very important even though they were never famous here.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;size-doesn-t-matter&quot;&gt;Size doesn&#x27;t matter&lt;&#x2F;h2&gt;
&lt;p&gt;The Amstrad CPC was a direct competitor of the Spectrum, it also had a base of 16 colors but expanded them into 27 in a &amp;quot;high-resolution&amp;quot; mode.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;cpc_spectrum.png&quot; alt=&quot;Amstrad vs Spectrum&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;This was a clear upgrade in comparison to the 16-colors of Spectrum.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;strider.png&quot; alt=&quot;The game &amp;quot;Strider&amp;quot; in Spectrum(left) and in the Amstrad CPC(right)&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;In spite of having more colors this palette shies when put against the mother of all 8-bit computer 16 color palettes:&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;C64-palette.png&quot; alt=&quot;The Commodore 64 color palette&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;These 16 colors alone allow for an amazing expression (if you are into it &lt;a href=&quot;http:&#x2F;&#x2F;unusedino.de&#x2F;ec64&#x2F;technical&#x2F;misc&#x2F;vic656x&#x2F;colors&#x2F;&quot;&gt;here is a detailed article&lt;&#x2F;a&gt; on how to reproduce them in RGB).&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;c64_cpc.png&quot; alt=&quot;C64 on the left, CPC on the right&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;A kind soul used both color palettes (C64 and Amstrad CPC) to &lt;a href=&quot;http:&#x2F;&#x2F;www.indieretronews.com&#x2F;2016&#x2F;02&#x2F;is-c64-palette-far-superior-to-amstrad.html&quot;&gt;produce a set of comparison images&lt;&#x2F;a&gt;, the C64 images are more natural and its grays are better distributed which in turn allows for slightly more complex shadows.&lt;&#x2F;p&gt;
&lt;p&gt;All these color palettes were made to be reproduced in TV screens from the 80&#x27;s. Some even take in consideration B&amp;amp;W TV&#x27;s as full 24bit RGB was still a few years away from commodity hardware.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;nowadays&quot;&gt;Nowadays&lt;&#x2F;h2&gt;
&lt;p&gt;Fast-forwarding for today, a &lt;a href=&quot;http:&#x2F;&#x2F;pixeljoint.com&#x2F;forum&#x2F;forum_posts.asp?TID=12795&quot;&gt;niche of people are still using 16 color palettes&lt;&#x2F;a&gt; and searching for possible combinations of colors that maximize expression. Most of these are related to &amp;quot;pixel art&amp;quot; communities and other minimalist art movements.&lt;&#x2F;p&gt;
&lt;p&gt;Truth is that there is a natural feeling in using colors in sets of 16 related elements. It gives you, the artist, a lot of paths to explore but not many enough to degrade the exploration experience into frustration.&lt;&#x2F;p&gt;
&lt;p&gt;As a final exercise I&#x27;ll leave three different loader screens for the same game. Try to see if you can guess which 8-bit computer is which.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;palette1.png&quot; alt=&quot;&quot; &#x2F;&gt;
&lt;img src=&quot;&#x2F;images&#x2F;palette2.png&quot; alt=&quot;&quot; &#x2F;&gt;
&lt;img src=&quot;&#x2F;images&#x2F;palette3.png&quot; alt=&quot;&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>A new name to surf 2017</title>
        <published>2017-01-18T00:00:00+00:00</published>
        <updated>2017-01-18T00:00:00+00:00</updated>
        <author>
          <name>Unknown</name>
        </author>
        <link rel="alternate" href="https://hugodaniel.com/posts/surfing-2017/" type="text/html"/>
        <id>https://hugodaniel.com/posts/surfing-2017/</id>
        
        <content type="html">&lt;p&gt;2016 was a year of change. I stopped working full-time as a programmer and decided to dedicate some of that time to personal projects. I made plans.
During the course of the year most of those plans got changed, a lot. My intention was to build &amp;quot;paint.pt&amp;quot;, a online painting tool, while supporting myself with some savings and with the money i could make by training people in programming skills.&lt;&#x2F;p&gt;
&lt;p&gt;I took teacher training and got a teacher certificate with the highest possible grade as i was full time on it.
Then got a few schools contacts that needed trainers for specific modules of some courses.&lt;&#x2F;p&gt;
&lt;p&gt;That was when I collided head-on with the portuguese reality of a fragile economy. I knew jobs were better here for programmers than for most other professions, so i was already somewhat mentally prepared to embrace a harsh reality.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;i-ll-pay-you-next-week&quot;&gt;&amp;quot;I&#x27;ll pay you next week&amp;quot;&lt;&#x2F;h2&gt;
&lt;p&gt;After a few courses money didn&#x27;t came. Excuses started to pile. It took a few months until the first bit of money appeared.&lt;&#x2F;p&gt;
&lt;p&gt;I ran to seek advice in a multitude of older, wiser people. What should i do ?&lt;&#x2F;p&gt;
&lt;p&gt;&lt;em&gt;&amp;quot;Hugo all of this is normal, you have to understand that most companies are struggling economically.&amp;quot;&lt;&#x2F;em&gt;&lt;&#x2F;p&gt;
&lt;p&gt;&lt;em&gt;&amp;quot;In portugal companies are trying to stay above water.&amp;quot;&lt;&#x2F;em&gt;&lt;&#x2F;p&gt;
&lt;p&gt;&lt;em&gt;&amp;quot;Don&#x27;t expect to be paid before 6 months.&amp;quot;&lt;&#x2F;em&gt;&lt;&#x2F;p&gt;
&lt;p&gt;I did try to extend my good will to parties that hire with the expectation of paying as late as possible.
The result of it was the realisation that ~10EUR&#x2F;hour isn&#x27;t enough for the time spent preparing the course, giving it and managing the debt until the employer decided to pay.&lt;&#x2F;p&gt;
&lt;p&gt;Time has come to scratch the initial plan and start fresh with a new strategy for 2017.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;change-of-name-change-of-plans&quot;&gt;Change of name, change of plans&lt;&#x2F;h2&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;em&gt;&amp;quot;What are you working on ?&amp;quot;&lt;&#x2F;em&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;em&gt;&amp;quot;A painting application&amp;quot;&lt;&#x2F;em&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;em&gt;&amp;quot;Cool, whats it called ?&amp;quot;&lt;&#x2F;em&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;em&gt;&amp;quot;paint.pt as in paint point&amp;quot;&lt;&#x2F;em&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;em&gt;&amp;quot;That already exists&amp;quot;&lt;&#x2F;em&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;A new name for the project was needed, and that is how Pixnit showed up. Pixnit a simple name that reads as &amp;quot;pixel knit&amp;quot; which is exactly what i want the tool to do.&lt;&#x2F;p&gt;
&lt;p&gt;I believe that people want to use custom shapes to create beautiful patterns and logos so that they can express themselves better and enhance current works, and that they will find value in it because trying to create logos, icons and patterns by using traditional software is hard and takes forever. &lt;&#x2F;p&gt;
&lt;p&gt;The domain was registered (pixnit.com) just in time for a complete change in strategy:&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;Take 1h each day to write in the blog;&lt;&#x2F;li&gt;
&lt;li&gt;Don&#x27;t work on anything else besides it and pixnit;&lt;&#x2F;li&gt;
&lt;li&gt;Push to release self contained small parts of pixnit as soon as possible;&lt;&#x2F;li&gt;
&lt;li&gt;Create a patreon;&lt;&#x2F;li&gt;
&lt;li&gt;Create a landing page;&lt;&#x2F;li&gt;
&lt;li&gt;Talk to people;&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;p&gt;Lets see where this goes. So no more trainings, no more certifications, no more noise. Just pixnit.&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>How fast is nothing at all ?</title>
        <published>2016-09-23T00:00:00+00:00</published>
        <updated>2016-09-23T00:00:00+00:00</updated>
        <author>
          <name>Unknown</name>
        </author>
        <link rel="alternate" href="https://hugodaniel.com/posts/how-fast-is-nothing/" type="text/html"/>
        <id>https://hugodaniel.com/posts/how-fast-is-nothing/</id>
        
        <content type="html">&lt;p&gt;One of the fastest functions that can be run inside &lt;a href=&quot;https:&#x2F;&#x2F;developer.mozilla.org&#x2F;en-US&#x2F;docs&#x2F;Web&#x2F;API&#x2F;window&#x2F;requestAnimationFrame&quot;&gt;requestAnimationFrame&lt;&#x2F;a&gt; goes something like this:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#151515;color:#e8e8d3;&quot;&gt;&lt;code&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;function fastest() {
&lt;&#x2F;span&gt;&lt;span&gt;  window.requestAnimationFrame(fastest);
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;window.requestAnimationFrame(fastest);
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;A simple no-op. It does nothing besides requesting to be called in another frame in order to do nothing besides requesting to be called in another frame, and so on.
A request for nothing that hopefully matches the speed of your monitor v-sync to hastily do just nothing.&lt;&#x2F;p&gt;
&lt;p&gt;Which gives us the perfect chance to use the most important skill we have in our life.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;giving-meaning-to-nothing&quot;&gt;Giving meaning to nothing&lt;&#x2F;h2&gt;
&lt;p&gt;Measuring the function can be done by &lt;a href=&quot;https:&#x2F;&#x2F;developer.mozilla.org&#x2F;en-US&#x2F;docs&#x2F;Web&#x2F;API&#x2F;Performance&#x2F;mark&quot;&gt;placing marks&lt;&#x2F;a&gt; and then collecting them with the &lt;a href=&quot;https:&#x2F;&#x2F;developer.mozilla.org&#x2F;en-US&#x2F;docs&#x2F;Web&#x2F;API&#x2F;Performance&#x2F;measure&quot;&gt;performance.measure() function&lt;&#x2F;a&gt;. To avoid placing a mark every frame lets also count them and place it only once every 120 frames. My monitor updates at about 60Hz so this should place a mark every 2 seconds.&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#151515;color:#e8e8d3;&quot;&gt;&lt;code&gt;&lt;span&gt;let count = 0;
&lt;&#x2F;span&gt;&lt;span&gt;&#x2F;&#x2F; ^ count each frame
&lt;&#x2F;span&gt;&lt;span&gt;function fastest() {
&lt;&#x2F;span&gt;&lt;span&gt;  window.requestAnimationFrame(fastest);
&lt;&#x2F;span&gt;&lt;span&gt;  count += 1;
&lt;&#x2F;span&gt;&lt;span&gt;  if(count === 120) {
&lt;&#x2F;span&gt;&lt;span&gt;    performance.mark(&amp;quot;120&amp;quot;);
&lt;&#x2F;span&gt;&lt;span&gt;    &#x2F;&#x2F; ^ place a mark in the 120th
&lt;&#x2F;span&gt;&lt;span&gt; }
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;performance.mark(&amp;quot;0&amp;quot;);
&lt;&#x2F;span&gt;&lt;span&gt;&#x2F;&#x2F; ^ place a mark before the first frame
&lt;&#x2F;span&gt;&lt;span&gt;window.requestAnimationFrame(fastest);
&lt;&#x2F;span&gt;&lt;span&gt;window.setTimeout(function() {
&lt;&#x2F;span&gt;&lt;span&gt;  &#x2F;&#x2F; measure the duration between those two marks;
&lt;&#x2F;span&gt;&lt;span&gt;  performance.measure(&amp;quot;120frames&amp;quot;, &amp;quot;0&amp;quot;, &amp;quot;120&amp;quot;);
&lt;&#x2F;span&gt;&lt;span&gt;  const measure = performance.getEntriesByType(&amp;quot;measure&amp;quot;)[0];
&lt;&#x2F;span&gt;&lt;span&gt;  console.log(&amp;quot;120 frames in: &amp;quot; + measure.duration);
&lt;&#x2F;span&gt;&lt;span&gt;}, 3000);
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;At 60fps we get around 16.7ms per frame, 120 frames should run in ~2000ms. Yet after 3 seconds this code prints &amp;quot;120 frames in: 2148.415&amp;quot; in the console.
This is 8% slower, making it closer to 55fps (18.2ms) than to 60fps(16.7ms).&lt;&#x2F;p&gt;
&lt;p&gt;If you thrive in the eccentricities of speed then those 1.5ms are simply unacceptable, lets try to understand what is happening by opening the &amp;quot;Performance&amp;quot; tab in the developer tools.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;the-eyes-are-the-window-of-the-soul-and-all-i-see-is-garbage&quot;&gt;The eyes are the window of the soul. And all i see is garbage.&lt;&#x2F;h2&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;measure1.png&quot; alt=&quot;Screenshot of the performance monitor of Firefox developer tools, it shows a maximum of 60 frames-per-second, a minimum 5.41 frames-per-second, and an average of 55.85 frames-per-second.&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Those big drops in performance are related to the red dots of the Garbage Collector (from here on, just &amp;quot;GC&amp;quot;). They mark the time where GC woke up and run through the nursery of temporary objects to clean them.&lt;&#x2F;p&gt;
&lt;p&gt;These GC actions happen at the rate that the code fills the nursery heap with temporary objects. The browser then performs a small cleanup on the nursery heap and checks if some of those temporary objects can be promoted to the tenured heap.&lt;&#x2F;p&gt;
&lt;p&gt;The Tenured heap fills at a much lower rate than the Nursery and consequently the browser does not check it as often as the Nursery.&lt;&#x2F;p&gt;
&lt;p&gt;Lets try to promote all our short lived objects into something that might be selected to be tenured by the browser, thus reducing the time that the GC spends analyzing our running code and the nursery heap.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;the-execution-context-is-dead-long-live-the-execution-context&quot;&gt;The execution context is dead. Long live the execution context!&lt;&#x2F;h2&gt;
&lt;p&gt;My first approach is to remove the first invocation to the requestAnimationFrame() and place it inside a global closure in &lt;a href=&quot;https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Immediately-invoked_function_expression&quot;&gt;IIFE&lt;&#x2F;a&gt; style.&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#151515;color:#e8e8d3;&quot;&gt;&lt;code&gt;&lt;span&gt;let count = 0;
&lt;&#x2F;span&gt;&lt;span&gt;(function() {
&lt;&#x2F;span&gt;&lt;span&gt;  function fastest() {
&lt;&#x2F;span&gt;&lt;span&gt;    window.requestAnimationFrame(fastest);
&lt;&#x2F;span&gt;&lt;span&gt;    count += 1;
&lt;&#x2F;span&gt;&lt;span&gt;    if(count === 120) {
&lt;&#x2F;span&gt;&lt;span&gt;      performance.mark(&amp;quot;120&amp;quot;);
&lt;&#x2F;span&gt;&lt;span&gt;    }
&lt;&#x2F;span&gt;&lt;span&gt;  }
&lt;&#x2F;span&gt;&lt;span&gt;  performance.mark(&amp;quot;0&amp;quot;);
&lt;&#x2F;span&gt;&lt;span&gt;  fastest();
&lt;&#x2F;span&gt;&lt;span&gt;  &#x2F;&#x2F; ^ call the function directly for the first frame
&lt;&#x2F;span&gt;&lt;span&gt;})();
&lt;&#x2F;span&gt;&lt;span&gt;&#x2F;&#x2F; ^ IIFE
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The idea here is to make the reference to the fastest() function explicitly last for the whole execution of the animation loop by wrapping it in a closure context that is immediatly called.&lt;&#x2F;p&gt;
&lt;p&gt;The next step is to remove all obvious objects allocations that happen inside our loop.
This means we need to remove all the strings (&amp;quot;120&amp;quot; is an object allocation) and all the numbers.&lt;&#x2F;p&gt;
&lt;p&gt;One of the great things about closures is that their execution context is available in their children, this means we can place the strings and numbers of our loop in vars in the long-lived closure context instead, making them live between our loop function calls.&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#151515;color:#e8e8d3;&quot;&gt;&lt;code&gt;&lt;span&gt;(function () {
&lt;&#x2F;span&gt;&lt;span&gt;  let count = 0;
&lt;&#x2F;span&gt;&lt;span&gt;  const limit = 120;
&lt;&#x2F;span&gt;&lt;span&gt;  const lastMark = &amp;quot;120&amp;quot;;
&lt;&#x2F;span&gt;&lt;span&gt;  const firstMark = &amp;quot;0&amp;quot;;
&lt;&#x2F;span&gt;&lt;span&gt;  &#x2F;&#x2F; ^ all vars go here
&lt;&#x2F;span&gt;&lt;span&gt;  function fastest() {
&lt;&#x2F;span&gt;&lt;span&gt;    window.requestAnimationFrame(fastest);
&lt;&#x2F;span&gt;&lt;span&gt;    count += 1;
&lt;&#x2F;span&gt;&lt;span&gt;    if(count === limit) {
&lt;&#x2F;span&gt;&lt;span&gt;      performance.mark(lastMark);
&lt;&#x2F;span&gt;&lt;span&gt;    }
&lt;&#x2F;span&gt;&lt;span&gt;  }
&lt;&#x2F;span&gt;&lt;span&gt;  &#x2F;&#x2F; ^ when the fastest() context finishes there
&lt;&#x2F;span&gt;&lt;span&gt;  &#x2F;&#x2F; are no obvious object allocations to free
&lt;&#x2F;span&gt;&lt;span&gt;  performance.mark(firstMark);
&lt;&#x2F;span&gt;&lt;span&gt;  fastest();
&lt;&#x2F;span&gt;&lt;span&gt;})();
&lt;&#x2F;span&gt;&lt;span&gt;&#x2F;&#x2F; setTimeout remains the same, this is just for performance measure
&lt;&#x2F;span&gt;&lt;span&gt;window.setTimeout(function() {
&lt;&#x2F;span&gt;&lt;span&gt;  performance.measure(&amp;quot;120frames&amp;quot;, &amp;quot;0&amp;quot;, &amp;quot;120&amp;quot;);
&lt;&#x2F;span&gt;&lt;span&gt;  const totalTime = performance.getEntriesByType(&amp;quot;measure&amp;quot;)[0].duration;
&lt;&#x2F;span&gt;&lt;span&gt;  console.log(&amp;quot;120 frames in: &amp;quot; + totalTime);
&lt;&#x2F;span&gt;&lt;span&gt;}, 3000);
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;a-speed-freak-nighmare-is-a-control-junkie-best-dream&quot;&gt;A speed-freak nighmare is a control-junkie best dream&lt;&#x2F;h2&gt;
&lt;p&gt;That code above produces the string &amp;quot;120 frames in: 1990.69&amp;quot;. This is great, it says that our measures were taken before the 16.7ms frame time has passed.&lt;&#x2F;p&gt;
&lt;p&gt;Lets look at the performance tab:&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;measure2.png&quot; alt=&quot;Screenshot of the performance monitor of Firefox developer tools, it shows a maximum of 60 frames-per-second, a minimum 38.98 frames-per-second, and an average of 57.66 frames-per-second.&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Note that the Nursery is completely gone from our call-stack. There are still some red dots that mostly refer to the Cycle Collector (from here on, just &amp;quot;CC&amp;quot;) taking control of the code.&lt;&#x2F;p&gt;
&lt;p&gt;The CC does a simple job: it tracks cycles in the code.&lt;&#x2F;p&gt;
&lt;p&gt;A cycle happens when objects refer to each other in a way that their reference count never becomes zero. This can trick the GC to never collect them and forces the need to have a cycle counter running through the code once in a while.&lt;&#x2F;p&gt;
&lt;p&gt;The CC is a tricky beast, it does not allow anything else to run while it is running. Our JavaScript stops executing (you can validate this by increasing the zoom on the developer tools waterfall when a CC action occurs).&lt;&#x2F;p&gt;
&lt;p&gt;Fortunately this is not hurting the performance that much and each frame gets rendered bellow their time by the browser. I was starting to have some chills with the idea of having to frame limit the render loop to ensure a constant frame rate.&lt;&#x2F;p&gt;
&lt;p&gt;Thankfully this Intel HD3000 is still good for Nothing at all :)&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;intel.png&quot; alt=&quot;Screenshot of the chrome:&#x2F;&#x2F;gpu page list of problems. Currently chrome does not support WebGL in Intel HD3000 cards on OSX.&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Thanks &lt;a href=&quot;https:&#x2F;&#x2F;twitter.com&#x2F;rqleve&quot;&gt;Raquel Foster&lt;&#x2F;a&gt; for reading this blog and motivating me to write this follow-up on &lt;a href=&quot;https:&#x2F;&#x2F;hugodaniel.com&#x2F;posts&#x2F;react-redux-canvas&#x2F;&quot;&gt;React-Redux-Canvas&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Bootstrapping - getting some boots to strap</title>
        <published>2016-08-11T00:00:00+00:00</published>
        <updated>2016-08-11T00:00:00+00:00</updated>
        <author>
          <name>Unknown</name>
        </author>
        <link rel="alternate" href="https://hugodaniel.com/posts/bootstrapping4/" type="text/html"/>
        <id>https://hugodaniel.com/posts/bootstrapping4/</id>
        
        <content type="html">&lt;p&gt;A lot has happened since the last post on this series. Against all odds the portuguese football team won the Euro2016, their first international cup! Summer also hit us hard shortly after that, heavy migrations towards the south (algarve) and the &amp;quot;fire season&amp;quot; started, consuming the green portions of this rectangular land.&lt;&#x2F;p&gt;
&lt;p&gt;Amidst all of these events it became clear to me that i needed a backup plan in order to extend my window of development time for the paint.pt project.&lt;&#x2F;p&gt;
&lt;p&gt;So during the month of July i took a one month course in how to teach and give formation and got a &amp;quot;certification of pedagogical competences&amp;quot; (aka teaching certification). This was a great time, i learned a lot, practiced a lot and read a lot about teaching and group interactions.&lt;&#x2F;p&gt;
&lt;p&gt;Now i only need to start practicing it in a way that does not harm the time I have to work on paint.pt. Are you in need of some coding lessons ? :)&lt;&#x2F;p&gt;
&lt;h2 id=&quot;in-august&quot;&gt;In August&lt;&#x2F;h2&gt;
&lt;p&gt;August is a very special month in portuguese culture. Nothing happens in august. Everything stops and services work in half speed (which in most cases is a synonym to stop).&lt;&#x2F;p&gt;
&lt;p&gt;Not me, i&#x27;m not a big fan of crowded beaches and hope to take the time to restart coding on paint.pt (that almost stopped during july).&lt;&#x2F;p&gt;
&lt;p&gt;For this month of August my plan is to finish the menu system and start painting :D. I already finished the &lt;a href=&quot;http:&#x2F;&#x2F;www.paint.pt&quot;&gt;logo and loading animation&lt;&#x2F;a&gt;. So stay tuned.&lt;&#x2F;p&gt;
&lt;p&gt;If you enjoy reading this please consider subscribing with your e-mail so we can stay in contact.&lt;&#x2F;p&gt;
&lt;p&gt;Check out the other &amp;quot;bootstrapping&amp;quot; posts: &lt;a href=&quot;https:&#x2F;&#x2F;hugodaniel.com&#x2F;posts&#x2F;bootstrapping1&#x2F;&quot;&gt;Bootstrapping 1&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;hugodaniel.com&#x2F;posts&#x2F;bootstrapping2&#x2F;&quot;&gt;Bootstrapping 2&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;hugodaniel.com&#x2F;posts&#x2F;bootstrapping3&#x2F;&quot;&gt;Bootstrapping 3&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Bootstrapping - week 3</title>
        <published>2016-06-24T00:00:00+00:00</published>
        <updated>2016-06-24T00:00:00+00:00</updated>
        <author>
          <name>Unknown</name>
        </author>
        <link rel="alternate" href="https://hugodaniel.com/posts/bootstrapping3/" type="text/html"/>
        <id>https://hugodaniel.com/posts/bootstrapping3/</id>
        
        <content type="html">&lt;p&gt;This week was a blast! I took 3 days off and only worked thursday and friday.&lt;&#x2F;p&gt;
&lt;p&gt;This wasn&#x27;t entirely on purpose, my intention was not to have real &amp;quot;vacations&amp;quot;, but to enjoy the overall Lisbon party mood. Tuesday was also the first game of the portuguese football team in euro 2016.&lt;&#x2F;p&gt;
&lt;p&gt;Though i am not a football fan, i do like to watch the portuguese team play with the eventuality of seeing some magical moves by Cristiano Ronaldo.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;ronaldo.jpg&quot; alt=&quot;Cristiano Ronaldo 2012&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;I know by experience that everything stops here in portugal when a big football match is going to happen. This is a strong motivator to go out drink some beers with friends in antecipation for the game.&lt;&#x2F;p&gt;
&lt;p&gt;It is important to note that a win by the home team is one of the best excuses to party hard. Unfortunately we did not win, it was a tie with Iceland, which meant no after party as a huge victory was expected.&lt;&#x2F;p&gt;
&lt;p&gt;Still it is better to enjoy the day than to stress with &amp;quot;having something to do&amp;quot;. Let the work be done on more appropriate days.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;3rd-week&quot;&gt;3rd Week&lt;&#x2F;h2&gt;
&lt;p&gt;The two remaining work days i wrote the &lt;a href=&quot;https:&#x2F;&#x2F;hugodaniel.com&#x2F;posts&#x2F;react-redux-canvas&#x2F;&quot;&gt;introductory post&lt;&#x2F;a&gt; on &amp;quot;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;HugoDaniel&#x2F;redux-canvas&quot;&gt;redux-canvas&lt;&#x2F;a&gt; and release it on npm together with a simple usage example.&lt;&#x2F;p&gt;
&lt;p&gt;This is going to be the basis of the paint application as it allows canvas (which is crippled with side-effects) to be used directly in pure redux actions.&lt;&#x2F;p&gt;
&lt;p&gt;And it was it. If you enjoy reading this please consider subscribing with your e-mail so we can stay in contact (i will personally send you an e-mail).&lt;&#x2F;p&gt;
&lt;p&gt;Check out the other &amp;quot;bootstrapping&amp;quot; posts: &lt;a href=&quot;https:&#x2F;&#x2F;hugodaniel.com&#x2F;posts&#x2F;bootstrapping1&#x2F;&quot;&gt;Bootstrapping 1&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;hugodaniel.com&#x2F;posts&#x2F;bootstrapping2&#x2F;&quot;&gt;Bootstrapping 2&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;hugodaniel.com&#x2F;posts&#x2F;bootstrapping4&#x2F;&quot;&gt;Bootstrapping 4&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>React - Redux - Canvas</title>
        <published>2016-06-17T00:00:00+00:00</published>
        <updated>2016-06-17T00:00:00+00:00</updated>
        <author>
          <name>Unknown</name>
        </author>
        <link rel="alternate" href="https://hugodaniel.com/posts/react-redux-canvas/" type="text/html"/>
        <id>https://hugodaniel.com/posts/react-redux-canvas/</id>
        
        <content type="html">&lt;p&gt;Painting stuff on a &lt;code&gt;&amp;lt;canvas&amp;gt;&lt;&#x2F;code&gt; is easy, call &lt;a href=&quot;https:&#x2F;&#x2F;developer.mozilla.org&#x2F;en-US&#x2F;docs&#x2F;Web&#x2F;API&#x2F;HTMLCanvasElement&#x2F;getContext&quot;&gt;HTMLCanvasElement.getContext()&lt;&#x2F;a&gt; to get the &lt;a href=&quot;https:&#x2F;&#x2F;developer.mozilla.org&#x2F;en-US&#x2F;docs&#x2F;Web&#x2F;API&#x2F;CanvasRenderingContext2D&quot;&gt;CanvasRenderingContext&lt;&#x2F;a&gt; and then use its functions to express yourself.&lt;&#x2F;p&gt;
&lt;p&gt;Doing an animation is also easy, call &lt;a href=&quot;https:&#x2F;&#x2F;developer.mozilla.org&#x2F;en-US&#x2F;docs&#x2F;Web&#x2F;API&#x2F;window&#x2F;requestAnimationFrame&quot;&gt;window.requestAnimationFrame()&lt;&#x2F;a&gt; to tell the browser that you want to do an animation, and on it use the &lt;a href=&quot;https:&#x2F;&#x2F;developer.mozilla.org&#x2F;en-US&#x2F;docs&#x2F;Web&#x2F;API&#x2F;CanvasRenderingContext2D&quot;&gt;CanvasRenderingContext&lt;&#x2F;a&gt; to animate as you see fit (tipically clearing the part of the drawing that changed and painting the new version of it).&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#151515;color:#e8e8d3;&quot;&gt;&lt;code&gt;&lt;span&gt;var canvasElem = document.getElementById(&amp;quot;canvas&amp;quot;);
&lt;&#x2F;span&gt;&lt;span&gt;var w = window.innerWidth;
&lt;&#x2F;span&gt;&lt;span&gt;var h = window.innerHeight;
&lt;&#x2F;span&gt;&lt;span&gt;var rectSize = 256;
&lt;&#x2F;span&gt;&lt;span&gt;&#x2F;&#x2F; set the canvas size
&lt;&#x2F;span&gt;&lt;span&gt;canvasElem.setAttribute(&amp;quot;width&amp;quot;, w);
&lt;&#x2F;span&gt;&lt;span&gt;canvasElem.setAttribute(&amp;quot;height&amp;quot;, h);
&lt;&#x2F;span&gt;&lt;span&gt;&#x2F;&#x2F; get the context
&lt;&#x2F;span&gt;&lt;span&gt;var ctx = canvasElem.getContext(&amp;quot;2d&amp;quot;);
&lt;&#x2F;span&gt;&lt;span&gt;&#x2F;&#x2F; the animation loop
&lt;&#x2F;span&gt;&lt;span&gt;function animation(t) {
&lt;&#x2F;span&gt;&lt;span&gt;  window.requestAnimationFrame(animation);
&lt;&#x2F;span&gt;&lt;span&gt;  var time = t*0.001;
&lt;&#x2F;span&gt;&lt;span&gt;  var cost = (Math.cos(time) + 1) &#x2F; 2;
&lt;&#x2F;span&gt;&lt;span&gt;  var sint = (Math.sin(time) + 1) &#x2F; 2;
&lt;&#x2F;span&gt;&lt;span&gt;  var rc = rectSize*cost;
&lt;&#x2F;span&gt;&lt;span&gt;  var rs = rectSize*sint;
&lt;&#x2F;span&gt;&lt;span&gt;  var color = `rgb(${Math.round(cost*255)},
&lt;&#x2F;span&gt;&lt;span&gt;               ${Math.round(sint*255)},
&lt;&#x2F;span&gt;&lt;span&gt;               255)`;
&lt;&#x2F;span&gt;&lt;span&gt;  ctx.fillStyle = color;
&lt;&#x2F;span&gt;&lt;span&gt;  &#x2F;&#x2F; a simple rectangle
&lt;&#x2F;span&gt;&lt;span&gt;  ctx.fillRect(rc, rs, rc, rs);
&lt;&#x2F;span&gt;&lt;span&gt;  };
&lt;&#x2F;span&gt;&lt;span&gt;window.requestAnimationFrame(animation);
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;h2 id=&quot;then-came-react&quot;&gt;Then came React&lt;&#x2F;h2&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;facebook.github.io&#x2F;react&#x2F;&quot;&gt;React&lt;&#x2F;a&gt; lets us use composable components of code and html elements to do our web apps of the future. To keep things running nicely it defines a common lifecycle for each component. The most simple version of it is that it &amp;quot;mounts&amp;quot; the component on the renderer and updates it when input changes.&lt;&#x2F;p&gt;
&lt;p&gt;The most used React DOM renderer is their official &lt;a href=&quot;https:&#x2F;&#x2F;www.npmjs.com&#x2F;package&#x2F;react-dom&quot;&gt;&amp;quot;react-dom&amp;quot;&lt;&#x2F;a&gt;, it uses minimal stateless virtual DOM elements (called ReactElements) for your components and pushes them to the real DOM when appropriate.&lt;&#x2F;p&gt;
&lt;p&gt;A common approach of using only &lt;a href=&quot;https:&#x2F;&#x2F;facebook.github.io&#x2F;react&#x2F;&quot;&gt;React&lt;&#x2F;a&gt; to paint on a &lt;code&gt;&amp;lt;canvas&amp;gt;&lt;&#x2F;code&gt; is to render the element and fetch the context when it is mounted. Here is an example of a basic canvas component:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#151515;color:#e8e8d3;&quot;&gt;&lt;code&gt;&lt;span&gt;export default class Canvas extends Component {
&lt;&#x2F;span&gt;&lt;span&gt;  componentDidMount() {
&lt;&#x2F;span&gt;&lt;span&gt;    let canvas = findDOMNode(this.refs.canvas),
&lt;&#x2F;span&gt;&lt;span&gt;        ctx = canvas.getContext(&amp;quot;2d&amp;quot;);
&lt;&#x2F;span&gt;&lt;span&gt;    this.props.onContext(ctx);
&lt;&#x2F;span&gt;&lt;span&gt;  }
&lt;&#x2F;span&gt;&lt;span&gt;  render() {
&lt;&#x2F;span&gt;&lt;span&gt;    const { width, height } = this.props;
&lt;&#x2F;span&gt;&lt;span&gt;    const canvasCx = `Canvas ${this.props.className}`;
&lt;&#x2F;span&gt;&lt;span&gt;    return (
&lt;&#x2F;span&gt;&lt;span&gt;      &amp;lt;canvas className={canvasCx} ref=&amp;quot;canvas&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;              width={width + &amp;quot;px&amp;quot;} height={height + &amp;quot;px&amp;quot;}
&lt;&#x2F;span&gt;&lt;span&gt;              style={ { display: &amp;quot;block&amp;quot; } }
&lt;&#x2F;span&gt;&lt;span&gt;      &#x2F;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;    );
&lt;&#x2F;span&gt;&lt;span&gt;  };
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;Canvas.propTypes =
&lt;&#x2F;span&gt;&lt;span&gt;  { width:     PropTypes.number.isRequired
&lt;&#x2F;span&gt;&lt;span&gt;  , height:    PropTypes.number.isRequired
&lt;&#x2F;span&gt;&lt;span&gt;  , onContext: PropTypes.func.isRequired
&lt;&#x2F;span&gt;&lt;span&gt;  };
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;To increase reusability the context is passed to the parent component where it can be used by its developer sprawling moisture of creative juices.&lt;&#x2F;p&gt;
&lt;p&gt;Here is an example of a component that draws a simple grid using the Canvas component defined above.&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#151515;color:#e8e8d3;&quot;&gt;&lt;code&gt;&lt;span&gt;import React, { Component, PropTypes } from &amp;quot;react&amp;quot;;
&lt;&#x2F;span&gt;&lt;span&gt;import { findDOMNode }                 from &amp;quot;react-dom&amp;quot;;
&lt;&#x2F;span&gt;&lt;span&gt;import Canvas                          from &amp;quot;.&#x2F;Canvas.jsx&amp;quot;;
&lt;&#x2F;span&gt;&lt;span&gt;
&lt;&#x2F;span&gt;&lt;span&gt;export default class GridCanvas extends Component {
&lt;&#x2F;span&gt;&lt;span&gt;  constructor(props, context) {
&lt;&#x2F;span&gt;&lt;span&gt;    super(props, context);
&lt;&#x2F;span&gt;&lt;span&gt;    this.state = { ctx: null }
&lt;&#x2F;span&gt;&lt;span&gt;  };
&lt;&#x2F;span&gt;&lt;span&gt;  _renderGrid() {
&lt;&#x2F;span&gt;&lt;span&gt;    const { color, lineWidth, squareSize
&lt;&#x2F;span&gt;&lt;span&gt;          , offsetX, offsetY
&lt;&#x2F;span&gt;&lt;span&gt;          , width, height
&lt;&#x2F;span&gt;&lt;span&gt;          } = this.props;
&lt;&#x2F;span&gt;&lt;span&gt;    const { ctx } = this.state;
&lt;&#x2F;span&gt;&lt;span&gt;    &#x2F;&#x2F; adjust for vertical screens:
&lt;&#x2F;span&gt;&lt;span&gt;    const limit = Math.max(width, height);
&lt;&#x2F;span&gt;&lt;span&gt;    ctx.beginPath();
&lt;&#x2F;span&gt;&lt;span&gt;    ctx.moveTo(0, 0);
&lt;&#x2F;span&gt;&lt;span&gt;    &#x2F;&#x2F; draw the horizontal lines
&lt;&#x2F;span&gt;&lt;span&gt;    for( let y = offsetY % squareSize; y &amp;lt; limit; y += squareSize) {
&lt;&#x2F;span&gt;&lt;span&gt;      ctx.moveTo(0, y);
&lt;&#x2F;span&gt;&lt;span&gt;      ctx.lineTo(width, y);
&lt;&#x2F;span&gt;&lt;span&gt;    }
&lt;&#x2F;span&gt;&lt;span&gt;    &#x2F;&#x2F; draw the vertical lines
&lt;&#x2F;span&gt;&lt;span&gt;    for( var x = offsetX % squareSize; x &amp;lt; limit; x += squareSize) {
&lt;&#x2F;span&gt;&lt;span&gt;      ctx.moveTo(x, 0);
&lt;&#x2F;span&gt;&lt;span&gt;      ctx.lineTo(x, height);
&lt;&#x2F;span&gt;&lt;span&gt;    }
&lt;&#x2F;span&gt;&lt;span&gt;    ctx.lineWidth = lineWidth;
&lt;&#x2F;span&gt;&lt;span&gt;    ctx.strokeStyle = color;
&lt;&#x2F;span&gt;&lt;span&gt;    ctx.stroke();
&lt;&#x2F;span&gt;&lt;span&gt;    ctx.closePath();
&lt;&#x2F;span&gt;&lt;span&gt;  }
&lt;&#x2F;span&gt;&lt;span&gt;  render() {
&lt;&#x2F;span&gt;&lt;span&gt;    const { width, height, cursor, color } = this.props;
&lt;&#x2F;span&gt;&lt;span&gt;    const { ctx } = this.state;
&lt;&#x2F;span&gt;&lt;span&gt;    if( ctx ) {
&lt;&#x2F;span&gt;&lt;span&gt;      &#x2F;&#x2F; canvas render commands go here
&lt;&#x2F;span&gt;&lt;span&gt;      ctx.clearRect(0, 0, width, height);
&lt;&#x2F;span&gt;&lt;span&gt;      this._renderGrid();
&lt;&#x2F;span&gt;&lt;span&gt;    }
&lt;&#x2F;span&gt;&lt;span&gt;    return (
&lt;&#x2F;span&gt;&lt;span&gt;      &amp;lt;Canvas className={ `GridCanvas ${this.props.className}` }
&lt;&#x2F;span&gt;&lt;span&gt;              width={width} height={height}
&lt;&#x2F;span&gt;&lt;span&gt;              onContext={ ctx =&amp;gt; this.setState( { ctx } ) }
&lt;&#x2F;span&gt;&lt;span&gt;      &#x2F;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;    );
&lt;&#x2F;span&gt;&lt;span&gt;  };
&lt;&#x2F;span&gt;&lt;span&gt;}
&lt;&#x2F;span&gt;&lt;span&gt;GridCanvas.propTypes =
&lt;&#x2F;span&gt;&lt;span&gt;  { color:      PropTypes.string
&lt;&#x2F;span&gt;&lt;span&gt;  &#x2F;&#x2F; ^ color for the stroke of the outline of the grid
&lt;&#x2F;span&gt;&lt;span&gt;  , lineWidth:  PropTypes.number
&lt;&#x2F;span&gt;&lt;span&gt;  &#x2F;&#x2F; ^ the width, in pixels, for the grid line
&lt;&#x2F;span&gt;&lt;span&gt;  , offsetX:    PropTypes.number
&lt;&#x2F;span&gt;&lt;span&gt;  , offsetY:    PropTypes.number
&lt;&#x2F;span&gt;&lt;span&gt;  , cursor:     PropTypes.string
&lt;&#x2F;span&gt;&lt;span&gt;  &#x2F;&#x2F; ^ the mouse cursor to use when mouse is over the grid
&lt;&#x2F;span&gt;&lt;span&gt;  , squareSize: PropTypes.number
&lt;&#x2F;span&gt;&lt;span&gt;  , width:      PropTypes.number.isRequired
&lt;&#x2F;span&gt;&lt;span&gt;  , height:     PropTypes.number.isRequired
&lt;&#x2F;span&gt;&lt;span&gt;  };
&lt;&#x2F;span&gt;&lt;span&gt;GridCanvas.defaultProps =
&lt;&#x2F;span&gt;&lt;span&gt;  { cursor: &amp;quot;default&amp;quot;
&lt;&#x2F;span&gt;&lt;span&gt;  };
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The &lt;a href=&quot;https:&#x2F;&#x2F;developer.mozilla.org&#x2F;en-US&#x2F;docs&#x2F;Web&#x2F;API&#x2F;CanvasRenderingContext2D&quot;&gt;CanvasRenderingContext&lt;&#x2F;a&gt; is kept in the state and then used in render() to clear and draw the shapes. This way the code is run in sync with the &lt;a href=&quot;https:&#x2F;&#x2F;facebook.github.io&#x2F;react&#x2F;docs&#x2F;component-specs.html&quot;&gt;React DOM flow&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;This works very well if you intend to draw single frame art, however since it is coping with &lt;a href=&quot;https:&#x2F;&#x2F;facebook.github.io&#x2F;react&#x2F;docs&#x2F;component-specs.html&quot;&gt;React lifecycle flow&lt;&#x2F;a&gt; it might not be the best approach if you intend to have 60fps animations because the &lt;a href=&quot;https:&#x2F;&#x2F;facebook.github.io&#x2F;react&#x2F;index.html&quot;&gt;React&lt;&#x2F;a&gt; logic will be running alongside your context drawing code in those precious 16ms of the frame.&lt;&#x2F;p&gt;
&lt;p&gt;You can try to optimize your &lt;a href=&quot;https:&#x2F;&#x2F;facebook.github.io&#x2F;react&#x2F;index.html&quot;&gt;React&lt;&#x2F;a&gt; UI with &lt;a href=&quot;https:&#x2F;&#x2F;facebook.github.io&#x2F;react&#x2F;docs&#x2F;component-specs.html#updating-shouldcomponentupdate&quot;&gt;shouldComponentUpdate&lt;&#x2F;a&gt; and you should. But it is still going to contend when your UI hasn&#x27;t changed and all you want to do is to update the &lt;code&gt;&amp;lt;canvas&amp;gt;&lt;&#x2F;code&gt; with a master piece of an animation.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;react-but-only-partially&quot;&gt;React, but only partially&lt;&#x2F;h2&gt;
&lt;p&gt;Luckily &lt;a href=&quot;https:&#x2F;&#x2F;facebook.github.io&#x2F;react&#x2F;index.html&quot;&gt;React&lt;&#x2F;a&gt; is not intrusive and &lt;a href=&quot;https:&#x2F;&#x2F;www.npmjs.com&#x2F;package&#x2F;react-dom&quot;&gt;&amp;quot;react-dom&amp;quot;&lt;&#x2F;a&gt; is intended to be used along standard HTML&#x2F;JS code. This allows developers to only use &lt;a href=&quot;https:&#x2F;&#x2F;facebook.github.io&#x2F;react&#x2F;index.html&quot;&gt;React&lt;&#x2F;a&gt; on certain parts of their website, the aspiring artist can then use it for most of the parts of the app and keep the &lt;code&gt;&amp;lt;canvas&amp;gt;&lt;&#x2F;code&gt; outside of its logic.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;html&quot; style=&quot;background-color:#151515;color:#e8e8d3;&quot; class=&quot;language-html &quot;&gt;&lt;code class=&quot;language-html&quot; data-lang=&quot;html&quot;&gt;&lt;span&gt;&amp;lt;!doctype html&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;html&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;  &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;head&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt; &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;title&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;React and Canvas&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;title&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt; &amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;head&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;  &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;body&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;div id&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;react-root&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;      &lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&amp;lt;!-- react goes here --&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;div&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;canvas id&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;animation&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;canvas&lt;&#x2F;span&gt;&lt;span&gt;&#x2F;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;script src&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;https:&#x2F;&#x2F;fb.me&#x2F;react-15.0.1.js&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;script&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;script src&lt;&#x2F;span&gt;&lt;span&gt;=&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;https:&#x2F;&#x2F;fb.me&#x2F;react-dom-15.0.1.js&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;script&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;    &amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;script&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;      &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;var &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;animNode &lt;&#x2F;span&gt;&lt;span&gt;= document.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;getElementById&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;animation&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span&gt;      &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;var &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;ctx &lt;&#x2F;span&gt;&lt;span&gt;= &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;animNode&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;getContext&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;2d&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span&gt;      &lt;&#x2F;span&gt;&lt;span style=&quot;color:#8fbfdc;&quot;&gt;function &lt;&#x2F;span&gt;&lt;span style=&quot;color:#fad07a;&quot;&gt;loop&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;t&lt;&#x2F;span&gt;&lt;span&gt;) {
&lt;&#x2F;span&gt;&lt;span&gt;        window.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;requestAnimationFrame&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;loop&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span&gt;        &lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; draw something on the canvas
&lt;&#x2F;span&gt;&lt;span&gt;      }
&lt;&#x2F;span&gt;&lt;span&gt;      window.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;requestAnimationFrame&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;loop&lt;&#x2F;span&gt;&lt;span&gt;);
&lt;&#x2F;span&gt;&lt;span&gt;      &lt;&#x2F;span&gt;&lt;span style=&quot;color:#888888;&quot;&gt;&#x2F;&#x2F; React renders on the &amp;quot;react-root&amp;quot; node
&lt;&#x2F;span&gt;&lt;span&gt;      &lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;ReactDOM&lt;&#x2F;span&gt;&lt;span&gt;.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;render&lt;&#x2F;span&gt;&lt;span&gt;(&amp;lt;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;MyApp &lt;&#x2F;span&gt;&lt;span&gt;&#x2F;&amp;gt;, document.&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;getElementById&lt;&#x2F;span&gt;&lt;span&gt;(&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#99ad6a;&quot;&gt;react-root&lt;&#x2F;span&gt;&lt;span style=&quot;color:#556633;&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;span&gt;));
&lt;&#x2F;span&gt;&lt;span&gt;    &amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;script&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;  &amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;body&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;span&gt;&amp;lt;&#x2F;&lt;&#x2F;span&gt;&lt;span style=&quot;color:#ffb964;&quot;&gt;html&lt;&#x2F;span&gt;&lt;span&gt;&amp;gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;All is good if you don&#x27;t intend to make the &lt;code&gt;&amp;lt;canvas&amp;gt;&lt;&#x2F;code&gt; high-speed animation interact with the &lt;a href=&quot;https:&#x2F;&#x2F;facebook.github.io&#x2F;react&#x2F;index.html&quot;&gt;React&lt;&#x2F;a&gt; part of the code.&lt;&#x2F;p&gt;
&lt;p&gt;If you want to communicate between the &lt;code&gt;&amp;lt;canvas&amp;gt;&lt;&#x2F;code&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;facebook.github.io&#x2F;react&#x2F;index.html&quot;&gt;React&lt;&#x2F;a&gt; then you will have to adopt some interaction strategy (e.g. passing a callback as a prop; using plain JS events; etc...).&lt;&#x2F;p&gt;
&lt;p&gt;However if you have been through the trenches, your battle proven developer experience is probably telling you that this is an optimization trade-off that will quickly grow into a pessimization.&lt;&#x2F;p&gt;
&lt;p&gt;State will most likely start to accumulate outside and inside of both parts as communication starts becoming more intricate and managing it will give you with many scars to heal.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;redux-will-make-good-for-all-our-sins&quot;&gt;Redux will make good for all our sins&lt;&#x2F;h2&gt;
&lt;p&gt;&lt;a href=&quot;http:&#x2F;&#x2F;redux.js.org&#x2F;&quot;&gt;Redux&lt;&#x2F;a&gt; defines a unidirectional flow of data on your application. It uses a single store to hold the application state and allows it to be updated by a pure function that computes the next state based on the actions dispatched by the app. They call the pure function a &amp;quot;reducer&amp;quot; and you can have as many of them in your app as you want.&lt;&#x2F;p&gt;
&lt;p&gt;This is within the spirit of pure components: something that always produces the same output if fed with the same input. When used with &lt;a href=&quot;https:&#x2F;&#x2F;facebook.github.io&#x2F;react&#x2F;index.html&quot;&gt;React&lt;&#x2F;a&gt; it opens the door to simpler optimized components with predictable state.&lt;&#x2F;p&gt;
&lt;p&gt;Unfortunately the &lt;a href=&quot;https:&#x2F;&#x2F;developer.mozilla.org&#x2F;en-US&#x2F;docs&#x2F;Web&#x2F;API&#x2F;CanvasRenderingContext2D&quot;&gt;CanvasRenderingContext&lt;&#x2F;a&gt; is not pure, its functions rely on a bunch of inner state that can change outside of their scope. This makes it hard to master and to manage (on the other side it has sprawled a counteless number of JS libs to work with it).&lt;&#x2F;p&gt;
&lt;p&gt;It also makes it difficult to integrate with &lt;a href=&quot;http:&#x2F;&#x2F;redux.js.org&#x2F;&quot;&gt;Redux&lt;&#x2F;a&gt; which by design expects pure actions and state. It is useless to keep the &lt;a href=&quot;https:&#x2F;&#x2F;developer.mozilla.org&#x2F;en-US&#x2F;docs&#x2F;Web&#x2F;API&#x2F;CanvasRenderingContext2D&quot;&gt;CanvasRenderingContext&lt;&#x2F;a&gt; in the store and update it with a reducer because its drawing functions will change it outside the pure flow of &lt;a href=&quot;http:&#x2F;&#x2F;redux.js.org&#x2F;&quot;&gt;Redux&lt;&#x2F;a&gt; actions.&lt;&#x2F;p&gt;
&lt;p&gt;To make things a bit worse, high-performance canvas applications &lt;a href=&quot;https:&#x2F;&#x2F;developer.mozilla.org&#x2F;en-US&#x2F;docs&#x2F;Web&#x2F;API&#x2F;Canvas_API&#x2F;Tutorial&#x2F;Optimizing_canvas&quot;&gt;are encouraged&lt;&#x2F;a&gt; to follow a set of destructive&#x2F;impure practices which are hard to follow if using React&#x2F;Redux.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;introducing-redux-canvas&quot;&gt;Introducing &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;HugoDaniel&#x2F;redux-canvas&quot;&gt;redux-canvas&lt;&#x2F;a&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;What if along with the &lt;a href=&quot;http:&#x2F;&#x2F;redux.js.org&#x2F;&quot;&gt;Redux&lt;&#x2F;a&gt; actions that update an app pure state we could issue painting actions to be performed in the impure canvas context ?&lt;&#x2F;p&gt;
&lt;p&gt;This is what &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;HugoDaniel&#x2F;redux-canvas&quot;&gt;redux-canvas&lt;&#x2F;a&gt; is meant to do. It allows you to keep your UI running purely with well defined components and their respective lifecycles, while giving you a shortcut to call functions on registered canvas contexts.&lt;&#x2F;p&gt;
&lt;p&gt;It is a &lt;a href=&quot;http:&#x2F;&#x2F;redux.js.org&#x2F;&quot;&gt;Redux&lt;&#x2F;a&gt; middleware that works by keeping a &lt;a href=&quot;https:&#x2F;&#x2F;developer.mozilla.org&#x2F;en-US&#x2F;docs&#x2F;Web&#x2F;JavaScript&#x2F;Reference&#x2F;Global_Objects&#x2F;Map&quot;&gt;Map()&lt;&#x2F;a&gt; of &lt;a href=&quot;https:&#x2F;&#x2F;developer.mozilla.org&#x2F;en-US&#x2F;docs&#x2F;Web&#x2F;API&#x2F;CanvasRenderingContext2D&quot;&gt;CanvasRenderingContext&lt;&#x2F;a&gt;&#x27;s that persist between redux actions, and then it passes the Map() to the functions you specify when dispatching the action.
These functions are called within a requestAnimationFrame().&lt;&#x2F;p&gt;
&lt;p&gt;This way your impure code will be playing together with the pure code without messing with it. You can keep your UI pure while playing with canvas as you see fit (perhaps even trying to keep it pure as well).&lt;&#x2F;p&gt;
&lt;p&gt;In the next post I will write some usage examples with animations and also create a few helper functions to ease the usage of &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;HugoDaniel&#x2F;redux-canvas&quot;&gt;redux-canvas&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;Meanwhile checkout my take on &lt;a href=&quot;https:&#x2F;&#x2F;hugodaniel.com&#x2F;posts&#x2F;mastering-console-log&#x2F;&quot;&gt;console.log()&lt;&#x2F;a&gt;, a quick look into &lt;a href=&quot;https:&#x2F;&#x2F;hugodaniel.com&#x2F;posts&#x2F;in-loving-memory-of-immutable&#x2F;&quot;&gt;ImmutableJS&lt;&#x2F;a&gt; and my performance measurements on &lt;a href=&quot;https:&#x2F;&#x2F;hugodaniel.com&#x2F;posts&#x2F;how-useful-is-the-javascript-set&#x2F;&quot;&gt;JavaScript Set&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Bootstrapping - week 2</title>
        <published>2016-06-16T00:00:00+00:00</published>
        <updated>2016-06-16T00:00:00+00:00</updated>
        <author>
          <name>Unknown</name>
        </author>
        <link rel="alternate" href="https://hugodaniel.com/posts/bootstrapping2/" type="text/html"/>
        <id>https://hugodaniel.com/posts/bootstrapping2/</id>
        
        <content type="html">&lt;p&gt;Lisbon is in party, this year the anual city holiday is happening in sync with a national holiday.&lt;&#x2F;p&gt;
&lt;p&gt;This means the common Lisbon worker will get 4 days of paid holiday for free :)&lt;&#x2F;p&gt;
&lt;p&gt;The Lisbon party actually lasts for 2 whole weeks, where you can dance and sing a blend of new-age cheesy pop music. Most of the fun happens during the night.&lt;&#x2F;p&gt;
&lt;p&gt;In order to carry 3 extra days of holidays for the next week (this way i would be able to recover from sunday night) i decided to work for 7 days on my 2nd week (through the weekend).&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;images&#x2F;sardinha.jpg&quot; alt=&quot;Lisbon party sardine 2016&quot; title=&quot;Uma sardinha das que se comem com os olhos&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;h2 id=&quot;2nd-week&quot;&gt;2nd Week&lt;&#x2F;h2&gt;
&lt;p&gt;In the beginning of the week i opened a &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;paintpoint&#x2F;paintpt&#x2F;issues&#x2F;2&quot;&gt;ticket&lt;&#x2F;a&gt; to render a simple square grid on the canvas. This was supposed to be a simple task but it took me a bit to complete.&lt;&#x2F;p&gt;
&lt;p&gt;What would be a good way to render to canvas using react&#x2F;redux ?&lt;&#x2F;p&gt;
&lt;p&gt;What would be a good data type for the paint app ?&lt;&#x2F;p&gt;
&lt;p&gt;How would it interact with the canvas and the react&#x2F;redux logic ?&lt;&#x2F;p&gt;
&lt;p&gt;These questions made me start a new sub-project that i named &amp;quot;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;HugoDaniel&#x2F;redux-canvas&quot;&gt;redux-canvas&lt;&#x2F;a&gt;&amp;quot;. It is yet another way to draw on the canvas using react&#x2F;redux.&lt;&#x2F;p&gt;
&lt;p&gt;By the end of the week (sunday, 12) i did not yet had it finished or published, but stay tuned (subscribe please) because a more thorough blog post about all of this is on the way.&lt;&#x2F;p&gt;
&lt;p&gt;Don&#x27;t forget to subscribe and checkout the other &amp;quot;bootstrapping&amp;quot; posts: &lt;a href=&quot;https:&#x2F;&#x2F;hugodaniel.com&#x2F;posts&#x2F;bootstrapping1&#x2F;&quot;&gt;Bootstrapping 1&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;hugodaniel.com&#x2F;posts&#x2F;bootstrapping3&#x2F;&quot;&gt;Boostrapping 3&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;hugodaniel.com&#x2F;posts&#x2F;bootstrapping4&#x2F;&quot;&gt;Bootstrapping 4&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Bootstrapping - week 1</title>
        <published>2016-06-06T00:00:00+00:00</published>
        <updated>2016-06-06T00:00:00+00:00</updated>
        <author>
          <name>Unknown</name>
        </author>
        <link rel="alternate" href="https://hugodaniel.com/posts/bootstrapping1/" type="text/html"/>
        <id>https://hugodaniel.com/posts/bootstrapping1/</id>
        
        <content type="html">&lt;p&gt;Two months have passed since i quit my job with the plan of taking some time to develop a few ideas that have outgrown me enough to earn the respect of a full-time dedication.&lt;&#x2F;p&gt;
&lt;p&gt;This &amp;quot;Bootstrapping&amp;quot; post is the first in a series of posts about a quest to a sustainable monthly income.&lt;&#x2F;p&gt;
&lt;p&gt;To start i am going to do a painting web application. A simple web app to paint points in a canvas. I call it &amp;quot;paint.pt&amp;quot;.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;1st-week&quot;&gt;1st Week&lt;&#x2F;h2&gt;
&lt;p&gt;The week went about fine, in the first days i learned a bit more about JavaScript in order to understand if a framework would be necessary for paint.pt.&lt;&#x2F;p&gt;
&lt;p&gt;After some thinking, a bit of research and some rough implementations of what i thought would be the corner cases of it, i decided to pass the oportunity to use pure JavaScript and use react instead.&lt;&#x2F;p&gt;
&lt;p&gt;By the time of this writing i am living in the year 2016. That means the rest of the week was spent configuring a react&#x2F;redux&#x2F;immutable&#x2F;webpack&#x2F;mocha&#x2F;selenium&#x2F;babel&#x2F;flow&#x2F;eslint boilerplate repository for it.&lt;&#x2F;p&gt;
&lt;p&gt;By the end of the week i realized that the sun was shining outside and so i went for a walk in Lisbon to read a few chapters of the git book.&lt;&#x2F;p&gt;
&lt;p&gt;That was it.&lt;&#x2F;p&gt;
&lt;p&gt;Check out the other &amp;quot;bootstrapping&amp;quot; posts: &lt;a href=&quot;https:&#x2F;&#x2F;hugodaniel.com&#x2F;posts&#x2F;bootstrapping2&#x2F;&quot;&gt;Bootstrapping 2&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;hugodaniel.com&#x2F;posts&#x2F;bootstrapping3&#x2F;&quot;&gt;Bootstrapping 3&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;hugodaniel.com&#x2F;posts&#x2F;bootstrapping4&#x2F;&quot;&gt;Bootstrapping 4&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>about me</title>
        <published>2016-04-09T00:00:00+00:00</published>
        <updated>2016-04-09T00:00:00+00:00</updated>
        <author>
          <name>Unknown</name>
        </author>
        <link rel="alternate" href="https://hugodaniel.com/posts/about/" type="text/html"/>
        <id>https://hugodaniel.com/posts/about/</id>
        
        <content type="html">&lt;p&gt;Hi, I am Hugo, from the ancient end of the world.&lt;&#x2F;p&gt;
&lt;p&gt;Nowdays it is still the end of the world but everybody just calls it Portugal.&lt;&#x2F;p&gt;
&lt;p&gt;I was born in Alenquer, a village near Lisbon.&lt;&#x2F;p&gt;
&lt;p&gt;I love poetry and most likely this blog will turn to be a poetry blog about my ramblings.&lt;&#x2F;p&gt;
&lt;p&gt;I also like photography and I tend to avoid the fact that I am a terrible photographer.&lt;&#x2F;p&gt;
&lt;p&gt;But unfortunately I spend all my days programming, something that I love and hate at the same time.&lt;&#x2F;p&gt;
&lt;img class=&quot;image&quot; src=&quot;&#x2F;images&#x2F;alenquer.jpg&quot; alt=&quot;Imagem de alenquer a preto e branco&quot; &#x2F;&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;cenasdohugo.blogspot.com&quot;&gt;poesia&lt;&#x2F;a&gt;
&lt;a href=&quot;https:&#x2F;&#x2F;www.github.com&#x2F;HugoDaniel&quot;&gt;github&lt;&#x2F;a&gt;
&lt;a href=&quot;https:&#x2F;&#x2F;www.twitter.com&#x2F;mr_hugo&quot;&gt;twitter&lt;&#x2F;a&gt;
&lt;a href=&quot;http:&#x2F;&#x2F;www.hugodaniel.pt&#x2F;atom.xml&quot;&gt;rss&lt;&#x2F;a&gt;
e-mail: mail [[at]] hugodaniel.pt&lt;&#x2F;p&gt;
</content>
        
    </entry>
</feed>
